(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();function f(t,e){const n={};return n.vnode=!0,n.type=t,n.props=e||{},n.children=[].concat.apply([],[].slice.call(arguments,2)),n.isInstance=t&&t.template&&typeof t.template=="function",n.isComponent=typeof t=="function"&&t.prototype&&typeof t.prototype.render=="function",n.isStateless=typeof t=="function"&&!n.isComponent,n.isDom=typeof t=="string",n}f.f=t=>t.children;function oe(t,e){for(const n in e)t[n]=e[n];return t}function P(){}function Ne(t,e,n,s){if(s)return{log:P,warn:P,error:P};const r=[];t=t.toUpperCase(),r.push(`%c ${t} `);let i="font-weight:bold;";return e&&(i+=`color:${e};`),n&&(i+=`background-color:${n}`),r.push(i),{log:console.log.bind(console,...r),warn:console.warn.bind(console,...r),error:console.error.bind(console,...r)}}const ge=["nodes","components","refs","domEvents","storeEvents"];class S{constructor(){this.data={};for(let e=0;e<ge.length;e++)this.data[ge[e]]=[]}append(e){for(const n in e)this.data[n]=this.data[n].concat(e[n])}set(e){for(const n in e)this.data[n]=e[n]}get(){return this.data}}const V=["xlink","xmlns","xml"],He=new Set(["placeholder","autoplay","muted","for","webkit-playsinline","playsinline","selected"]);let J;const B=(t,e)=>t.substr(0,e.length)===e,Ie=t=>(e,n)=>n.classList.toggle(t,e||!1),X=(t="textContent",e)=>(n,s)=>{e&&t!==(t=t.replace(/^xlink:?/,""))?s.setAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase(),n):(J=n??"",e||(s[t]=J),(e||He.has(t)||B(t,"data-"))&&s.setAttribute(t,J))};function $e(t,e,n,s,r){if(n!==void 0&&!(e==="__self"||e==="__source")){e==="className"&&(e="class");for(let i=0;i<V.length;i++)if(B(e,V[i])){const o=V[i].length;e[o]&&e[o]!==":"&&(e=V[i]+":"+e[o].toLowerCase()+e.substr(o+1,e.length));break}if(e!=="ref"){if(B(e,"event-")){const i=e.toLowerCase().substring(6);s.append({domEvents:[{el:t,evt:i,fn:n}]})}else if(e==="store"){const i=Array.isArray(n)?n:[n],o=[];for(let a=0,c=i.length;a<c;a++){const u=Array.isArray(i[a])?i[a]:[i[a]],p=u[0],m=u[1],w=u[2]!==void 0?u[2]:!0;p&&o.push({store:p,fn:m,init:w,el:t})}s.append({storeEvents:o})}else if(B(e,"store-class-")){const i=e.substring(12),o=Ie(i);s.append({storeEvents:[{store:n,init:!0,fn:o,el:t}]})}else if(B(e,"store-")){let i=e.substring(6);i==="text"&&(i="textContent");const o=X(i,r);s.append({storeEvents:[{store:n,init:!0,fn:o,el:t}]})}else if(!(typeof n=="function"&&B(e,"on")))if(e==="class"&&!r)t.className=n||"";else if(e==="style")typeof n=="object"?oe(t.style,n):typeof n=="string"&&(t.style.cssText=n);else if(e!=="list"&&e!=="type"&&!r&&e in t)try{X(e,r)(n,t)}catch{}else typeof n!="object"&&typeof n!="function"&&X(e,r)(n,t)}}}function Ve(t){return Array.isArray(t)?t:[t]}function $(t,e){if(Array.isArray(t))return We(t,e);if(t instanceof window.Element)return qe(t);if(t===null||typeof t!="object"||!t.vnode)return Ue(t);const n=oe(oe({},t.props),{children:[].concat.apply([],t.children||[])});if(t.isDom)return Ze(t,n,e);if(t.isInstance)return ve(t,n,e,!0);if(t.isStateless)return ze(t,n,e);if(t.isComponent)return ve(t,n,e)}function We(t,e){t=Ve(t);const n=new S;for(let s=0;s<t.length;s++)n.append($(t[s],e));return n.get()}function Ue(t){const e=new S;return t==null||t===!1||e.append({nodes:document.createTextNode(t+"")}),e.get()}function Ze(t,e,n){const s=new S;let r=[];t.type==="svg"&&(n=!0);for(let o=0;o<e.children.length;o++){const a=$(e.children[o],n);a.nodes&&(r=r.concat(a.nodes),s.append({components:a.components,refs:a.refs,domEvents:a.domEvents,storeEvents:a.storeEvents}))}const i=n?document.createElementNS("http://www.w3.org/2000/svg",t.type):document.createElement(t.type);for(const o in t.props)$e(i,o,t.props[o],s,n);for(let o=0;o<r.length;o++)i.appendChild(r[o]);return e.ref&&s.append({refs:{ref:i,fn:e.ref}}),s.append({nodes:i}),s.get()}function qe(t){const e=new S;return e.append({nodes:t}),e.get()}function ze(t,e,n){const s=new S,r=t.type(e);return s.append($(r,n)),s.get()}function ve(t,e,n,s=!1){const r=new S,i=s?t.type:new t.type(e);s&&(e=i.props),i.beforeRender(e);const o=i.template(e,i.state||{});e.ref&&r.append({refs:{ref:i,fn:e.ref}}),r.append($(o,n));const a=r.data.nodes;i.base=a.length>1?a:a[0];for(const c in r.data)c!=="nodes"&&(i._collector[c]||(i._collector[c]=[]),i._collector[c]=i._collector[c].concat(r.data[c]));r.set({components:[i],refs:[],domEvents:[],storeEvents:[]});for(let c=0;c<i._collector.components.length;c++)i._collector.components[c]._parent=i;return r.get()}function T(t,e,n){const s=t._collector&&t._collector.components;if(n&&e(t),s)for(let r=0;r<s.length;r++)T(s[r],e);n||e(t)}function Ye(t){for(let e=0;e<t._collector.refs.length;e++)t._collector.refs[e].fn(t._collector.refs[e].ref),t._collector.refs[e].ref=null}function Ge(t){for(let e=0;e<t._collector.storeEvents.length;e++){const n=t._collector.storeEvents[e],s=n.fn;n.fn=function(r){s(r,n.el)},n.store.subscribe(n.fn),n.init&&n.fn(n.store.current)}}function Je(t){t.test&&console.log("call dom listeners",t._collector.domEvents);for(let e=0;e<t._collector.domEvents.length;e++){const n=t._collector.domEvents[e];n.el.addEventListener(n.evt,n.fn)}}function Xe(t){T(t,Ye)}function Qe(t){T(t,Je),T(t,Ge)}const et=new Set(["g","svg","defs"]);function _e(t,e=document.body,n){let s=0;const r=$(t,et.has(e.tagName));let i={_collector:r};if(Xe(i),T(i,function(o){o.afterRender&&o.afterRender(o.props)}),typeof e=="function"){const o=r.nodes.length<2?r.nodes[0]:r.nodes;e(o)}else if(e)for(s=0;s<r.nodes.length;s++)e.appendChild(r.nodes[s]);if((!n||n.mounted)&&(Qe(i),T(i,function(o){o.mounted=!0,o.afterMount&&o.afterMount(o.props)})),n&&n._collector){const o=n._collector;for(s=0;s<r.components.length;s++)r.components[s]._parent=n;o.refs&&(o.refs=o.refs.concat(r.refs)),o.components&&(o.components=o.components.concat(r.components)),o.domEvents&&(o.domEvents=o.domEvents.concat(r.domEvents)),o.storeEvents&&(o.storeEvents=o.storeEvents.concat(r.storeEvents))}return i=void 0,r}class k{constructor(e={}){this._parent=null,this._collector={refs:[],components:[],domEvents:[],storeEvents:[]},this._storeListeners=[],this.refs={},this.state={},this.store={},this.props=e||{},this.base=null,this.mounted=!1,this.destroyed=!1;const n=e.name||this.constructor.name||"Component",{log:s,warn:r,error:i}=Ne(n,"white","#000",e.disableLog);this.log=s,this.warn=r,this.error=i}storeSubscribe(e,n,s,r=!0){e.subscribe(n,s),this._storeListeners.push([e,n,s]),r&&n.call(s,e.current)}template(){}beforeRender(){}afterRender(){}afterMount(){}beforeDestroy(){}ref(e){const n=this;return function(r){n.refs[e]=r}}refArray(e,n=!1){const s=this.refs[e]||(this.refs[e]=[]);let r=s.length,i,o;return n&&(i=this.refs.__pools||(this.refs.__pools={}),o=i[e]||(i[e]=[]),o.length&&(r=o.pop())),s[r]=null,function(c){s[r]=c,n&&o.push(r)}}refMap(e,n){const s=this.refs[n]||(this.refs[n]=new Map);return function(i){i?s.set(e,i):s.delete(e)}}render(e,n){return _e(e,n,this)}destroy(){let e=0;for(this.beforeDestroy(this.props),e=this._collector.domEvents.length-1;e>=0;e--){const s=this._collector.domEvents[e];s.el.removeEventListener(s.evt,s.fn)}for(e=this._collector.storeEvents.length-1;e>=0;e--){const s=this._collector.storeEvents[e];s.store.unsubscribe(s.fn)}for(e=this._storeListeners.length-1;e>=0;e--){const s=this._storeListeners[e];s[0].unsubscribe(s[1],s[2])}for(e=this._collector.components.length-1;e>=0;e--)this._collector.components[e].destroy();if(this.mounted=!1,this.destroyed=!0,this._parent){const s=this._parent._collector.components.indexOf(this);~s&&this._parent._collector.components.splice(s,1),this._parent=null}for(e=this._collector.refs.length-1;e>=0;e--)this._collector.refs[e].fn(null),this._collector.refs.splice(e,1);let n=Array.isArray(this.base)?this.base:[this.base];for(e=0;e<n.length;e++)n[e]&&n[e].parentNode&&n[e].parentNode.removeChild(n[e]);this.base=n=null,this.props=null,this.state=null,this.store=null,this.refs=null,this._storeListeners=null}}function we(t,e,n,s){this.fn=e,this.ctx=n||null,this.owner=t,this.once=!!s}function Q(t,e){e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),e.ctx=e.fn=e.owner=null,e===t._first&&(t._first=e.next),e===t._last&&(t._last=e.prev)}class tt{constructor(){this._first=this._last=null}dispatch(e,n,s,r,i){let o=this._first;for(;o;)o.fn.call(o.ctx,e,n,s,r,i),o.once&&this.unsubscribe(o),o=o.next}subscribe(e,n,s){const r=new we(this,e,n,s);return this._first?(this._last.next=r,r.prev=this._last,this._last=r):(this._first=r,this._last=r),r}subscribeOnce(e,n){return this.subscribe(e,n,!0)}unsubscribe(e,n){if(e instanceof we)return Q(this,e);n||(n=null);let s=this._first;for(;s;)s.fn===e&&s.ctx===n&&Q(this,s),s=s.next}unsubscribeAll(){let e=this._first;for(this._first=this._last=null;e;)Q(this,e),e=e.next}}class xe extends tt{constructor(e){super(),this.current=e}set(){throw new Error("Cannot set a different value for a Readable Signal. Use Writable instead")}get(){return this.current}}function L(t){return new xe(t)}class Le extends xe{set(e,n){if(!n&&this.current===e)return;this.previous=this.current,this.current=e;let s=this._first;for(;s;)s.fn.call(s.ctx,this.current,this.previous),s.once&&this.unsubscribe(s),s=s.next}update(e,n){const s=e(this.current);this.set(s!==void 0?s:this.current,n)}}function v(t){return new Le(t)}function O(t,e){const n=new Le,s=n.set.bind(n);delete n.set;const r=Array.isArray(t);let i=r?new Array(t.length):null;if(r)for(let a=0,c=t.length;a<c;a++)i[a]=t[a].current,t[a].subscribe(function(u){i[a]=u,o()});else i=t.current,t.subscribe(function(a){i=a,o()});o();function o(){const a=e(i);a&&a.then?a.then(s):s(a)}return n}const Ae=t=>O(t,e=>!e),l={AA_AB_FILL_MODE_LENGTH:L(3),LINE_WIDTHS:L([{value:10,name:"medium"},{value:20,name:"large"},{value:5,name:"small"}]),COLORS:L([{value:"#FFF1E8"},{value:"#FF004D"},{value:"#FFA300"},{value:"#FFEC27"},{value:"#00E436"},{value:"#29ADFF"},{value:"#83769C"},{value:"#FF77A8"},{value:"#FFCCAA"}]),FILL_MODES:L([{value:"AA→AB"},{value:"AA→BB"},{value:"AA→AB→BB"},{value:"AB"}]),drawMode:v("draw"),wireframe:v(!0),fillMode:v("AA→AB"),style:v({lineWidth:10,strokeStyle:"white",lineJoin:"round",lineCap:"round"}),lines:v([]),raf:{fps:L(60),maxDuration:L(60*5),isRunning:v(!1),frameCount:v(0)}};window.Store=l;var nt=function(e,n){return e[0]=n[0],e[1]=n[1],e},me=nt,st=function(t,e){Array.isArray(e)||(e=[]),t.length>0&&e.push(me([0,0],t[0]));for(var n=0;n<t.length-1;n++){var s=t[n],r=t[n+1],i=s[0],o=s[1],a=r[0],c=r[1],u=[.75*i+.25*a,.75*o+.25*c],p=[.25*i+.75*a,.25*o+.75*c];e.push(u),e.push(p)}return t.length>1&&e.push(me([0,0],t[t.length-1])),e};class Me{constructor({points:e=[],fillMode:n="AA→AB",firstFrame:s=0,style:r={}}={}){this.points=e,this.fillMode=n,this.firstFrame=s,this.style=r}get isEmpty(){return!this.points||!this.points.length}push(e){this.points.push(e)}render(e,n=Number.POSITIVE_INFINITY,{smoothed:s=!0,fillMode:r=this.fillMode,style:i=this.style}={}){if(this.isEmpty||n<this.firstFrame&&r!=="AB")return;e.save(),e.beginPath();for(const[c,u]of Object.entries(i))c==="lineDash"&&e.setLineDash(u),e[c]=u;const o=[];switch(r){case"AB":o[0]=0,o[1]=this.points.length;break;case"AA→AB":o[0]=0,o[1]=n-this.firstFrame;break;case"AA→BB":o[0]=Math.max(0,n-this.firstFrame-l.AA_AB_FILL_MODE_LENGTH.get()),o[1]=n-this.firstFrame;break;case"AA→AB→BB":o[0]=Math.max(0,n-this.firstFrame-this.points.length/2),o[1]=n-this.firstFrame;break}const a=s?st(this.points.slice(o[0],o[1])):this.points.slice(o[0],o[1]);for(let c=0;c<a.length;c++){const u=a[c];u&&e[c?"lineTo":"moveTo"](u[0],u[1])}e.stroke(),e.restore()}toJSON(){return{points:this.points,fillMode:this.fillMode,firstFrame:this.firstFrame,style:this.style}}}function le(t,e,n){var s,r,i,o,a;e==null&&(e=100);function c(){var p=Date.now()-o;p<e&&p>=0?s=setTimeout(c,e-p):(s=null,n||(a=t.apply(i,r),i=r=null))}var u=function(){i=this,r=arguments,o=Date.now();var p=n&&!s;return s||(s=setTimeout(c,e)),p&&(a=t.apply(i,r),i=r=null),a};return u.clear=function(){s&&(clearTimeout(s),s=null)},u.flush=function(){s&&(a=t.apply(i,r),i=r=null,clearTimeout(s),s=null)},u}le.debounce=le;var rt=le;class Ee extends k{beforeRender(e){this.handleResize=this.handleResize.bind(this),this.state={dpr:L(e.dpr||window.devicePixelRatio||1)}}template(){return f("canvas",{class:"canvas",ref:this.ref("canvas")})}afterMount(){this.context=this.refs.canvas.getContext("2d"),this.handleResize(),window.addEventListener("resize",rt(this.handleResize,100))}clear(){this.context.clearRect(0,0,this.refs.canvas.width,this.refs.canvas.height)}handleResize(){const e=this.state.dpr.get(),{width:n,height:s}=this.refs.canvas.getBoundingClientRect();this.refs.canvas.width=n*e,this.refs.canvas.height=s*e,this.context.scale(e,e)}}function it(t,e){if(e===void 0)throw new Error("You must specify a callback");t===void 0&&(t=30);var n=1e3/t,s=0,r=0;return function(i){s-=i,r+=i,s<=0&&(e(r),r=0,s=n+s%n)}}var z=typeof window>"u"?global:window,D=[],F=[],K=[],M=null,R=null,N=!1,fe=!1,ue,A;function U(t){t===void 0&&(t=0),R===null&&(R=t),A=t-R,ue+=A,R=t,M=N?null:z.requestAnimationFrame(U),N&&(N=!1);var e;if(fe){for(e=0;e<K.length;e++)K[e](A);for(e=0;e<D.length;e++)D[e](A);for(e=0;e<F.length;e++)F[e](A)}else for(e=0;e<D.length;e++)D[e](A)}function Y(){fe=F.length>0||K.length>0}function de(t,e,n){return!e||!t||~t.indexOf(e)?!1:(n=!!n,n?t.unshift(e):t.push(e),!0)}function he(t,e){if(!e)return!1;var n=t.indexOf(e);return~n?(t.splice(n,1),t.length===0):!1}function ot(t,e){de(K,t,e)&&Y()}function lt(t,e){de(F,t,e)&&Y()}function at(t,e){de(D,t,e)&&Oe()}function ct(t){he(K,t)&&Y()}function ft(t,e){he(F,t)&&Y()}function ut(t){he(D,t)&&pe()}function Oe(t){N=!1,!M&&(t=!!t,R=null,t?U():M=z.requestAnimationFrame(U))}function dt(){M||(N=!0,R=null,M=z.requestAnimationFrame(U))}function pe(){M&&(z.cancelAnimationFrame(M),M=null)}function ht(){pe(),D.length=0,F.length=0,K.length=0,fe=!1,R=null,ue=0,A=0}const De={add:at,addAfter:lt,addBefore:ot,remove:ut,removeAfter:ft,removeBefore:ct,start:Oe,stop:pe,time:ue,dt:A,requestOnce:dt,dispose:ht},pt=()=>{l.raf.frameCount.update(t=>++t%l.raf.maxDuration.get())},Re=it(l.raf.fps.current,pt);function Pe(){l.raf.isRunning.set(!0),De.add(Re)}function Be(){l.raf.isRunning.set(!1),De.remove(Re)}function gt(){l.raf.isRunning.update(t=>!t),l.raf.isRunning.get()?Pe():Be()}const y={start:Pe,stop:Be,toggle:gt},ae=t=>{if(window.TouchEvent&&t instanceof TouchEvent){const e=t.targetTouches[0];return e?[e.clientX,e.clientY]:[-1,-1]}return[t.clientX,t.clientY]};let vt=class extends k{beforeRender(e){this.update=this.update.bind(this),this.handleTick=this.handleTick.bind(this),this.handlePenDown=this.handlePenDown.bind(this),this.handlePenMove=this.handlePenMove.bind(this),this.handlePenUp=this.handlePenUp.bind(this),this.state={isDisabled:e["store-disabled"]||v(e.disabled),penDown:v(!1),penPosition:v([-1,-1]),line:v(null)}}template(e,n){return f("section",{class:"drawer","store-class-has-pen-down":n.penDown,"store-class-is-disabled":n.isDisabled,"event-touchstart":this.handlePenDown,"event-mousedown":this.handlePenDown,"event-touchend":this.handlePenUp,"event-mouseup":this.handlePenUp},f(Ee,{ref:this.ref("canvas")}))}afterRender(){document.body.addEventListener("mouseleave",this.handlePenUp),document.body.addEventListener("touchmove",e=>window.requestAnimationFrame(()=>this.handlePenMove(e))),document.body.addEventListener("mousemove",e=>window.requestAnimationFrame(()=>this.handlePenMove(e))),this.state.line.subscribe(this.update),l.raf.frameCount.subscribe(this.handleTick)}update(){this.refs.canvas.clear();const e=this.state.line.get();e&&e.render(this.refs.canvas.context,l.raf.frameCount.get(),{fillMode:"AB"})}handlePenDown(e){this.state.penDown.set(!0),this.state.penPosition.set(ae(e));const n=new Me({firstFrame:l.raf.frameCount.get(),fillMode:l.fillMode.get(),style:l.style.get()});this.state.line.set(n)}handlePenMove(e){this.state.penDown.get()&&(y.start(),this.state.penPosition.set(ae(e)))}handleTick(){if(!this.state.penDown.get())return;const e=this.state.line.get();if(e){if(e.firstFrame+e.points.length>=l.raf.maxDuration.get()){this.handlePenUp();return}this.state.line.update(n=>(n.push(this.state.penPosition.get()),n),!0)}}handlePenUp(e){this.state.penDown.set(!1);const n=this.state.line.get();this.state.line.set(null),!(!n||n.isEmpty)&&l.lines.update(s=>(s.push(n),s),!0)}};const wt=t=>t[t.length-1];class mt extends k{beforeRender(e){this.handleClick=this.handleClick.bind(this),this.state={isDisabled:e["store-disabled"]||v(e.disabled)}}template(e,n){return f("section",{class:"paster","store-class-is-disabled":n.isDisabled,"event-click":this.handleClick})}handleClick(e){const n=wt(l.lines.get());if(!n)return;const[s,r]=ae(e),i=n.points[0][0]-s,o=n.points[0][1]-r,a=new Me({points:n.points.map(([c,u])=>[c-i,u-o]),firstFrame:l.raf.frameCount.get(),style:Object.assign({},n.style,l.style.current),fillMode:l.fillMode.get()});y.start(),l.lines.update(c=>(c.push(a),c),!0)}}class bt extends k{beforeRender(){this.handleTick=this.handleTick.bind(this)}template(e,n){return f("section",{class:"renderer"},f(Ee,{ref:this.ref("canvas")}))}afterRender(){l.lines.subscribe(this.handleTick),l.wireframe.subscribe(this.handleTick),l.raf.frameCount.subscribe(this.handleTick)}handleTick(){this.refs.canvas.clear();const e=l.raf.frameCount.get(),n=l.wireframe.get(),{context:s}=this.refs.canvas;for(const r of l.lines.get())n&&r.render(s,void 0,{fillMode:"AB",style:{lineWidth:2,strokeStyle:"rgba(255 255 255 / 50%)",lineDash:[10,10]}}),r.render(s,e,{smoothed:!0})}}var Z={},yt={get exports(){return Z},set exports(t){Z=t}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(t){(function(){var e={}.hasOwnProperty;function n(){for(var s=[],r=0;r<arguments.length;r++){var i=arguments[r];if(i){var o=typeof i;if(o==="string"||o==="number")s.push(i);else if(Array.isArray(i)){if(i.length){var a=n.apply(null,i);a&&s.push(a)}}else if(o==="object"){if(i.toString!==Object.prototype.toString&&!i.toString.toString().includes("[native code]")){s.push(i.toString());continue}for(var c in i)e.call(i,c)&&i[c]&&s.push(c)}}}return s.join(" ")}t.exports?(n.default=n,t.exports=n):window.classNames=n})()})(yt);class b extends k{beforeRender(e){this.animate=this.animate.bind(this),this.handleClick=this.handleClick.bind(this),this.state={label:e["store-label"]||L(e.label),isWaiting:e["store-is-waiting"]||v(!1),isDisabled:e["store-disabled"]||v(e.disabled),isHidden:e["store-hidden"]||v(e.hidden)}}template(e,n){return f("button",{class:Z("button",e.class),"store-class-is-waiting":n.isWaiting,"store-disabled":n.isDisabled,"store-hidden":n.isHidden,"event-click":this.handleClick,"event-mouseenter":e["event-mouseenter"]||P,"event-mouseleave":e["event-mouseleave"]||P,title:e.title,style:e.style,type:e.type},e.icon&&f("div",{class:"button__icon",ref:this.ref("icon"),innerHTML:e.icon}),f("div",{class:"button__text","store-innerHTML":n.label}))}afterRender(){this.state.isHidden.subscribe(this.animate)}animate(){this&&this.refs&&this.refs.icon&&(this.refs.icon.style.animation="none",this.refs.icon.offsetHeight,this.refs.icon.style.animation=null)}async handleClick(e){if(this.state.isWaiting.get())return e.preventDefault();this.state.isWaiting.set(!0),await(this.props["event-click"]||P)(e),this.mounted&&(this.state.isWaiting.set(!1),this.animate())}}const Ct=`<svg width="24" height="24" stroke-width="1.5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M3 19V5C3 3.89543 3.89543 3 5 3H16.1716C16.702 3 17.2107 3.21071 17.5858 3.58579L20.4142 6.41421C20.7893 6.78929 21 7.29799 21 7.82843V19C21 20.1046 20.1046 21 19 21H5C3.89543 21 3 20.1046 3 19Z" stroke="currentColor" stroke-width="1.5"/>
<path d="M8.6 9H15.4C15.7314 9 16 8.73137 16 8.4V3.6C16 3.26863 15.7314 3 15.4 3H8.6C8.26863 3 8 3.26863 8 3.6V8.4C8 8.73137 8.26863 9 8.6 9Z" stroke="currentColor" stroke-width="1.5"/>
<path d="M6 13.6V21H18V13.6C18 13.2686 17.7314 13 17.4 13H6.6C6.26863 13 6 13.2686 6 13.6Z" stroke="currentColor" stroke-width="1.5"/>
</svg>
`,kt=`<svg width="24" height="24" stroke-width="1.5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M6.90588 4.53682C6.50592 4.2998 6 4.58808 6 5.05299V18.947C6 19.4119 6.50592 19.7002 6.90588 19.4632L18.629 12.5162C19.0211 12.2838 19.0211 11.7162 18.629 11.4838L6.90588 4.53682Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
`,_t=`<svg width="24" height="24" stroke-width="1.5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M6 18.4V5.6C6 5.26863 6.26863 5 6.6 5H9.4C9.73137 5 10 5.26863 10 5.6V18.4C10 18.7314 9.73137 19 9.4 19H6.6C6.26863 19 6 18.7314 6 18.4Z" stroke="currentColor" stroke-width="1.5"/>
<path d="M14 18.4V5.6C14 5.26863 14.2686 5 14.6 5H17.4C17.7314 5 18 5.26863 18 5.6V18.4C18 18.7314 17.7314 19 17.4 19H14.6C14.2686 19 14 18.7314 14 18.4Z" stroke="currentColor" stroke-width="1.5"/>
</svg>
`;class xt extends k{beforeRender(){this.update=this.update.bind(this),this.handleChange=this.handleChange.bind(this)}template(e,n){return f("section",{class:"timeline"},f("fieldset",{class:"group"},f(b,{icon:_t,"store-hidden":Ae(l.raf.isRunning),"event-click":y.stop}),f(b,{icon:kt,"store-hidden":l.raf.isRunning,"event-click":y.start}),f("input",{type:"range",ref:this.ref("input"),"event-input":this.handleChange,step:"1","store-value":l.raf.frameCount,"store-max":l.raf.maxDuration})),f(b,{icon:Ct,"event-click":this.handleExport}))}afterRender(){l.raf.frameCount.subscribe(this.update)}update(){const e=l.raf.frameCount.get();this.refs.input.value=e}handleChange(e){y.stop(),l.raf.frameCount.set(+e.target.value)}}class ee extends k{beforeRender(e){this.state={value:v(((e.values||[])[0]||{}).value)}}template(e,n){return f("div",{icon:Z("switcher",e.class)},e.values.map((s,r)=>f(b,{...s,ref:this.refArray("buttons"),"event-click":()=>this.handleChange(r+1)})))}afterMount(){this.handleChange(0,this.state.value.get())}handleChange(e){e=e%this.props.values.length;const n=this.props.values[e];(this.props["event-change"]||P)(n.value),this.state.value.set(n.value);for(let s=0;s<this.refs.buttons.length;s++)this.refs.buttons[s].state.isHidden.set(s!==e)}}function Lt({force:t=!1}={}){!t&&!window.confirm("Tout effacer ?")||(l.lines.set([]),l.drawMode.set("draw"))}function At(){l.lines.update(t=>t.slice(0,t.length-1),!0),l.lines.current.length||l.drawMode.set("draw")}const q={clear:Lt,undo:At},be=`<svg width="24" height="24" stroke-width="1.5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
`,Mt=`<svg width="24" height="24" viewBox="0 0 24 24" stroke-width="1.5" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M20 9L18.005 20.3463C17.8369 21.3026 17.0062 22 16.0353 22H7.96474C6.99379 22 6.1631 21.3026 5.99496 20.3463L4 9" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M21 6L15.375 6M3 6L8.625 6M8.625 6V4C8.625 2.89543 9.52043 2 10.625 2H13.375C14.4796 2 15.375 2.89543 15.375 4V6M8.625 6L15.375 6" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
`,Et=`<svg width="24" height="24" viewBox="0 0 24 24" stroke-width="1.5" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M14.3632 5.65156L15.8431 4.17157C16.6242 3.39052 17.8905 3.39052 18.6716 4.17157L20.0858 5.58579C20.8668 6.36683 20.8668 7.63316 20.0858 8.41421L18.6058 9.8942M14.3632 5.65156L4.74749 15.2672C4.41542 15.5993 4.21079 16.0376 4.16947 16.5054L3.92738 19.2459C3.87261 19.8659 4.39148 20.3848 5.0115 20.33L7.75191 20.0879C8.21972 20.0466 8.65806 19.8419 8.99013 19.5099L18.6058 9.8942M14.3632 5.65156L18.6058 9.8942" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
`,Ot=`<svg width="24" height="24" stroke-width="1.5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M13.8476 13.317L9.50515 18.2798C8.70833 19.1905 7.29167 19.1905 6.49485 18.2798L2.15238 13.317C1.49259 12.563 1.49259 11.437 2.15238 10.683L6.49485 5.72018C7.29167 4.80952 8.70833 4.80952 9.50515 5.72017L13.8476 10.683C14.5074 11.437 14.5074 12.563 13.8476 13.317Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M13 19L17.8844 13.3016C18.5263 12.5526 18.5263 11.4474 17.8844 10.6984L13 5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M17 19L21.8844 13.3016C22.5263 12.5526 22.5263 11.4474 21.8844 10.6984L17 5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
`,Dt=`<svg width="24" height="24" viewBox="0 0 24 24" stroke-width="1.5" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M4.5 8C8.5 8 11 8 15 8C15 8 15 8 15 8C15 8 20 8 20 12.7059C20 18 15 18 15 18C11.5714 18 9.71429 18 6.28571 18" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M7.5 11.5C6.13317 10.1332 5.36683 9.36683 4 8C5.36683 6.63317 6.13317 5.86683 7.5 4.5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
`,Rt=`<svg width="24" height="24" stroke-width="1.5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M3 3L21 21" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M10.5 10.6771C10.1888 11.0296 10 11.4928 10 12C10 13.1045 10.8954 14 12 14C12.5072 14 12.9703 13.8112 13.3229 13.5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M7.36185 7.5611C5.68002 8.73968 4.27894 10.4188 3 12C4.88856 14.991 8.2817 18 12 18C13.5499 18 15.0434 17.4772 16.3949 16.6508" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M12 6C16.0084 6 18.7015 9.1582 21 12C20.6815 12.5043 20.3203 13.0092 19.922 13.5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
`,Pt=`<svg width="24" height="24" stroke-width="1.5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M12 14C13.1046 14 14 13.1046 14 12C14 10.8954 13.1046 10 12 10C10.8954 10 10 10.8954 10 12C10 13.1046 10.8954 14 12 14Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M21 12C19.1114 14.991 15.7183 18 12 18C8.2817 18 4.88856 14.991 3 12C5.29855 9.15825 7.99163 6 12 6C16.0084 6 18.7015 9.1582 21 12Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
`,Bt=`<svg width="24" height="24" stroke-width="1.5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M9 2L15 2" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M12 10L12 14" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M12 22C16.4183 22 20 18.4183 20 14C20 9.58172 16.4183 6 12 6C7.58172 6 4 9.58172 4 14C4 18.4183 7.58172 22 12 22Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
`;class Tt extends k{beforeRender(){this.state={hasNoLines:O(l.lines,e=>!e.length)}}template(e,n){return f("section",{class:"toolbar"},f("fieldset",null,f("fieldset",null,f(b,{icon:Et,label:"Dessin",class:"button--draw-mode","store-hidden":O(l.drawMode,s=>s!=="draw"),"store-disabled":n.hasNoLines,"event-click":()=>l.drawMode.set("paste")}),f(b,{icon:Ot,label:"Tampon",class:"button--draw-mode","store-hidden":O(l.drawMode,s=>s!=="paste"),"event-click":()=>l.drawMode.set("draw")})),f(ee,{values:l.LINE_WIDTHS.get().map(({name:s,value:r})=>({value:r,icon:be,class:`disc disc-${s}`})),"event-change":s=>{l.style.update(r=>({...r,lineWidth:s}),!0)}}),f(ee,{values:l.COLORS.get().map(({label:s,value:r})=>({value:r,icon:be,class:"disc",style:`--color: ${r}`})),"event-change":s=>{l.style.update(r=>({...r,strokeStyle:s}),!0)}}),f(ee,{values:l.FILL_MODES.get().map(({value:s})=>({value:s,icon:Bt,label:s.replace(/(→)/g,"&thinsp;$1&thinsp;")})),"event-change":s=>l.fillMode.set(s)})),f("fieldset",null,f(b,{icon:Pt,"store-hidden":Ae(l.wireframe),"event-click":()=>l.wireframe.set(!1)}),f(b,{icon:Rt,"store-hidden":l.wireframe,"event-click":()=>l.wireframe.set(!0)}),f("fieldset",{class:"group"},f(b,{icon:Dt,"store-disabled":n.hasNoLines,"event-click":q.undo}),f(b,{icon:Mt,"store-disabled":O(l.lines,s=>!s.length),"event-click":q.clear}))))}}const Ft=`<svg width='100%' height='100%' viewBox='0 0 116 100'>
  <path d='M57.734,82.319C39.884,82.319 25.414,67.85 25.414,50C25.414,32.15 39.884,17.681 57.734,17.681C75.584,17.681 90.053,32.15 90.053,50C90.053,67.85 75.584,82.319 57.734,82.319M86.603,-0L28.867,-0L0,50L28.867,100L86.603,100L115.47,50L86.603,-0Z' />
</svg>
`;class Kt extends k{beforeRender(){this.handleClick=this.handleClick.bind(this)}template(e){return f("section",{class:"splashscreen","event-click":this.handleClick},f("div",{class:"splashscreen__content"},f("div",{class:"splashscreen__icon",innerHTML:Ft}),f(b,{label:"Nouveau dessin"})))}async handleClick(){await document.body.requestFullscreen(),this.destroy()}}class St extends k{template(e){return f("main",{class:"app"},f(Kt,{ref:this.ref("splashscreen")}),f(Tt,null),f("div",{class:"app__main"},f(vt,{"store-disabled":O(l.drawMode,n=>n!=="draw")}),f(mt,{"store-disabled":O(l.drawMode,n=>n!=="paste")}),f(bt,null)),f(xt,null))}afterRender(){document.addEventListener("click",()=>{this.refs.splashscreen.mounted&&this.refs.splashscreen.destroy()},{once:!0})}}var te=typeof navigator<"u"?navigator.userAgent.toLowerCase().indexOf("firefox")>0:!1;function ne(t,e,n,s){t.addEventListener?t.addEventListener(e,n,s):t.attachEvent&&t.attachEvent("on".concat(e),function(){n(window.event)})}function Te(t,e){for(var n=e.slice(0,e.length-1),s=0;s<n.length;s++)n[s]=t[n[s].toLowerCase()];return n}function Fe(t){typeof t!="string"&&(t=""),t=t.replace(/\s/g,"");for(var e=t.split(","),n=e.lastIndexOf("");n>=0;)e[n-1]+=",",e.splice(n,1),n=e.lastIndexOf("");return e}function jt(t,e){for(var n=t.length>=e.length?t:e,s=t.length>=e.length?e:t,r=!0,i=0;i<n.length;i++)s.indexOf(n[i])===-1&&(r=!1);return r}var H={backspace:8,"⌫":8,tab:9,clear:12,enter:13,"↩":13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_multiply:106,num_add:107,num_enter:108,num_subtract:109,num_decimal:110,num_divide:111,"⇪":20,",":188,".":190,"/":191,"`":192,"-":te?173:189,"=":te?61:187,";":te?59:186,"'":222,"[":219,"]":221,"\\":220},C={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,cmd:91,command:91},ce={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91},g={16:!1,18:!1,17:!1,91:!1},h={};for(var W=1;W<20;W++)H["f".concat(W)]=111+W;var d=[],ye=!1,Ke="all",Se=[],G=function(e){return H[e.toLowerCase()]||C[e.toLowerCase()]||e.toUpperCase().charCodeAt(0)},Nt=function(e){return Object.keys(H).find(function(n){return H[n]===e})},Ht=function(e){return Object.keys(C).find(function(n){return C[n]===e})};function je(t){Ke=t||"all"}function I(){return Ke||"all"}function It(){return d.slice(0)}function $t(){return d.map(function(t){return Nt(t)||Ht(t)||String.fromCharCode(t)})}function Vt(t){var e=t.target||t.srcElement,n=e.tagName,s=!0;return(e.isContentEditable||(n==="INPUT"||n==="TEXTAREA"||n==="SELECT")&&!e.readOnly)&&(s=!1),s}function Wt(t){return typeof t=="string"&&(t=G(t)),d.indexOf(t)!==-1}function Ut(t,e){var n,s;t||(t=I());for(var r in h)if(Object.prototype.hasOwnProperty.call(h,r))for(n=h[r],s=0;s<n.length;)n[s].scope===t?n.splice(s,1):s++;I()===t&&je(e||"all")}function Zt(t){var e=t.keyCode||t.which||t.charCode,n=d.indexOf(e);if(n>=0&&d.splice(n,1),t.key&&t.key.toLowerCase()==="meta"&&d.splice(0,d.length),(e===93||e===224)&&(e=91),e in g){g[e]=!1;for(var s in C)C[s]===e&&(x[s]=!1)}}function qt(t){if(typeof t>"u")Object.keys(h).forEach(function(o){return delete h[o]});else if(Array.isArray(t))t.forEach(function(o){o.key&&se(o)});else if(typeof t=="object")t.key&&se(t);else if(typeof t=="string"){for(var e=arguments.length,n=new Array(e>1?e-1:0),s=1;s<e;s++)n[s-1]=arguments[s];var r=n[0],i=n[1];typeof r=="function"&&(i=r,r=""),se({key:t,scope:r,method:i,splitKey:"+"})}}var se=function(e){var n=e.key,s=e.scope,r=e.method,i=e.splitKey,o=i===void 0?"+":i,a=Fe(n);a.forEach(function(c){var u=c.split(o),p=u.length,m=u[p-1],w=m==="*"?"*":G(m);if(h[w]){s||(s=I());var j=p>1?Te(C,u):[];h[w]=h[w].filter(function(_){var E=r?_.method===r:!0;return!(E&&_.scope===s&&jt(_.mods,j))})}})};function Ce(t,e,n,s){if(e.element===s){var r;if(e.scope===n||e.scope==="all"){r=e.mods.length>0;for(var i in g)Object.prototype.hasOwnProperty.call(g,i)&&(!g[i]&&e.mods.indexOf(+i)>-1||g[i]&&e.mods.indexOf(+i)===-1)&&(r=!1);(e.mods.length===0&&!g[16]&&!g[18]&&!g[17]&&!g[91]||r||e.shortcut==="*")&&e.method(t,e)===!1&&(t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation&&t.stopPropagation(),t.cancelBubble&&(t.cancelBubble=!0))}}}function ke(t,e){var n=h["*"],s=t.keyCode||t.which||t.charCode;if(x.filter.call(this,t)){if((s===93||s===224)&&(s=91),d.indexOf(s)===-1&&s!==229&&d.push(s),["ctrlKey","altKey","shiftKey","metaKey"].forEach(function(_){var E=ce[_];t[_]&&d.indexOf(E)===-1?d.push(E):!t[_]&&d.indexOf(E)>-1?d.splice(d.indexOf(E),1):_==="metaKey"&&t[_]&&d.length===3&&(t.ctrlKey||t.shiftKey||t.altKey||(d=d.slice(d.indexOf(E))))}),s in g){g[s]=!0;for(var r in C)C[r]===s&&(x[r]=!0);if(!n)return}for(var i in g)Object.prototype.hasOwnProperty.call(g,i)&&(g[i]=t[ce[i]]);t.getModifierState&&!(t.altKey&&!t.ctrlKey)&&t.getModifierState("AltGraph")&&(d.indexOf(17)===-1&&d.push(17),d.indexOf(18)===-1&&d.push(18),g[17]=!0,g[18]=!0);var o=I();if(n)for(var a=0;a<n.length;a++)n[a].scope===o&&(t.type==="keydown"&&n[a].keydown||t.type==="keyup"&&n[a].keyup)&&Ce(t,n[a],o,e);if(s in h){for(var c=0;c<h[s].length;c++)if((t.type==="keydown"&&h[s][c].keydown||t.type==="keyup"&&h[s][c].keyup)&&h[s][c].key){for(var u=h[s][c],p=u.splitKey,m=u.key.split(p),w=[],j=0;j<m.length;j++)w.push(G(m[j]));w.sort().join("")===d.sort().join("")&&Ce(t,u,o,e)}}}}function zt(t){return Se.indexOf(t)>-1}function x(t,e,n){d=[];var s=Fe(t),r=[],i="all",o=document,a=0,c=!1,u=!0,p="+",m=!1;for(n===void 0&&typeof e=="function"&&(n=e),Object.prototype.toString.call(e)==="[object Object]"&&(e.scope&&(i=e.scope),e.element&&(o=e.element),e.keyup&&(c=e.keyup),e.keydown!==void 0&&(u=e.keydown),e.capture!==void 0&&(m=e.capture),typeof e.splitKey=="string"&&(p=e.splitKey)),typeof e=="string"&&(i=e);a<s.length;a++)t=s[a].split(p),r=[],t.length>1&&(r=Te(C,t)),t=t[t.length-1],t=t==="*"?"*":G(t),t in h||(h[t]=[]),h[t].push({keyup:c,keydown:u,scope:i,mods:r,shortcut:s[a],method:n,key:s[a],splitKey:p,element:o});typeof o<"u"&&!zt(o)&&window&&(Se.push(o),ne(o,"keydown",function(w){ke(w,o)},m),ye||(ye=!0,ne(window,"focus",function(){d=[]},m)),ne(o,"keyup",function(w){ke(w,o),Zt(w)},m))}function Yt(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"all";Object.keys(h).forEach(function(n){var s=h[n].filter(function(r){return r.scope===e&&r.shortcut===t});s.forEach(function(r){r&&r.method&&r.method()})})}var re={getPressedKeyString:$t,setScope:je,getScope:I,deleteScope:Ut,getPressedKeyCodes:It,isPressed:Wt,filter:Vt,trigger:Yt,unbind:qt,keyMap:H,modifier:C,modifierMap:ce};for(var ie in re)Object.prototype.hasOwnProperty.call(re,ie)&&(x[ie]=re[ie]);if(typeof window<"u"){var Gt=window.hotkeys;x.noConflict=function(t){return t&&window.hotkeys===x&&(window.hotkeys=Gt),x},window.hotkeys=x}[{key:"space",description:"Jouer ou stopper l’animation",callback:y.toggle},{key:"left",description:"Reculer d’une image",callback:()=>{y.stop(),l.raf.frameCount.update(t=>Math.max(0,t-1))}},{key:"shift+left",description:"Reculer de 10 images",callback:()=>{y.stop(),l.raf.frameCount.update(t=>Math.max(0,t-10))}},{key:"right",description:"Avancer d’une image",callback:()=>{y.stop(),l.raf.frameCount.update(t=>Math.min(t+1,l.raf.maxDuration.get()))}},{key:"shift+right",description:"Avancer de 10 images",callback:()=>{y.stop(),l.raf.frameCount.update(t=>Math.min(t+10,l.raf.maxDuration.get()))}},{key:"cmd+z",description:"Effacer le dernier dessin",callback:q.undo},{key:"cmd+r",description:"Tout effacer",callback:q.clear},{key:"w",description:"Afficher/masquer les dessins à venir",callback:()=>l.wireframe.update(t=>!t)}].map(Jt);function Jt(t){return t.callback&&!t.disabled&&x(t.key,e=>{t.filter&&t.filter(e)||(e.preventDefault(),e.stopPropagation(),t.callback(e))}),t}console.log("0.0.0-staging");_e(f(St,null));
