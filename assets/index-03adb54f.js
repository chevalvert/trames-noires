(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();function u(t,e){const n={};return n.vnode=!0,n.type=t,n.props=e||{},n.children=[].concat.apply([],[].slice.call(arguments,2)),n.isInstance=t&&t.template&&typeof t.template=="function",n.isComponent=typeof t=="function"&&t.prototype&&typeof t.prototype.render=="function",n.isStateless=typeof t=="function"&&!n.isComponent,n.isDom=typeof t=="string",n}u.f=t=>t.children;function nt(t,e){for(const n in e)t[n]=e[n];return t}function H(){}function ln(t,e,n,s){if(s)return{log:H,warn:H,error:H};const r=[];t=t.toUpperCase(),r.push(`%c ${t} `);let i="font-weight:bold;";return e&&(i+=`color:${e};`),n&&(i+=`background-color:${n}`),r.push(i),{log:console.log.bind(console,...r),warn:console.warn.bind(console,...r),error:console.error.bind(console,...r)}}const Dt=["nodes","components","refs","domEvents","storeEvents"];class de{constructor(){this.data={};for(let e=0;e<Dt.length;e++)this.data[Dt[e]]=[]}append(e){for(const n in e)this.data[n]=this.data[n].concat(e[n])}set(e){for(const n in e)this.data[n]=e[n]}get(){return this.data}}const je=["xlink","xmlns","xml"],cn=new Set(["placeholder","autoplay","muted","for","webkit-playsinline","playsinline","selected"]);let qe;const le=(t,e)=>t.substr(0,e.length)===e,un=t=>(e,n)=>n.classList.toggle(t,e||!1),Ge=(t="textContent",e)=>(n,s)=>{e&&t!==(t=t.replace(/^xlink:?/,""))?s.setAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase(),n):(qe=n??"",e||(s[t]=qe),(e||cn.has(t)||le(t,"data-"))&&s.setAttribute(t,qe))};function fn(t,e,n,s,r){if(n!==void 0&&!(e==="__self"||e==="__source")){e==="className"&&(e="class");for(let i=0;i<je.length;i++)if(le(e,je[i])){const o=je[i].length;e[o]&&e[o]!==":"&&(e=je[i]+":"+e[o].toLowerCase()+e.substr(o+1,e.length));break}if(e!=="ref"){if(le(e,"event-")){const i=e.toLowerCase().substring(6);s.append({domEvents:[{el:t,evt:i,fn:n}]})}else if(e==="store"){const i=Array.isArray(n)?n:[n],o=[];for(let a=0,f=i.length;a<f;a++){const d=Array.isArray(i[a])?i[a]:[i[a]],v=d[0],M=d[1],C=d[2]!==void 0?d[2]:!0;v&&o.push({store:v,fn:M,init:C,el:t})}s.append({storeEvents:o})}else if(le(e,"store-class-")){const i=e.substring(12),o=un(i);s.append({storeEvents:[{store:n,init:!0,fn:o,el:t}]})}else if(le(e,"store-")){let i=e.substring(6);i==="text"&&(i="textContent");const o=Ge(i,r);s.append({storeEvents:[{store:n,init:!0,fn:o,el:t}]})}else if(!(typeof n=="function"&&le(e,"on")))if(e==="class"&&!r)t.className=n||"";else if(e==="style")typeof n=="object"?nt(t.style,n):typeof n=="string"&&(t.style.cssText=n);else if(e!=="list"&&e!=="type"&&!r&&e in t)try{Ge(e,r)(n,t)}catch{}else typeof n!="object"&&typeof n!="function"&&Ge(e,r)(n,t)}}}function hn(t){return Array.isArray(t)?t:[t]}function _e(t,e){if(Array.isArray(t))return dn(t,e);if(t instanceof window.Element)return vn(t);if(t===null||typeof t!="object"||!t.vnode)return pn(t);const n=nt(nt({},t.props),{children:[].concat.apply([],t.children||[])});if(t.isDom)return gn(t,n,e);if(t.isInstance)return Ot(t,n,e,!0);if(t.isStateless)return mn(t,n,e);if(t.isComponent)return Ot(t,n,e)}function dn(t,e){t=hn(t);const n=new de;for(let s=0;s<t.length;s++)n.append(_e(t[s],e));return n.get()}function pn(t){const e=new de;return t==null||t===!1||e.append({nodes:document.createTextNode(t+"")}),e.get()}function gn(t,e,n){const s=new de;let r=[];t.type==="svg"&&(n=!0);for(let o=0;o<e.children.length;o++){const a=_e(e.children[o],n);a.nodes&&(r=r.concat(a.nodes),s.append({components:a.components,refs:a.refs,domEvents:a.domEvents,storeEvents:a.storeEvents}))}const i=n?document.createElementNS("http://www.w3.org/2000/svg",t.type):document.createElement(t.type);for(const o in t.props)fn(i,o,t.props[o],s,n);for(let o=0;o<r.length;o++)i.appendChild(r[o]);return e.ref&&s.append({refs:{ref:i,fn:e.ref}}),s.append({nodes:i}),s.get()}function vn(t){const e=new de;return e.append({nodes:t}),e.get()}function mn(t,e,n){const s=new de,r=t.type(e);return s.append(_e(r,n)),s.get()}function Ot(t,e,n,s=!1){const r=new de,i=s?t.type:new t.type(e);s&&(e=i.props),i.beforeRender(e);const o=i.template(e,i.state||{});e.ref&&r.append({refs:{ref:i,fn:e.ref}}),r.append(_e(o,n));const a=r.data.nodes;i.base=a.length>1?a:a[0];for(const f in r.data)f!=="nodes"&&(i._collector[f]||(i._collector[f]=[]),i._collector[f]=i._collector[f].concat(r.data[f]));r.set({components:[i],refs:[],domEvents:[],storeEvents:[]});for(let f=0;f<i._collector.components.length;f++)i._collector.components[f]._parent=i;return r.get()}function ce(t,e,n){const s=t._collector&&t._collector.components;if(n&&e(t),s)for(let r=0;r<s.length;r++)ce(s[r],e);n||e(t)}function wn(t){for(let e=0;e<t._collector.refs.length;e++)t._collector.refs[e].fn(t._collector.refs[e].ref),t._collector.refs[e].ref=null}function bn(t){for(let e=0;e<t._collector.storeEvents.length;e++){const n=t._collector.storeEvents[e],s=n.fn;n.fn=function(r){s(r,n.el)},n.store.subscribe(n.fn),n.init&&n.fn(n.store.current)}}function yn(t){t.test&&console.log("call dom listeners",t._collector.domEvents);for(let e=0;e<t._collector.domEvents.length;e++){const n=t._collector.domEvents[e];n.el.addEventListener(n.evt,n.fn)}}function Cn(t){ce(t,wn)}function kn(t){ce(t,yn),ce(t,bn)}const Mn=new Set(["g","svg","defs"]);function V(t,e=document.body,n){let s=0;const r=_e(t,Mn.has(e.tagName));let i={_collector:r};if(Cn(i),ce(i,function(o){o.afterRender&&o.afterRender(o.props)}),typeof e=="function"){const o=r.nodes.length<2?r.nodes[0]:r.nodes;e(o)}else if(e)for(s=0;s<r.nodes.length;s++)e.appendChild(r.nodes[s]);if((!n||n.mounted)&&(kn(i),ce(i,function(o){o.mounted=!0,o.afterMount&&o.afterMount(o.props)})),n&&n._collector){const o=n._collector;for(s=0;s<r.components.length;s++)r.components[s]._parent=n;o.refs&&(o.refs=o.refs.concat(r.refs)),o.components&&(o.components=o.components.concat(r.components)),o.domEvents&&(o.domEvents=o.domEvents.concat(r.domEvents)),o.storeEvents&&(o.storeEvents=o.storeEvents.concat(r.storeEvents))}return i=void 0,r}class R{constructor(e={}){this._parent=null,this._collector={refs:[],components:[],domEvents:[],storeEvents:[]},this._storeListeners=[],this.refs={},this.state={},this.store={},this.props=e||{},this.base=null,this.mounted=!1,this.destroyed=!1;const n=e.name||this.constructor.name||"Component",{log:s,warn:r,error:i}=ln(n,"white","#000",e.disableLog);this.log=s,this.warn=r,this.error=i}storeSubscribe(e,n,s,r=!0){e.subscribe(n,s),this._storeListeners.push([e,n,s]),r&&n.call(s,e.current)}template(){}beforeRender(){}afterRender(){}afterMount(){}beforeDestroy(){}ref(e){const n=this;return function(r){n.refs[e]=r}}refArray(e,n=!1){const s=this.refs[e]||(this.refs[e]=[]);let r=s.length,i,o;return n&&(i=this.refs.__pools||(this.refs.__pools={}),o=i[e]||(i[e]=[]),o.length&&(r=o.pop())),s[r]=null,function(f){s[r]=f,n&&o.push(r)}}refMap(e,n){const s=this.refs[n]||(this.refs[n]=new Map);return function(i){i?s.set(e,i):s.delete(e)}}render(e,n){return V(e,n,this)}destroy(){let e=0;for(this.beforeDestroy(this.props),e=this._collector.domEvents.length-1;e>=0;e--){const s=this._collector.domEvents[e];s.el.removeEventListener(s.evt,s.fn)}for(e=this._collector.storeEvents.length-1;e>=0;e--){const s=this._collector.storeEvents[e];s.store.unsubscribe(s.fn)}for(e=this._storeListeners.length-1;e>=0;e--){const s=this._storeListeners[e];s[0].unsubscribe(s[1],s[2])}for(e=this._collector.components.length-1;e>=0;e--)this._collector.components[e].destroy();if(this.mounted=!1,this.destroyed=!0,this._parent){const s=this._parent._collector.components.indexOf(this);~s&&this._parent._collector.components.splice(s,1),this._parent=null}for(e=this._collector.refs.length-1;e>=0;e--)this._collector.refs[e].fn(null),this._collector.refs.splice(e,1);let n=Array.isArray(this.base)?this.base:[this.base];for(e=0;e<n.length;e++)n[e]&&n[e].parentNode&&n[e].parentNode.removeChild(n[e]);this.base=n=null,this.props=null,this.state=null,this.store=null,this.refs=null,this._storeListeners=null}}function Pt(t,e,n,s){this.fn=e,this.ctx=n||null,this.owner=t,this.once=!!s}function Je(t,e){e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),e.ctx=e.fn=e.owner=null,e===t._first&&(t._first=e.next),e===t._last&&(t._last=e.prev)}class xn{constructor(){this._first=this._last=null}dispatch(e,n,s,r,i){let o=this._first;for(;o;)o.fn.call(o.ctx,e,n,s,r,i),o.once&&this.unsubscribe(o),o=o.next}trigger(){this.dispatch(this.current)}subscribe(e,n,s){const r=new Pt(this,e,n,s);return this._first?(this._last.next=r,r.prev=this._last,this._last=r):(this._first=r,this._last=r),r}subscribeOnce(e,n){return this.subscribe(e,n,!0)}unsubscribe(e,n){if(e instanceof Pt)return Je(this,e);n||(n=null);let s=this._first;for(;s;)s.fn===e&&s.ctx===n&&Je(this,s),s=s.next}unsubscribeAll(){let e=this._first;for(this._first=this._last=null;e;)Je(this,e),e=e.next}}class Kt extends xn{constructor(e){super(),this.current=e}set(){throw new Error("Cannot set a different value for a Readable Signal. Use Writable instead")}get(){return this.current}}function x(t){return new Kt(t)}class $t extends Kt{set(e,n){if(!n&&this.current===e)return;this.previous=this.current,this.current=e;let s=this._first;for(;s;)s.fn.call(s.ctx,this.current,this.previous),s.once&&this.unsubscribe(s),s=s.next}update(e,n){const s=e(this.current);this.set(s!==void 0?s:this.current,n)}}function m(t){return new $t(t)}function se(t,e){const n=new $t,s=n.set.bind(n);delete n.set;const r=Array.isArray(t);let i=r?new Array(t.length):null;if(r)for(let a=0,f=t.length;a<f;a++)i[a]=t[a].current,t[a].subscribe(function(d){i[a]=d,o()});else i=t.current,t.subscribe(function(a){i=a,o()});o();function o(){const a=e(i);a&&a.then?a.then(s):s(a)}return n}const _n="trames-noires@1.4.2/";function jt(t,e,{encode:n=JSON.stringify,decode:s=JSON.parse,silent:r=!1}={}){const i=m(e),o=_n+t,a=localStorage.getItem(o);if(a!==null)try{r?i.current=s(a):i.set(s(a))}catch(f){console.warn(`Error while trying to decode ${t} in local storage`),console.error(f)}else localStorage.setItem(o,n(i.current));return i.subscribe(f=>localStorage.setItem(o,n(f))),i}const st=t=>se(t,e=>!e);var Ht={};(function(t){var e=Object.defineProperty,n=c=>e(c,"__esModule",{value:!0}),s=(c,h)=>{n(c);for(var b in h)e(c,b,{get:h[b],enumerable:!0})};s(t,{default:()=>sn,getStroke:()=>xt,getStrokeOutlinePoints:()=>kt,getStrokePoints:()=>Mt});function r(c,h,b,U=I=>I){return c*U(.5-h*(.5-b))}function i(c){return[-c[0],-c[1]]}function o(c,h){return[c[0]+h[0],c[1]+h[1]]}function a(c,h){return[c[0]-h[0],c[1]-h[1]]}function f(c,h){return[c[0]*h,c[1]*h]}function d(c,h){return[c[0]/h,c[1]/h]}function v(c){return[c[1],-c[0]]}function M(c,h){return c[0]*h[0]+c[1]*h[1]}function C(c,h){return c[0]===h[0]&&c[1]===h[1]}function F(c){return Math.hypot(c[0],c[1])}function P(c){return c[0]*c[0]+c[1]*c[1]}function E(c,h){return P(a(c,h))}function bt(c){return d(c,F(c))}function tn(c,h){return Math.hypot(c[1]-h[1],c[0]-h[0])}function pe(c,h,b){let U=Math.sin(b),I=Math.cos(b),Y=c[0]-h[0],X=c[1]-h[1],g=Y*I-X*U,T=Y*U+X*I;return[g+h[0],T+h[1]]}function Ne(c,h,b){return o(c,f(a(h,c),b))}function yt(c,h,b){return o(c,f(h,b))}var{min:ie,PI:nn}=Math,Ct=.275,ge=nn+1e-4;function kt(c,h={}){let{size:b=16,smoothing:U=.5,thinning:I=.5,simulatePressure:Y=!0,easing:X=p=>p,start:g={},end:T={},last:Ae=!1}=h,{cap:ve=!0,easing:W=p=>p*(2-p)}=g,{cap:Ee=!0,easing:j=p=>--p*p*p+1}=T;if(c.length===0||b<=0)return[];let D=c[c.length-1].runningLength,N=g.taper===!1?0:g.taper===!0?Math.max(b,D):g.taper,me=T.taper===!1?0:T.taper===!0?Math.max(b,D):T.taper,_t=Math.pow(b*U,2),we=[],oe=[],Ke=c.slice(0,10).reduce((p,L)=>{let y=L.pressure;if(Y){let k=ie(1,L.distance/b),We=ie(1,1-k);y=ie(1,p+(We-p)*(k*Ct))}return(p+y)/2},c[0].pressure),S=r(b,I,c[c.length-1].pressure,X),$e,He=c[0].vector,be=c[0].point,De=be,Q=be,ee=De,Ve=!1;for(let p=0;p<c.length;p++){let{pressure:L}=c[p],{point:y,vector:k,distance:We,runningLength:ye}=c[p];if(p<c.length-1&&D-ye<3)continue;if(I){if(Y){let q=ie(1,We/b),Ze=ie(1,1-q);L=ie(1,Ke+(Ze-Ke)*(q*Ct))}S=r(b,I,L,X)}else S=b/2;$e===void 0&&($e=S);let rn=ye<N?W(ye/N):1,on=D-ye<me?j((D-ye)/me):1;S=Math.max(.01,S*Math.min(rn,on));let Lt=(p<c.length-1?c[p+1]:c[p]).vector,ze=p<c.length-1?M(k,Lt):1,an=M(k,He)<0&&!Ve,At=ze!==null&&ze<0;if(an||At){let q=f(v(He),S);for(let Ze=1/13,Pe=0;Pe<=1;Pe+=Ze)Q=pe(a(y,q),y,ge*Pe),we.push(Q),ee=pe(o(y,q),y,ge*-Pe),oe.push(ee);be=Q,De=ee,At&&(Ve=!0);continue}if(Ve=!1,p===c.length-1){let q=f(v(k),S);we.push(a(y,q)),oe.push(o(y,q));continue}let Et=f(v(Ne(Lt,k,ze)),S);Q=a(y,Et),(p<=1||E(be,Q)>_t)&&(we.push(Q),be=Q),ee=o(y,Et),(p<=1||E(De,ee)>_t)&&(oe.push(ee),De=ee),Ke=L,He=k}let z=c[0].point.slice(0,2),Z=c.length>1?c[c.length-1].point.slice(0,2):o(c[0].point,[1,1]),Ue=[],Oe=[];if(c.length===1){if(!(N||me)||Ae){let p=yt(z,bt(v(a(z,Z))),-($e||S)),L=[];for(let y=1/13,k=y;k<=1;k+=y)L.push(pe(p,z,ge*2*k));return L}}else{if(!(N||me&&c.length===1))if(ve)for(let L=1/13,y=L;y<=1;y+=L){let k=pe(oe[0],z,ge*y);Ue.push(k)}else{let L=a(we[0],oe[0]),y=f(L,.5),k=f(L,.51);Ue.push(a(z,y),a(z,k),o(z,k),o(z,y))}let p=v(i(c[c.length-1].vector));if(me||N&&c.length===1)Oe.push(Z);else if(Ee){let L=yt(Z,p,S);for(let y=1/29,k=y;k<1;k+=y)Oe.push(pe(L,Z,ge*3*k))}else Oe.push(o(Z,f(p,S)),o(Z,f(p,S*.99)),a(Z,f(p,S*.99)),a(Z,f(p,S)))}return we.concat(Oe,oe.reverse(),Ue)}function Mt(c,h={}){var b;let{streamline:U=.5,size:I=16,last:Y=!1}=h;if(c.length===0)return[];let X=.15+(1-U)*.85,g=Array.isArray(c[0])?c:c.map(({x:j,y:D,pressure:N=.5})=>[j,D,N]);if(g.length===2){let j=g[1];g=g.slice(0,-1);for(let D=1;D<5;D++)g.push(Ne(g[0],j,D/4))}g.length===1&&(g=[...g,[...o(g[0],[1,1]),...g[0].slice(2)]]);let T=[{point:[g[0][0],g[0][1]],pressure:g[0][2]>=0?g[0][2]:.25,vector:[1,1],distance:0,runningLength:0}],Ae=!1,ve=0,W=T[0],Ee=g.length-1;for(let j=1;j<g.length;j++){let D=Y&&j===Ee?g[j].slice(0,2):Ne(W.point,g[j],X);if(C(W.point,D))continue;let N=tn(D,W.point);if(ve+=N,j<Ee&&!Ae){if(ve<I)continue;Ae=!0}W={point:D,pressure:g[j][2]>=0?g[j][2]:.5,vector:bt(a(W.point,D)),distance:N,runningLength:ve},T.push(W)}return T[0].vector=((b=T[1])==null?void 0:b.vector)||[0,0],T}function xt(c,h={}){return kt(Mt(c,h),h)}var sn=xt})(Ht);var Ln=function(e,n){return e[0]=n[0],e[1]=n[1],e},St=Ln,An=function(t,e){Array.isArray(e)||(e=[]),t.length>0&&e.push(St([0,0],t[0]));for(var n=0;n<t.length-1;n++){var s=t[n],r=t[n+1],i=s[0],o=s[1],a=r[0],f=r[1],d=[.75*i+.25*a,.75*o+.25*f],v=[.25*i+.75*a,.25*o+.75*f];e.push(d),e.push(v)}return t.length>1&&e.push(St([0,0],t[t.length-1])),e};const En=Ht,Dn=An,On=3;function Rt(t,{isStroke:e=!1}={}){return t.length<=1?"":e?t.reduce((n,[s,r],i,o)=>{if(i===o.length-1)return n;const[a,f]=o[i+1];return n.concat(` ${s},${r} ${(s+a)/2},${(r+f)/2}`)},["M ",`${t[0][0]},${t[0][1]}`," Q"]).concat("Z").join(""):["M",t[0],"L",t.slice(1)].join(" ")}let Pn=Date.now();class Re{constructor({offset:e=[0,0],points:n=[],drawMode:s="raw",fillMode:r="AA→AB",firstFrame:i=0,style:o={},id:a=++Pn,ref:f}={}){this.offset=e,this.points=n,this.drawMode=s,this.fillMode=r,this.firstFrame=i,this.style=o,this.id=a,this.ref=f}static build(e,n,s){if(e.ref&&s){const r=s.find(i=>i.id===e.ref);e.points=r.points}return new Re(e)}clone(e){const n=new Re(e);return n.ref=this.ref||this.id,n.points=this.points.slice(0),n}get isEmpty(){return!this.points||!this.points.length}get pathData(){return this._pathData||(this._pathData=Rt(this.points.map(([e,n])=>[e+this.offset[0],n+this.offset[1]]))),this._pathData}push(e){this.points.push(e)}render(e,{frame:n=Number.POSITIVE_INFINITY,drawMode:s=this.drawMode,fillMode:r=this.fillMode,style:i=this.style}={}){if(this.isEmpty||n<this.firstFrame&&r!=="AB")return;e.save();for(const[f,d]of Object.entries(i))f==="lineDash"&&e.setLineDash(d),e[f]=d;const o=[];switch(r){case"AB":o[0]=0,o[1]=this.points.length;break;case"AA→AB":o[0]=0,o[1]=n-this.firstFrame;break;case"AA→BB":o[0]=Math.max(0,n-this.firstFrame-On),o[1]=n-this.firstFrame;break;case"AA→AB→BB":o[0]=Math.max(0,n-this.firstFrame-this.points.length/2),o[1]=n-this.firstFrame;break}const a=(()=>{const f=this.points.slice(o[0],o[1]);return!f||!f.length?[]:s==="smooth"?Dn(f):s==="freehand"?En.getStroke(f,{...i.perfectFreehand,simulatePressure:f[0][2]===void 0,last:f.length===this.points.length}):f})();if(s==="freehand"&&a.length>1)e.fillStyle=e.strokeStyle,e.fill(new Path2D(Rt(a,{isStroke:!0})));else{e.beginPath();for(let f=0;f<a.length;f++){const d=a[f];d&&e[f?"lineTo":"moveTo"](d[0]+this.offset[0],d[1]+this.offset[1])}e.stroke()}e.restore()}toJSON(){return{id:this.id,ref:this.ref,offset:this.offset,points:this.ref?null:this.points,drawMode:this.drawMode,fillMode:this.fillMode,firstFrame:this.firstFrame,style:this.style}}}var ft=Re;const jn=`<svg width="24" height="24" viewBox="0 0 24 24" stroke-width="1.5" fill="none" xmlns="http://www.w3.org/2000/svg">
<g clip-path="url(#clip0_2585_14438)">
<path d="M17.6744 11.4075L15.7691 17.1233C15.7072 17.309 15.5586 17.4529 15.3709 17.5087L3.69348 20.9803C3.22819 21.1186 2.79978 20.676 2.95328 20.2155L6.74467 8.84131C6.79981 8.67588 6.92419 8.54263 7.08543 8.47624L12.472 6.25822C12.696 6.166 12.9535 6.21749 13.1248 6.38876L17.5294 10.7935C17.6901 10.9542 17.7463 11.1919 17.6744 11.4075Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M3.2959 20.6016L9.65986 14.2376" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M17.7917 11.0557L20.6202 8.22724C21.4012 7.44619 21.4012 6.17986 20.6202 5.39881L18.4989 3.27749C17.7178 2.49645 16.4515 2.49645 15.6704 3.27749L12.842 6.10592" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M11.7814 12.1163C11.1956 11.5305 10.2458 11.5305 9.66004 12.1163C9.07426 12.7021 9.07426 13.6519 9.66004 14.2376C10.2458 14.8234 11.1956 14.8234 11.7814 14.2376C12.3671 13.6519 12.3671 12.7021 11.7814 12.1163Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
</g>
<defs>
<clipPath id="clip0_2585_14438">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>
</svg>
`,Sn=`<svg width="24" height="24" stroke-width="1.5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M9 2L15 2" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M5 7L19 21.5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M12 10L12 14" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M6.1905 8.5C4.83275 9.93366 4 11.8696 4 14C4 18.4183 7.58172 22 12 22C14.0049 22 15.8375 21.2625 17.2413 20.044M19.4185 17C19.7935 16.0736 20 15.0609 20 14C20 9.58172 16.4183 6 12 6C11.0187 6 10.0786 6.17669 9.20988 6.5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
`,Rn=`<svg width="24" height="24" viewBox="0 0 24 24" stroke-width="1.5" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M19.5 16L17.0248 12.6038" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M12 17.5V14" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M4.5 16L6.96895 12.6124" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M3 8C6.6 16 17.4 16 21 8" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
`,Tn=`<svg width="24" height="24" stroke-width="1.5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M13.8476 13.317L9.50515 18.2798C8.70833 19.1905 7.29167 19.1905 6.49485 18.2798L2.15238 13.317C1.49259 12.563 1.49259 11.437 2.15238 10.683L6.49485 5.72018C7.29167 4.80952 8.70833 4.80952 9.50515 5.72017L13.8476 10.683C14.5074 11.437 14.5074 12.563 13.8476 13.317Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M13 19L17.8844 13.3016C18.5263 12.5526 18.5263 11.4474 17.8844 10.6984L13 5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M17 19L21.8844 13.3016C22.5263 12.5526 22.5263 11.4474 21.8844 10.6984L17 5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
`,rt=`<svg width="24" height="24" viewBox="0 0 24 24" stroke-width="1.5" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M14.3632 5.65156L15.8431 4.17157C16.6242 3.39052 17.8905 3.39052 18.6716 4.17157L20.0858 5.58579C20.8668 6.36683 20.8668 7.63316 20.0858 8.41421L18.6058 9.8942M14.3632 5.65156L4.74749 15.2672C4.41542 15.5993 4.21079 16.0376 4.16947 16.5054L3.92738 19.2459C3.87261 19.8659 4.39148 20.3848 5.0115 20.33L7.75191 20.0879C8.21972 20.0466 8.65806 19.8419 8.99013 19.5099L18.6058 9.8942M14.3632 5.65156L18.6058 9.8942" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
`,Bn=`<svg width="24" height="24" stroke-width="1.5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M3 3L21 21" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M10.5 10.6771C10.1888 11.0296 10 11.4928 10 12C10 13.1045 10.8954 14 12 14C12.5072 14 12.9703 13.8112 13.3229 13.5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M7.36185 7.5611C5.68002 8.73968 4.27894 10.4188 3 12C4.88856 14.991 8.2817 18 12 18C13.5499 18 15.0434 17.4772 16.3949 16.6508" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M12 6C16.0084 6 18.7015 9.1582 21 12C20.6815 12.5043 20.3203 13.0092 19.922 13.5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
`,Fn=`<svg width="24" height="24" stroke-width="1.5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M12 14C13.1046 14 14 13.1046 14 12C14 10.8954 13.1046 10 12 10C10.8954 10 10 10.8954 10 12C10 13.1046 10.8954 14 12 14Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M21 12C19.1114 14.991 15.7183 18 12 18C8.2817 18 4.88856 14.991 3 12C5.29855 9.15825 7.99163 6 12 6C16.0084 6 18.7015 9.1582 21 12Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
`,l={INPUT_MODES:x([{icon:rt,label:"Dessin",value:"draw"},{icon:Tn,label:"Tampon",value:"paste"}]),LINE_WIDTHS:x({medium:{lineWidth:10,perfectFreehand:{size:15,thinning:.65,smoothing:.77,streamline:.6}},large:{lineWidth:20,perfectFreehand:{size:30,thinning:.8,smoothing:.77,streamline:.6}},small:{lineWidth:5,perfectFreehand:{size:7.5,thinning:.5,smoothing:.01,streamline:.6}}}),COLORS:x([{value:"#FFF1E8"},{value:"#FF004D"},{value:"#FFA300"},{value:"#FFEC27"},{value:"#00E436"},{value:"#29ADFF"},{value:"#83769C"},{value:"#FF77A8"},{value:"#FFCCAA"}]),FILL_MODES:x([{value:"AA→AB"},{value:"AA→BB"},{value:"AA→AB→BB"},{value:"AB",icon:Sn}]),VIEW_MODES:x([{value:"wireframe",icon:Fn},{value:"preview",icon:Bn},{value:"no-ui",icon:Rn}]),DRAW_MODES:x([{value:"smooth",icon:rt},{value:"freehand",icon:jn}]),app:{proMode:x(new URLSearchParams(window.location.search).has("pro")),inputMode:m("draw"),fillMode:m("AA→AB"),viewMode:m("wireframe"),drawMode:m("smooth"),lines:jt("app.lines",[],{encode:t=>JSON.stringify(t.map(e=>e.toJSON())),decode:t=>JSON.parse(t||"[]").map(ft.build)}),style:m({lineWidth:10,strokeStyle:"white",lineJoin:"round",lineCap:"round"})},raf:{fps:x(60),maxDuration:jt("raf.maxDuration",60*5),isRunning:m(!1),frameCount:m(0)},api:{url:x("https://toools-gcr-service-tnoires-ew9-prd-htddyedwxa-od.a.run.app"),pollingInterval:x(1e3),pollingMaxAttempts:x(30),version:m(null)}};window.Store=l;function it(t,e,n){var s,r,i,o,a;e==null&&(e=100);function f(){var v=Date.now()-o;v<e&&v>=0?s=setTimeout(f,e-v):(s=null,n||(a=t.apply(i,r),i=r=null))}var d=function(){i=this,r=arguments,o=Date.now();var v=n&&!s;return s||(s=setTimeout(f,e)),v&&(a=t.apply(i,r),i=r=null),a};return d.clear=function(){s&&(clearTimeout(s),s=null)},d.flush=function(){s&&(a=t.apply(i,r),i=r=null,clearTimeout(s),s=null)},d}it.debounce=it;var In=it;class Vt extends R{beforeRender(e){this.handleResize=this.handleResize.bind(this),this.state={dpr:x(e.dpr||window.devicePixelRatio||1)}}template(){return u("canvas",{class:"canvas",ref:this.ref("canvas")})}afterMount(){this.context=this.refs.canvas.getContext("2d"),this.handleResize(),window.addEventListener("resize",In(this.handleResize,100))}clear(){this.context.clearRect(0,0,this.refs.canvas.width,this.refs.canvas.height)}handleResize(){const e=this.state.dpr.get(),{width:n,height:s}=this.refs.canvas.getBoundingClientRect();this.refs.canvas.width=n*e,this.refs.canvas.height=s*e,this.context.scale(e,e)}}function Nn(t,e){if(e===void 0)throw new Error("You must specify a callback");t===void 0&&(t=30);var n=1e3/t,s=0,r=0;return function(i){s-=i,r+=i,s<=0&&(e(r),r=0,s=n+s%n)}}var Be=typeof window>"u"?global:window,te=[],ue=[],fe=[],J=null,ne=null,Ce=!1,ht=!1,dt,G;function Te(t){t===void 0&&(t=0),ne===null&&(ne=t),G=t-ne,dt+=G,ne=t,J=Ce?null:Be.requestAnimationFrame(Te),Ce&&(Ce=!1);var e;if(ht){for(e=0;e<fe.length;e++)fe[e](G);for(e=0;e<te.length;e++)te[e](G);for(e=0;e<ue.length;e++)ue[e](G)}else for(e=0;e<te.length;e++)te[e](G)}function Fe(){ht=ue.length>0||fe.length>0}function pt(t,e,n){return!e||!t||~t.indexOf(e)?!1:(n=!!n,n?t.unshift(e):t.push(e),!0)}function gt(t,e){if(!e)return!1;var n=t.indexOf(e);return~n?(t.splice(n,1),t.length===0):!1}function Kn(t,e){pt(fe,t,e)&&Fe()}function $n(t,e){pt(ue,t,e)&&Fe()}function Hn(t,e){pt(te,t,e)&&Ut()}function Vn(t){gt(fe,t)&&Fe()}function Un(t,e){gt(ue,t)&&Fe()}function Wn(t){gt(te,t)&&vt()}function Ut(t){Ce=!1,!J&&(t=!!t,ne=null,t?Te():J=Be.requestAnimationFrame(Te))}function zn(){J||(Ce=!0,ne=null,J=Be.requestAnimationFrame(Te))}function vt(){J&&(Be.cancelAnimationFrame(J),J=null)}function Zn(){vt(),te.length=0,ue.length=0,fe.length=0,ht=!1,ne=null,dt=0,G=0}const Wt={add:Hn,addAfter:$n,addBefore:Kn,remove:Wn,removeAfter:Un,removeBefore:Vn,start:Ut,stop:vt,time:dt,dt:G,requestOnce:zn,dispose:Zn},qn=()=>{l.raf.frameCount.update(t=>++t%l.raf.maxDuration.get())},zt=Nn(l.raf.fps.current,qn);function Zt(){l.raf.isRunning.set(!0),Wt.add(zt)}function qt(){l.raf.isRunning.set(!1),Wt.remove(zt)}function Gn(){l.raf.isRunning.update(t=>!t),l.raf.isRunning.get()?Zt():qt()}const B={start:Zt,stop:qt,toggle:Gn},ot=(t,{round:e=!0}={})=>{const n=s=>e?Math.round(s):s;if(window.TouchEvent&&t instanceof TouchEvent){const s=t.targetTouches[0];return s?[n(s.clientX),n(s.clientY)]:[-1,-1]}return t.pointerType==="pen"?[n(t.clientX),n(t.clientY),t.pressure]:[n(t.clientX),n(t.clientY)]};let Jn=class extends R{beforeRender(e){this.update=this.update.bind(this),this.handleTick=this.handleTick.bind(this),this.handlePointerDown=this.handlePointerDown.bind(this),this.handlePointerMove=this.handlePointerMove.bind(this),this.handlePointerUp=this.handlePointerUp.bind(this),this.state={isDisabled:e["store-disabled"]||m(e.disabled),penDown:m(!1),penPosition:m([-1,-1]),line:m(null)}}template(e,n){return u("section",{class:"drawer","store-class-has-pen-down":n.penDown,"store-class-is-disabled":n.isDisabled,"event-pointerDown":this.handlePointerDown,"event-pointerMove":this.handlePointerMove,"event-pointerUp":this.handlePointerUp,style:"touch-action: none"},u(Vt,{ref:this.ref("canvas")}))}afterRender(){this.state.line.subscribe(this.update),l.raf.frameCount.subscribe(this.handleTick)}update(){this.refs.canvas.clear();const e=this.state.line.get();e&&e.render(this.refs.canvas.context,{frame:l.raf.frameCount.get(),fillMode:"AB"})}handlePointerDown(e){this.base.setPointerCapture(e.pointerId),this.state.penDown.set(!0),this.state.penPosition.set(ot(e));const n=new ft({firstFrame:l.raf.frameCount.get(),drawMode:l.app.drawMode.get(),fillMode:l.app.fillMode.get(),style:l.app.style.get()});this.state.line.set(n)}handlePointerMove(e){this.state.penDown.get()&&(l.app.fillMode.get()!=="AB"?B.start():(B.stop(),window.requestAnimationFrame(this.handleTick)),this.state.penPosition.set(ot(e)))}handleTick(){if(!this.state.penDown.get())return;const e=this.state.line.get();if(e){if(e.fillMode!=="AB"&&e.firstFrame+e.points.length>=l.raf.maxDuration.get()){this.handlePointerUp();return}this.state.line.update(n=>(n.push(this.state.penPosition.get()),n),!0)}}handlePointerUp(e){e&&this.base.releasePointerCapture(e.pointerId),this.state.penDown.set(!1);const n=this.state.line.get();this.state.line.set(null),!(!n||n.isEmpty)&&l.app.lines.update(s=>(s.push(n),s),!0)}};const Yn=t=>t[t.length-1];class Xn extends R{beforeRender(e){this.handleClick=this.handleClick.bind(this),this.state={isDisabled:e["store-disabled"]||m(e.disabled)}}template(e,n){return u("section",{class:"paster","store-class-is-disabled":n.isDisabled,"event-click":this.handleClick})}handleClick(e){const n=Yn(l.app.lines.get());if(!n)return;const[s,r]=ot(e),i=n.clone({offset:[-(n.points[0][0]-s),-(n.points[0][1]-r)],firstFrame:l.raf.frameCount.get(),style:Object.assign({},n.style,l.app.style.current),drawMode:l.app.drawMode.get(),fillMode:l.app.fillMode.get()});l.app.fillMode.get()!=="AB"&&B.start(),l.app.lines.update(o=>(o.push(i),o),!0)}}class Qn extends R{beforeRender(){this.updateGhost=this.updateGhost.bind(this),this.updateCanvas=this.updateCanvas.bind(this),this.state={ghostPathData:m("")}}template(e,n){return u("section",{class:"renderer"},u("svg",null,u("path",{class:"ghost","store-d":n.ghostPathData})),u(Vt,{ref:this.ref("canvas")}))}afterRender(){l.app.lines.subscribe(this.updateGhost),l.app.lines.subscribe(this.updateCanvas),l.app.viewMode.subscribe(this.updateCanvas),l.raf.frameCount.subscribe(this.updateCanvas)}afterMount(){this.updateGhost(),this.updateCanvas()}updateGhost(){const e=l.app.lines.get();if(!e||!e.length){this.state.ghostPathData.set("");return}for(const n of e)n.hasGhost||n.fillMode!=="AB"&&(n.points.length<=5||(this.state.ghostPathData.current+=n.pathData+" ",n.hasGhost=!0));this.state.ghostPathData.trigger()}updateCanvas(){this.refs.canvas.clear();const e=l.raf.frameCount.get(),{context:n}=this.refs.canvas;for(const s of l.app.lines.get())s.render(n,{frame:e,smoothed:!0})}}var re={},es={get exports(){return re},set exports(t){re=t}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(t){(function(){var e={}.hasOwnProperty;function n(){for(var s=[],r=0;r<arguments.length;r++){var i=arguments[r];if(i){var o=typeof i;if(o==="string"||o==="number")s.push(i);else if(Array.isArray(i)){if(i.length){var a=n.apply(null,i);a&&s.push(a)}}else if(o==="object"){if(i.toString!==Object.prototype.toString&&!i.toString.toString().includes("[native code]")){s.push(i.toString());continue}for(var f in i)e.call(i,f)&&i[f]&&s.push(f)}}}return s.join(" ")}t.exports?(n.default=n,t.exports=n):window.classNames=n})()})(es);class O extends R{beforeRender(e){this.animate=this.animate.bind(this),this.handleClick=this.handleClick.bind(this),this.state={label:e["store-label"]||x(e.label),isWaiting:e["store-is-waiting"]||m(!1),isDisabled:e["store-disabled"]||m(e.disabled),isHidden:e["store-hidden"]||m(e.hidden)}}template(e,n){return u("button",{class:re("button",e.class),"store-class-is-waiting":n.isWaiting,"store-disabled":n.isDisabled,"store-hidden":n.isHidden,"event-click":this.handleClick,"event-mouseenter":e["event-mouseenter"]||H,"event-mouseleave":e["event-mouseleave"]||H,title:e.title,style:e.style,type:e.type},e.icon&&u("div",{class:"button__icon",ref:this.ref("icon"),innerHTML:e.icon}),u("div",{class:"button__text","store-innerHTML":n.label}))}afterRender(){this.state.isHidden.subscribe(this.animate)}animate(){this&&this.refs&&this.refs.icon&&(this.refs.icon.style.animation="none",this.refs.icon.offsetHeight,this.refs.icon.style.animation=null)}async handleClick(e){if(this.state.isWaiting.get())return e.preventDefault();this.animate(),this.state.isWaiting.set(!0),await(this.props["event-click"]||H)(e),this.mounted&&this.state.isWaiting.set(!1)}}class at extends R{beforeRender(e){this.update=this.update.bind(this),this.handleChange=this.handleChange.bind(this),this.state={label:e["store-label"]||x(e.label),value:e["store-value"]||m(e.value),autofocus:e["store-autofocus"]||x(e.autofocus),placeholder:e["store-placeholder"]||x(e.placeholder),min:e["store-min"]||x(e.min),max:e["store-max"]||x(e.max),step:e["store-step"]||x(e.step),isWaiting:e["store-is-waiting"]||m(!1),isDisabled:e["store-disabled"]||m(e.disabled),isHidden:e["store-hidden"]||m(e.hidden)}}template(e,n){return u("div",{class:re("input",e.class),"store-disabled":n.isDisabled,"store-hidden":n.isHidden,style:e.style,"event-click":s=>{this.refs.input.select(),this.refs.input.focus()}},e.label&&u("label",{innerHTML:e.label}),u("input",{ref:this.ref("input"),"event-input":this.update,"event-change":this.handleChange,type:e.type,size:e.size,"store-value":n.value,"store-autofocus":n.autofocus,"store-placeholder":n.placeholder,"store-min":n.min,"store-max":n.max,"store-step":n.step}),e.after&&u("div",{class:"input__before",innerHTML:e.after}))}afterMount(){this.state.value.subscribe(this.update),this.update()}update(){if(this.props.size==="auto"){const e=(String(this.refs.input.value)||"").length||(this.props.placeholder||"").length||1;this.refs.input.style.width=e+"ch"}}handleChange(){this.props.min!==void 0&&this.refs.input.value<this.props.min&&(this.refs.input.value=this.props.min),this.props.max!==void 0&&this.refs.input.value>this.props.max&&(this.refs.input.value=this.props.max),this.state.value.set(this.refs.input.type==="number"?+this.refs.input.value:this.refs.input.value)}}let ts=t=>crypto.getRandomValues(new Uint8Array(t)),ns=(t,e,n)=>{let s=(2<<Math.log(t.length-1)/Math.LN2)-1,r=-~(1.6*s*e/t.length);return(i=e)=>{let o="";for(;;){let a=n(r),f=r;for(;f--;)if(o+=t[a[f]&s]||"",o.length===i)return o}}},ss=(t,e=21)=>ns(t,e,ts);const lt=t=>l.api.url.get()+"/api/"+t,rs={timer:null,attempts:0,start:function(){if(this.stop(),!(!l.api||!l.api.url.get())){if(this.attempts>=l.api.pollingMaxAttempts.get()){console.warn("api max polling attempts reached"),l.api=null,console.error("Impossible de contacter l’API: l’export PDF ne sera pas disponible.");return}this.timer=setTimeout(async()=>{this.attempts++;try{const e=await(await fetch(lt("version"),{method:"GET"})).json();if(!e||!e.version)throw new Error("Ping malformed");l.api.version.set(e.version)}catch{this.start()}},l.api.pollingInterval.get())}},stop:function(){clearTimeout(this.timer)}},mt={polling:rs,import:async t=>{const e=await fetch(lt("json/"+t));if(!e.ok&&e.status!==500)throw e;const n=e.json();if(n.error)throw new Error(n.error);return n},export:async(t,e)=>{const n=await fetch(lt(e?"json?uid="+e:"json"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok&&n.status!==500)throw n;const s=n.json();if(s.error)throw new Error(s.error);return s}};const wt=`<svg width="24" height="24" stroke-width="1.5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M6.75827 17.2426L12.0009 12M17.2435 6.75736L12.0009 12M12.0009 12L6.75827 6.75736M12.0009 12L17.2435 17.2426" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
`;let Le=class extends R{beforeRender(){this.destroy=this.destroy.bind(this)}template(e){return u("div",{class:"modal__wrapper",...e.bigText&&{"event-click":this.destroy}},u("section",{class:re("modal",e.class,{"big-text":e.bigText})},u("header",{class:"modal__header"},u("h2",{class:"modal__title"},e.title),u(O,{icon:wt,"event-click":this.destroy})),u("div",{class:"modal__content"},e.children)))}beforeDstroy(){this.destroyed||(this.props["event-close"]||H)()}};const Gt=`<svg width="24" height="24" stroke-width="1.5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M5 13L9 17L19 7" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
`;function is(t,e){V(u(Le,{...e,bigText:!0},e.url?u("a",{href:e.url},t):t))}function os(t,e){V(u(Le,{...e},t))}async function as(t,{title:e="Valeur demandée",yes:n="Valider",no:s="Annuler",type:r="text",value:i=void 0,icon:o=null,before:a=null,after:f=null,placeholder:d=null,onCancel:v=()=>null}={}){return new Promise(M=>{const C={},F=async()=>{M(C.input.state.value.get()),C.modal.destroy()},P=()=>{M(),C.modal.destroy()};V(u(Le,{ref:E=>{C.modal=E},"event-close":P},u("form",{"event-submit":async E=>{E.preventDefault(),F()}},u(at,{autofocus:!0,label:t,ref:E=>{C.input=E},value:i,icon:o,placeholder:d,type:r,before:a,after:f})),u("footer",null,u("fieldset",{class:"group"},u(O,{"event-click":P,icon:wt,label:s}),u(O,{"event-click":F,icon:Gt,label:n,type:"submit"})))))})}function ls(t,{title:e="Action requise",yes:n="Valider",no:s="Annuler",onYes:r=()=>!0,onNo:i=()=>!1,onCancel:o=()=>null}={}){return new Promise(a=>{let f;V(u(Le,{ref:M=>{f=M},"event-close":async()=>a(await o(this))},t,u("footer",null,u("fieldset",{class:"group"},u(O,{"event-click":async()=>{a(await i(this)),f.destroy()},icon:wt,label:s}),u(O,{"event-click":async()=>{a(await r(this)),f.destroy()},icon:Gt,label:n})))))})}function cs(t){const e=t instanceof Response?"api":t instanceof Error?"internal":"unknown";V(u(Le,{title:e==="api"?"Erreur de l’API":"Erreur"},e==="internal"&&[u("p",null,t.message),u("pre",{class:"stacktrace"},t.stack)],e==="api"&&[u("p",null,"[",t.status,"] ",t.statusText),u("pre",{class:"stacktrace"},t.message)],e==="unknown"&&[u("p",null,"Une erreur inconnue est survenue")]))}const ke={bigText:is,say:os,prompt:as,confirm:ls,error:cs},us=ss("0123456789ABCDEF",6);async function fs({force:t=!1}={}){!t&&!await ke.confirm("Tout effacer ?")||(l.app.lines.set([]),l.app.inputMode.set("draw"))}function hs(){l.app.lines.update(t=>t.slice(0,t.length-1),!0),l.app.lines.current.length||l.app.inputMode.set("draw")}async function ds(){const t=l.app.lines.current.map(e=>e.toJSON());try{const{uid:e}=await mt.export(t,us()),n=new URL(window.location);n.searchParams.append("uid",e),ke.bigText(e,{url:n})}catch(e){ke.error(e)}}async function ps(t){l.api.version.get()||await new Promise(e=>l.api.version.subscribeOnce(e));try{const e=await mt.import(t);l.app.lines.set(e.map(ft.build)),B.start()}catch(e){e.status&&e.status===404?ke.say("Impossible de trouver l’animation demandée",{title:"Erreur"}):ke.error(e)}}const he={clear:fs,undo:hs,save:ds,load:ps},gs=`<svg width="24" height="24" stroke-width="1.5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M3 19V5C3 3.89543 3.89543 3 5 3H16.1716C16.702 3 17.2107 3.21071 17.5858 3.58579L20.4142 6.41421C20.7893 6.78929 21 7.29799 21 7.82843V19C21 20.1046 20.1046 21 19 21H5C3.89543 21 3 20.1046 3 19Z" stroke="currentColor" stroke-width="1.5"/>
<path d="M8.6 9H15.4C15.7314 9 16 8.73137 16 8.4V3.6C16 3.26863 15.7314 3 15.4 3H8.6C8.26863 3 8 3.26863 8 3.6V8.4C8 8.73137 8.26863 9 8.6 9Z" stroke="currentColor" stroke-width="1.5"/>
<path d="M6 13.6V21H18V13.6C18 13.2686 17.7314 13 17.4 13H6.6C6.26863 13 6 13.2686 6 13.6Z" stroke="currentColor" stroke-width="1.5"/>
</svg>
`,vs=`<svg width="24" height="24" stroke-width="1.5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M6.90588 4.53682C6.50592 4.2998 6 4.58808 6 5.05299V18.947C6 19.4119 6.50592 19.7002 6.90588 19.4632L18.629 12.5162C19.0211 12.2838 19.0211 11.7162 18.629 11.4838L6.90588 4.53682Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
`,ms=`<svg width="24" height="24" stroke-width="1.5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M6 18.4V5.6C6 5.26863 6.26863 5 6.6 5H9.4C9.73137 5 10 5.26863 10 5.6V18.4C10 18.7314 9.73137 19 9.4 19H6.6C6.26863 19 6 18.7314 6 18.4Z" stroke="currentColor" stroke-width="1.5"/>
<path d="M14 18.4V5.6C14 5.26863 14.2686 5 14.6 5H17.4C17.7314 5 18 5.26863 18 5.6V18.4C18 18.7314 17.7314 19 17.4 19H14.6C14.2686 19 14 18.7314 14 18.4Z" stroke="currentColor" stroke-width="1.5"/>
</svg>
`;class ws extends R{beforeRender(){this.update=this.update.bind(this),this.handleChange=this.handleChange.bind(this)}template(e,n){return u("section",{class:"timeline"},u("fieldset",{class:"group"},u(O,{icon:ms,"store-hidden":st(l.raf.isRunning),"event-click":B.stop}),u(O,{icon:vs,"store-hidden":l.raf.isRunning,"event-click":B.start}),u("input",{type:"range",ref:this.ref("input"),"event-input":this.handleChange,"event-focus":s=>s.target.blur(),step:"1","store-value":l.raf.frameCount,"store-max":l.raf.maxDuration}),l.app.proMode.get()&&[u(at,{type:"number",size:"auto","store-value":l.raf.frameCount,after:"/",min:0,style:"gap: var(--gutter-internal)","store-max":l.raf.maxDuration}),u(at,{type:"number",size:"auto",style:"border-left: 0; padding-left: 0","store-value":l.raf.maxDuration,min:l.raf.fps.get(),after:" frames",max:1e4})]),u(O,{icon:gs,"event-click":he.save,"store-hidden":st(l.api.version),"store-disabled":se(l.app.lines,s=>!s.length)}))}afterRender(){l.raf.frameCount.subscribe(this.update)}update(){const e=l.raf.frameCount.get();this.refs.input.value=e}handleChange(e){B.stop(),l.raf.frameCount.set(+e.target.value)}}const ct=`<svg width="24" height="24" stroke-width="1.5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
`;class bs extends R{beforeRender(e){this.handleValue=this.handleValue.bind(this),this.state={value:e["store-value"]||m(e.value),isDisabled:e["store-disabled"]||m(e.disabled),isHidden:e["store-hidden"]||m(e.hidden)}}template(e,n){return u("div",{class:re("color-picker",e.class)},u("input",{type:"color",ref:this.ref("input"),"store-value":n.value,"event-input":s=>this.state.value.set(s.target.value)}),u(O,{icon:ct,"store-disabled":n.isDisabled,"store-hidden":n.isHidden,"event-click":s=>this.refs.input.click()}))}afterMount(){this.state.value.subscribe(this.handleValue),this.handleValue()}handleValue(){const e=this.state.value.get();e?this.base.style.setProperty("--color",e):this.base.style.removeProperty("--color"),(this.props["event-change"]||H)(e||"white")}}class ae extends R{beforeRender(e){this.update=this.update.bind(this),this.state={value:e["store-value"]||m(((e.values||[])[0]||{}).value)}}template(e,n){return u("div",{class:re("switcher",e.class)},e.values.map((s,r)=>u(O,{...s,ref:this.refArray("buttons"),"event-click":()=>this.handleChange(this.props.values[(r+1)%this.props.values.length])})))}afterMount(){this.state.value.subscribe(this.update),this.update()}update(){const e=this.props.values.findIndex(({value:n})=>n===this.state.value.current);for(let n=0;n<this.refs.buttons.length;n++)this.refs.buttons[n].state.isHidden.set(n!==e)}handleChange(e){(this.props["event-change"]||H)(e.value),this.state.value.set(e.value)}}const ys=`<svg width="24" height="24" viewBox="0 0 24 24" stroke-width="1.5" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M20 9L18.005 20.3463C17.8369 21.3026 17.0062 22 16.0353 22H7.96474C6.99379 22 6.1631 21.3026 5.99496 20.3463L4 9" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M21 6L15.375 6M3 6L8.625 6M8.625 6V4C8.625 2.89543 9.52043 2 10.625 2H13.375C14.4796 2 15.375 2.89543 15.375 4V6M8.625 6L15.375 6" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
`,Cs=`<svg width="24" height="24" viewBox="0 0 24 24" stroke-width="1.5" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M4.5 8C8.5 8 11 8 15 8C15 8 15 8 15 8C15 8 20 8 20 12.7059C20 18 15 18 15 18C11.5714 18 9.71429 18 6.28571 18" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M7.5 11.5C6.13317 10.1332 5.36683 9.36683 4 8C5.36683 6.63317 6.13317 5.86683 7.5 4.5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
`,ks=`<svg width="24" height="24" stroke-width="1.5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M9 2L15 2" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M12 10L12 14" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M12 22C16.4183 22 20 18.4183 20 14C20 9.58172 16.4183 6 12 6C7.58172 6 4 9.58172 4 14C4 18.4183 7.58172 22 12 22Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
`;class Ms extends R{beforeRender(){this.state={hasNoLines:se(l.app.lines,e=>!e.length)}}template(e,n){return u("section",{class:"toolbar"},u("fieldset",null,u(ae,{"store-disabled":n.hasNoLines,"store-value":l.app.inputMode,values:l.INPUT_MODES.get()}),u("fieldset",{class:"group"},l.app.proMode.get()&&u(ae,{"store-value":l.app.drawMode,values:l.DRAW_MODES.get()}),u(ae,{values:Object.entries(l.LINE_WIDTHS.get()).map(([s,r])=>({value:r,icon:ct,class:`disc disc-${s}`})),"event-change":s=>{l.app.style.update(r=>({...r,...s}),!0)}}),l.app.proMode.get()?u(bs,{"event-change":s=>{l.app.style.update(r=>({...r,strokeStyle:s}),!0)}}):u(ae,{values:l.COLORS.get().map(({label:s,value:r})=>({value:r,icon:ct,class:"disc",style:`--color: ${r}`})),"event-change":s=>{l.app.style.update(r=>({...r,strokeStyle:s}),!0)}})),u(ae,{values:l.FILL_MODES.get().map(({value:s,icon:r})=>({value:s,icon:r||ks,label:s.replace(/(→)/g,"&thinsp;$1&thinsp;")})),"event-change":s=>l.app.fillMode.set(s)})),u("fieldset",null,u(ae,{class:"view-mode",values:l.VIEW_MODES.get(),"store-value":l.app.viewMode}),u("fieldset",{class:"group"},u(O,{icon:Cs,"store-disabled":n.hasNoLines,"event-click":he.undo}),u(O,{icon:ys,"store-disabled":se(l.app.lines,s=>!s.length),"event-click":he.clear}))))}}class xs extends R{template(e){return u("main",{class:"app","store-data-view-mode":l.app.viewMode},u(Ms,null),u("div",{class:"app__main"},u(Jn,{"store-disabled":se(l.app.inputMode,n=>n!=="draw")}),u(Xn,{"store-disabled":se(l.app.inputMode,n=>n!=="paste")}),u(Qn,null)),u(ws,null))}}const _s=`<svg width='100%' height='100%' viewBox='0 0 116 100'>
  <path d='M57.734,82.319C39.884,82.319 25.414,67.85 25.414,50C25.414,32.15 39.884,17.681 57.734,17.681C75.584,17.681 90.053,32.15 90.053,50C90.053,67.85 75.584,82.319 57.734,82.319M86.603,-0L28.867,-0L0,50L28.867,100L86.603,100L115.47,50L86.603,-0Z' />
</svg>
`,Ls=`<svg width="24" height="24" stroke-width="1.5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M21.8883 13.5C21.1645 18.3113 17.013 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C16.1006 2 19.6248 4.46819 21.1679 8" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M17 8H21.4C21.7314 8 22 7.73137 22 7.4V3" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
`;class Tt extends R{beforeRender(e){this.handleClick=this.handleClick.bind(this),this.state={hasNoLines:se(l.app.lines,n=>!n.length)}}template(e,n){return u("section",{class:"splashscreen"},u("div",{class:"splashscreen__content"},u("div",{class:"splashscreen__icon",innerHTML:_s}),e.loading?u(O,{label:"Chargement…","store-is-waiting":x(!0)}):u("fieldset",{"store-class-group":st(n.hasNoLines)},u(O,{label:"Nouveau dessin",icon:rt,"event-click":s=>{l.app.lines.set([]),this.handleClick(s)}}),u(O,{icon:Ls,"store-hidden":n.hasNoLines,"event-click":this.handleClick}))))}async handleClick(e){!e.shiftKey&&document.body.requestFullscreen&&await document.body.requestFullscreen(),this.destroy()}}var Ye=typeof navigator<"u"?navigator.userAgent.toLowerCase().indexOf("firefox")>0:!1;function Xe(t,e,n,s){t.addEventListener?t.addEventListener(e,n,s):t.attachEvent&&t.attachEvent("on".concat(e),function(){n(window.event)})}function Jt(t,e){for(var n=e.slice(0,e.length-1),s=0;s<n.length;s++)n[s]=t[n[s].toLowerCase()];return n}function Yt(t){typeof t!="string"&&(t=""),t=t.replace(/\s/g,"");for(var e=t.split(","),n=e.lastIndexOf("");n>=0;)e[n-1]+=",",e.splice(n,1),n=e.lastIndexOf("");return e}function As(t,e){for(var n=t.length>=e.length?t:e,s=t.length>=e.length?e:t,r=!0,i=0;i<n.length;i++)s.indexOf(n[i])===-1&&(r=!1);return r}var Me={backspace:8,"⌫":8,tab:9,clear:12,enter:13,"↩":13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_multiply:106,num_add:107,num_enter:108,num_subtract:109,num_decimal:110,num_divide:111,"⇪":20,",":188,".":190,"/":191,"`":192,"-":Ye?173:189,"=":Ye?61:187,";":Ye?59:186,"'":222,"[":219,"]":221,"\\":220},K={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,cmd:91,command:91},ut={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91},A={16:!1,18:!1,17:!1,91:!1},_={};for(var Se=1;Se<20;Se++)Me["f".concat(Se)]=111+Se;var w=[],Bt=!1,Xt="all",Qt=[],Ie=function(e){return Me[e.toLowerCase()]||K[e.toLowerCase()]||e.toUpperCase().charCodeAt(0)},Es=function(e){return Object.keys(Me).find(function(n){return Me[n]===e})},Ds=function(e){return Object.keys(K).find(function(n){return K[n]===e})};function en(t){Xt=t||"all"}function xe(){return Xt||"all"}function Os(){return w.slice(0)}function Ps(){return w.map(function(t){return Es(t)||Ds(t)||String.fromCharCode(t)})}function js(t){var e=t.target||t.srcElement,n=e.tagName,s=!0;return(e.isContentEditable||(n==="INPUT"||n==="TEXTAREA"||n==="SELECT")&&!e.readOnly)&&(s=!1),s}function Ss(t){return typeof t=="string"&&(t=Ie(t)),w.indexOf(t)!==-1}function Rs(t,e){var n,s;t||(t=xe());for(var r in _)if(Object.prototype.hasOwnProperty.call(_,r))for(n=_[r],s=0;s<n.length;)n[s].scope===t?n.splice(s,1):s++;xe()===t&&en(e||"all")}function Ts(t){var e=t.keyCode||t.which||t.charCode,n=w.indexOf(e);if(n>=0&&w.splice(n,1),t.key&&t.key.toLowerCase()==="meta"&&w.splice(0,w.length),(e===93||e===224)&&(e=91),e in A){A[e]=!1;for(var s in K)K[s]===e&&($[s]=!1)}}function Bs(t){if(typeof t>"u")Object.keys(_).forEach(function(o){return delete _[o]});else if(Array.isArray(t))t.forEach(function(o){o.key&&Qe(o)});else if(typeof t=="object")t.key&&Qe(t);else if(typeof t=="string"){for(var e=arguments.length,n=new Array(e>1?e-1:0),s=1;s<e;s++)n[s-1]=arguments[s];var r=n[0],i=n[1];typeof r=="function"&&(i=r,r=""),Qe({key:t,scope:r,method:i,splitKey:"+"})}}var Qe=function(e){var n=e.key,s=e.scope,r=e.method,i=e.splitKey,o=i===void 0?"+":i,a=Yt(n);a.forEach(function(f){var d=f.split(o),v=d.length,M=d[v-1],C=M==="*"?"*":Ie(M);if(_[C]){s||(s=xe());var F=v>1?Jt(K,d):[];_[C]=_[C].filter(function(P){var E=r?P.method===r:!0;return!(E&&P.scope===s&&As(P.mods,F))})}})};function Ft(t,e,n,s){if(e.element===s){var r;if(e.scope===n||e.scope==="all"){r=e.mods.length>0;for(var i in A)Object.prototype.hasOwnProperty.call(A,i)&&(!A[i]&&e.mods.indexOf(+i)>-1||A[i]&&e.mods.indexOf(+i)===-1)&&(r=!1);(e.mods.length===0&&!A[16]&&!A[18]&&!A[17]&&!A[91]||r||e.shortcut==="*")&&e.method(t,e)===!1&&(t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation&&t.stopPropagation(),t.cancelBubble&&(t.cancelBubble=!0))}}}function It(t,e){var n=_["*"],s=t.keyCode||t.which||t.charCode;if($.filter.call(this,t)){if((s===93||s===224)&&(s=91),w.indexOf(s)===-1&&s!==229&&w.push(s),["ctrlKey","altKey","shiftKey","metaKey"].forEach(function(P){var E=ut[P];t[P]&&w.indexOf(E)===-1?w.push(E):!t[P]&&w.indexOf(E)>-1?w.splice(w.indexOf(E),1):P==="metaKey"&&t[P]&&w.length===3&&(t.ctrlKey||t.shiftKey||t.altKey||(w=w.slice(w.indexOf(E))))}),s in A){A[s]=!0;for(var r in K)K[r]===s&&($[r]=!0);if(!n)return}for(var i in A)Object.prototype.hasOwnProperty.call(A,i)&&(A[i]=t[ut[i]]);t.getModifierState&&!(t.altKey&&!t.ctrlKey)&&t.getModifierState("AltGraph")&&(w.indexOf(17)===-1&&w.push(17),w.indexOf(18)===-1&&w.push(18),A[17]=!0,A[18]=!0);var o=xe();if(n)for(var a=0;a<n.length;a++)n[a].scope===o&&(t.type==="keydown"&&n[a].keydown||t.type==="keyup"&&n[a].keyup)&&Ft(t,n[a],o,e);if(s in _){for(var f=0;f<_[s].length;f++)if((t.type==="keydown"&&_[s][f].keydown||t.type==="keyup"&&_[s][f].keyup)&&_[s][f].key){for(var d=_[s][f],v=d.splitKey,M=d.key.split(v),C=[],F=0;F<M.length;F++)C.push(Ie(M[F]));C.sort().join("")===w.sort().join("")&&Ft(t,d,o,e)}}}}function Fs(t){return Qt.indexOf(t)>-1}function $(t,e,n){w=[];var s=Yt(t),r=[],i="all",o=document,a=0,f=!1,d=!0,v="+",M=!1;for(n===void 0&&typeof e=="function"&&(n=e),Object.prototype.toString.call(e)==="[object Object]"&&(e.scope&&(i=e.scope),e.element&&(o=e.element),e.keyup&&(f=e.keyup),e.keydown!==void 0&&(d=e.keydown),e.capture!==void 0&&(M=e.capture),typeof e.splitKey=="string"&&(v=e.splitKey)),typeof e=="string"&&(i=e);a<s.length;a++)t=s[a].split(v),r=[],t.length>1&&(r=Jt(K,t)),t=t[t.length-1],t=t==="*"?"*":Ie(t),t in _||(_[t]=[]),_[t].push({keyup:f,keydown:d,scope:i,mods:r,shortcut:s[a],method:n,key:s[a],splitKey:v,element:o});typeof o<"u"&&!Fs(o)&&window&&(Qt.push(o),Xe(o,"keydown",function(C){It(C,o)},M),Bt||(Bt=!0,Xe(window,"focus",function(){w=[]},M)),Xe(o,"keyup",function(C){It(C,o),Ts(C)},M))}function Is(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"all";Object.keys(_).forEach(function(n){var s=_[n].filter(function(r){return r.scope===e&&r.shortcut===t});s.forEach(function(r){r&&r.method&&r.method()})})}var et={getPressedKeyString:Ps,setScope:en,getScope:xe,deleteScope:Rs,getPressedKeyCodes:Os,isPressed:Ss,filter:js,trigger:Is,unbind:Bs,keyMap:Me,modifier:K,modifierMap:ut};for(var tt in et)Object.prototype.hasOwnProperty.call(et,tt)&&($[tt]=et[tt]);if(typeof window<"u"){var Ns=window.hotkeys;$.noConflict=function(t){return t&&window.hotkeys===$&&(window.hotkeys=Ns),$},window.hotkeys=$}[{key:"space",description:"Jouer ou stopper l’animation",callback:B.toggle},{key:"left",description:"Reculer d’une image",callback:()=>{B.stop(),l.raf.frameCount.update(t=>Math.max(0,t-1))}},{key:"shift+left",description:"Reculer de 10 images",callback:()=>{B.stop(),l.raf.frameCount.update(t=>Math.max(0,t-10))}},{key:"right",description:"Avancer d’une image",callback:()=>{B.stop(),l.raf.frameCount.update(t=>Math.min(t+1,l.raf.maxDuration.get()))}},{key:"shift+right",description:"Avancer de 10 images",callback:()=>{B.stop(),l.raf.frameCount.update(t=>Math.min(t+10,l.raf.maxDuration.get()))}},{key:"cmd+z",description:"Effacer le dernier dessin",callback:he.undo},{key:"cmd+x",description:"Tout effacer",callback:he.clear},{key:"w",description:"Afficher/masquer les dessins à venir",callback:()=>l.app.viewMode.update(t=>t==="wireframe"?"preview":"wireframe")},{key:"tab",description:"Afficher / cacher l’interface",callback:t=>{t.preventDefault(),l.app.viewMode.update(e=>e==="no-ui"?"wireframe":"no-ui")}}].map(Ks);function Ks(t){return t.callback&&!t.disabled&&$(t.key,e=>{t.filter&&t.filter(e)||(e.preventDefault(),e.stopPropagation(),t.callback(e))}),t}console.log("1.4.2-production");const Nt=new URLSearchParams(window.location.search).get("uid");(async()=>{if(mt.polling.start(),Nt){const{components:t}=V(u(Tt,{loading:!0}));await he.load(Nt),t[0].destroy()}else V(u(Tt,null));V(u(xs,null))})();
