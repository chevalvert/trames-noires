(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();function u(t,e){const n={};return n.vnode=!0,n.type=t,n.props=e||{},n.children=[].concat.apply([],[].slice.call(arguments,2)),n.isInstance=t&&t.template&&typeof t.template=="function",n.isComponent=typeof t=="function"&&t.prototype&&typeof t.prototype.render=="function",n.isStateless=typeof t=="function"&&!n.isComponent,n.isDom=typeof t=="string",n}u.f=t=>t.children;function it(t,e){for(const n in e)t[n]=e[n];return t}function U(){}function un(t,e,n,s){if(s)return{log:U,warn:U,error:U};const r=[];t=t.toUpperCase(),r.push(`%c ${t} `);let i="font-weight:bold;";return e&&(i+=`color:${e};`),n&&(i+=`background-color:${n}`),r.push(i),{log:console.log.bind(console,...r),warn:console.warn.bind(console,...r),error:console.error.bind(console,...r)}}const Pt=["nodes","components","refs","domEvents","storeEvents"];class ve{constructor(){this.data={};for(let e=0;e<Pt.length;e++)this.data[Pt[e]]=[]}append(e){for(const n in e)this.data[n]=this.data[n].concat(e[n])}set(e){for(const n in e)this.data[n]=e[n]}get(){return this.data}}const Be=["xlink","xmlns","xml"],fn=new Set(["placeholder","autoplay","muted","for","webkit-playsinline","playsinline","selected"]);let Xe;const de=(t,e)=>t.substr(0,e.length)===e,dn=t=>(e,n)=>n.classList.toggle(t,e||!1),Ye=(t="textContent",e)=>(n,s)=>{e&&t!==(t=t.replace(/^xlink:?/,""))?s.setAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase(),n):(Xe=n??"",e||(s[t]=Xe),(e||fn.has(t)||de(t,"data-"))&&s.setAttribute(t,Xe))};function hn(t,e,n,s,r){if(n!==void 0&&!(e==="__self"||e==="__source")){e==="className"&&(e="class");for(let i=0;i<Be.length;i++)if(de(e,Be[i])){const o=Be[i].length;e[o]&&e[o]!==":"&&(e=Be[i]+":"+e[o].toLowerCase()+e.substr(o+1,e.length));break}if(e!=="ref"){if(de(e,"event-")){const i=e.toLowerCase().substring(6);s.append({domEvents:[{el:t,evt:i,fn:n}]})}else if(e==="store"){const i=Array.isArray(n)?n:[n],o=[];for(let l=0,f=i.length;l<f;l++){const d=Array.isArray(i[l])?i[l]:[i[l]],h=d[0],w=d[1],p=d[2]!==void 0?d[2]:!0;h&&o.push({store:h,fn:w,init:p,el:t})}s.append({storeEvents:o})}else if(de(e,"store-class-")){const i=e.substring(12),o=dn(i);s.append({storeEvents:[{store:n,init:!0,fn:o,el:t}]})}else if(de(e,"store-")){let i=e.substring(6);i==="text"&&(i="textContent");const o=Ye(i,r);s.append({storeEvents:[{store:n,init:!0,fn:o,el:t}]})}else if(!(typeof n=="function"&&de(e,"on")))if(e==="class"&&!r)t.className=n||"";else if(e==="style")typeof n=="object"?it(t.style,n):typeof n=="string"&&(t.style.cssText=n);else if(e!=="list"&&e!=="type"&&!r&&e in t)try{Ye(e,r)(n,t)}catch{}else typeof n!="object"&&typeof n!="function"&&Ye(e,r)(n,t)}}}function pn(t){return Array.isArray(t)?t:[t]}function Ee(t,e){if(Array.isArray(t))return gn(t,e);if(t instanceof window.Element)return mn(t);if(t===null||typeof t!="object"||!t.vnode)return vn(t);const n=it(it({},t.props),{children:[].concat.apply([],t.children||[])});if(t.isDom)return wn(t,n,e);if(t.isInstance)return St(t,n,e,!0);if(t.isStateless)return bn(t,n,e);if(t.isComponent)return St(t,n,e)}function gn(t,e){t=pn(t);const n=new ve;for(let s=0;s<t.length;s++)n.append(Ee(t[s],e));return n.get()}function vn(t){const e=new ve;return t==null||t===!1||e.append({nodes:document.createTextNode(t+"")}),e.get()}function wn(t,e,n){const s=new ve;let r=[];t.type==="svg"&&(n=!0);for(let o=0;o<e.children.length;o++){const l=Ee(e.children[o],n);l.nodes&&(r=r.concat(l.nodes),s.append({components:l.components,refs:l.refs,domEvents:l.domEvents,storeEvents:l.storeEvents}))}const i=n?document.createElementNS("http://www.w3.org/2000/svg",t.type):document.createElement(t.type);for(const o in t.props)hn(i,o,t.props[o],s,n);for(let o=0;o<r.length;o++)i.appendChild(r[o]);return e.ref&&s.append({refs:{ref:i,fn:e.ref}}),s.append({nodes:i}),s.get()}function mn(t){const e=new ve;return e.append({nodes:t}),e.get()}function bn(t,e,n){const s=new ve,r=t.type(e);return s.append(Ee(r,n)),s.get()}function St(t,e,n,s=!1){const r=new ve,i=s?t.type:new t.type(e);s&&(e=i.props),i.beforeRender(e);const o=i.template(e,i.state||{});e.ref&&r.append({refs:{ref:i,fn:e.ref}}),r.append(Ee(o,n));const l=r.data.nodes;i.base=l.length>1?l:l[0];for(const f in r.data)f!=="nodes"&&(i._collector[f]||(i._collector[f]=[]),i._collector[f]=i._collector[f].concat(r.data[f]));r.set({components:[i],refs:[],domEvents:[],storeEvents:[]});for(let f=0;f<i._collector.components.length;f++)i._collector.components[f]._parent=i;return r.get()}function he(t,e,n){const s=t._collector&&t._collector.components;if(n&&e(t),s)for(let r=0;r<s.length;r++)he(s[r],e);n||e(t)}function yn(t){for(let e=0;e<t._collector.refs.length;e++)t._collector.refs[e].fn(t._collector.refs[e].ref),t._collector.refs[e].ref=null}function Cn(t){for(let e=0;e<t._collector.storeEvents.length;e++){const n=t._collector.storeEvents[e],s=n.fn;n.fn=function(r){s(r,n.el)},n.store.subscribe(n.fn),n.init&&n.fn(n.store.current)}}function kn(t){t.test&&console.log("call dom listeners",t._collector.domEvents);for(let e=0;e<t._collector.domEvents.length;e++){const n=t._collector.domEvents[e];n.el.addEventListener(n.evt,n.fn)}}function Mn(t){he(t,yn)}function xn(t){he(t,kn),he(t,Cn)}const _n=new Set(["g","svg","defs"]);function W(t,e=document.body,n){let s=0;const r=Ee(t,_n.has(e.tagName));let i={_collector:r};if(Mn(i),he(i,function(o){o.afterRender&&o.afterRender(o.props)}),typeof e=="function"){const o=r.nodes.length<2?r.nodes[0]:r.nodes;e(o)}else if(e)for(s=0;s<r.nodes.length;s++)e.appendChild(r.nodes[s]);if((!n||n.mounted)&&(xn(i),he(i,function(o){o.mounted=!0,o.afterMount&&o.afterMount(o.props)})),n&&n._collector){const o=n._collector;for(s=0;s<r.components.length;s++)r.components[s]._parent=n;o.refs&&(o.refs=o.refs.concat(r.refs)),o.components&&(o.components=o.components.concat(r.components)),o.domEvents&&(o.domEvents=o.domEvents.concat(r.domEvents)),o.storeEvents&&(o.storeEvents=o.storeEvents.concat(r.storeEvents))}return i=void 0,r}class T{constructor(e={}){this._parent=null,this._collector={refs:[],components:[],domEvents:[],storeEvents:[]},this._storeListeners=[],this.refs={},this.state={},this.store={},this.props=e||{},this.base=null,this.mounted=!1,this.destroyed=!1;const n=e.name||this.constructor.name||"Component",{log:s,warn:r,error:i}=un(n,"white","#000",e.disableLog);this.log=s,this.warn=r,this.error=i}storeSubscribe(e,n,s,r=!0){e.subscribe(n,s),this._storeListeners.push([e,n,s]),r&&n.call(s,e.current)}template(){}beforeRender(){}afterRender(){}afterMount(){}beforeDestroy(){}ref(e){const n=this;return function(r){n.refs[e]=r}}refArray(e,n=!1){const s=this.refs[e]||(this.refs[e]=[]);let r=s.length,i,o;return n&&(i=this.refs.__pools||(this.refs.__pools={}),o=i[e]||(i[e]=[]),o.length&&(r=o.pop())),s[r]=null,function(f){s[r]=f,n&&o.push(r)}}refMap(e,n){const s=this.refs[n]||(this.refs[n]=new Map);return function(i){i?s.set(e,i):s.delete(e)}}render(e,n){return W(e,n,this)}destroy(){let e=0;for(this.beforeDestroy(this.props),e=this._collector.domEvents.length-1;e>=0;e--){const s=this._collector.domEvents[e];s.el.removeEventListener(s.evt,s.fn)}for(e=this._collector.storeEvents.length-1;e>=0;e--){const s=this._collector.storeEvents[e];s.store.unsubscribe(s.fn)}for(e=this._storeListeners.length-1;e>=0;e--){const s=this._storeListeners[e];s[0].unsubscribe(s[1],s[2])}for(e=this._collector.components.length-1;e>=0;e--)this._collector.components[e].destroy();if(this.mounted=!1,this.destroyed=!0,this._parent){const s=this._parent._collector.components.indexOf(this);~s&&this._parent._collector.components.splice(s,1),this._parent=null}for(e=this._collector.refs.length-1;e>=0;e--)this._collector.refs[e].fn(null),this._collector.refs.splice(e,1);let n=Array.isArray(this.base)?this.base:[this.base];for(e=0;e<n.length;e++)n[e]&&n[e].parentNode&&n[e].parentNode.removeChild(n[e]);this.base=n=null,this.props=null,this.state=null,this.store=null,this.refs=null,this._storeListeners=null}}function Rt(t,e,n,s){this.fn=e,this.ctx=n||null,this.owner=t,this.once=!!s}function Qe(t,e){e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),e.ctx=e.fn=e.owner=null,e===t._first&&(t._first=e.next),e===t._last&&(t._last=e.prev)}class Ln{constructor(){this._first=this._last=null}dispatch(e,n,s,r,i){let o=this._first;for(;o;)o.fn.call(o.ctx,e,n,s,r,i),o.once&&this.unsubscribe(o),o=o.next}trigger(){this.dispatch(this.current)}subscribe(e,n,s){const r=new Rt(this,e,n,s);return this._first?(this._last.next=r,r.prev=this._last,this._last=r):(this._first=r,this._last=r),r}subscribeOnce(e,n){return this.subscribe(e,n,!0)}unsubscribe(e,n){if(e instanceof Rt)return Qe(this,e);n||(n=null);let s=this._first;for(;s;)s.fn===e&&s.ctx===n&&Qe(this,s),s=s.next}unsubscribeAll(){let e=this._first;for(this._first=this._last=null;e;)Qe(this,e),e=e.next}}class Vt extends Ln{constructor(e){super(),this.current=e}set(){throw new Error("Cannot set a different value for a Readable Signal. Use Writable instead")}get(){return this.current}}function _(t){return new Vt(t)}class Ut extends Vt{set(e,n){if(!n&&this.current===e)return;this.previous=this.current,this.current=e;let s=this._first;for(;s;)s.fn.call(s.ctx,this.current,this.previous),s.once&&this.unsubscribe(s),s=s.next}update(e,n){const s=e(this.current);this.set(s!==void 0?s:this.current,n)}}function b(t){return new Ut(t)}function Q(t,e){const n=new Ut,s=n.set.bind(n);delete n.set;const r=Array.isArray(t);let i=r?new Array(t.length):null;if(r)for(let l=0,f=t.length;l<f;l++)i[l]=t[l].current,t[l].subscribe(function(d){i[l]=d,o()});else i=t.current,t.subscribe(function(l){i=l,o()});o();function o(){const l=e(i);l&&l.then?l.then(s):s(l)}return n}const An="trames-noires@1.5.0/";function Tt(t,e,{encode:n=JSON.stringify,decode:s=JSON.parse,silent:r=!1}={}){const i=b(e),o=An+t,l=localStorage.getItem(o);if(l!==null)try{r?i.current=s(l):i.set(s(l))}catch(f){console.warn(`Error while trying to decode ${t} in local storage`),console.error(f)}else localStorage.setItem(o,n(i.current));return i.subscribe(f=>localStorage.setItem(o,n(f))),i}const ot=t=>Q(t,e=>!e);var Me=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Wt={};(function(t){var e=Object.defineProperty,n=c=>e(c,"__esModule",{value:!0}),s=(c,g)=>{n(c);for(var k in g)e(c,k,{get:g[k],enumerable:!0})};s(t,{default:()=>on,getStroke:()=>At,getStrokeOutlinePoints:()=>_t,getStrokePoints:()=>Lt});function r(c,g,k,Z=I=>I){return c*Z(.5-g*(.5-k))}function i(c){return[-c[0],-c[1]]}function o(c,g){return[c[0]+g[0],c[1]+g[1]]}function l(c,g){return[c[0]-g[0],c[1]-g[1]]}function f(c,g){return[c[0]*g,c[1]*g]}function d(c,g){return[c[0]/g,c[1]/g]}function h(c){return[c[1],-c[0]]}function w(c,g){return c[0]*g[0]+c[1]*g[1]}function p(c,g){return c[0]===g[0]&&c[1]===g[1]}function C(c){return Math.hypot(c[0],c[1])}function O(c){return c[0]*c[0]+c[1]*c[1]}function A(c,g){return O(l(c,g))}function le(c){return d(c,C(c))}function Oe(c,g){return Math.hypot(c[1]-g[1],c[0]-g[0])}function K(c,g,k){let Z=Math.sin(k),I=Math.cos(k),ee=c[0]-g[0],te=c[1]-g[1],m=ee*I-te*Z,B=ee*Z+te*I;return[m+g[0],B+g[1]]}function $(c,g,k){return o(c,f(l(g,c),k))}function Mt(c,g,k){return o(c,f(g,k))}var{min:ce,PI:rn}=Math,xt=.275,we=rn+1e-4;function _t(c,g={}){let{size:k=16,smoothing:Z=.5,thinning:I=.5,simulatePressure:ee=!0,easing:te=v=>v,start:m={},end:B={},last:je=!1}=g,{cap:me=!0,easing:z=v=>v*(2-v)}=m,{cap:Pe=!0,easing:S=v=>--v*v*v+1}=B;if(c.length===0||k<=0)return[];let j=c[c.length-1].runningLength,N=m.taper===!1?0:m.taper===!0?Math.max(k,j):m.taper,be=B.taper===!1?0:B.taper===!0?Math.max(k,j):B.taper,Et=Math.pow(k*Z,2),ye=[],ue=[],Ve=c.slice(0,10).reduce((v,E)=>{let M=E.pressure;if(ee){let x=ce(1,E.distance/k),qe=ce(1,1-x);M=ce(1,v+(qe-v)*(x*xt))}return(v+M)/2},c[0].pressure),R=r(k,I,c[c.length-1].pressure,te),Ue,We=c[0].vector,Ce=c[0].point,Se=Ce,ne=Ce,se=Se,Ze=!1;for(let v=0;v<c.length;v++){let{pressure:E}=c[v],{point:M,vector:x,distance:qe,runningLength:ke}=c[v];if(v<c.length-1&&j-ke<3)continue;if(I){if(ee){let J=ce(1,qe/k),Je=ce(1,1-J);E=ce(1,Ve+(Je-Ve)*(J*xt))}R=r(k,I,E,te)}else R=k/2;Ue===void 0&&(Ue=R);let an=ke<N?z(ke/N):1,ln=j-ke<be?S((j-ke)/be):1;R=Math.max(.01,R*Math.min(an,ln));let Dt=(v<c.length-1?c[v+1]:c[v]).vector,Ge=v<c.length-1?w(x,Dt):1,cn=w(x,We)<0&&!Ze,Ot=Ge!==null&&Ge<0;if(cn||Ot){let J=f(h(We),R);for(let Je=1/13,Te=0;Te<=1;Te+=Je)ne=K(l(M,J),M,we*Te),ye.push(ne),se=K(o(M,J),M,we*-Te),ue.push(se);Ce=ne,Se=se,Ot&&(Ze=!0);continue}if(Ze=!1,v===c.length-1){let J=f(h(x),R);ye.push(l(M,J)),ue.push(o(M,J));continue}let jt=f(h($(Dt,x,Ge)),R);ne=l(M,jt),(v<=1||A(Ce,ne)>Et)&&(ye.push(ne),Ce=ne),se=o(M,jt),(v<=1||A(Se,se)>Et)&&(ue.push(se),Se=se),Ve=E,We=x}let q=c[0].point.slice(0,2),G=c.length>1?c[c.length-1].point.slice(0,2):o(c[0].point,[1,1]),ze=[],Re=[];if(c.length===1){if(!(N||be)||je){let v=Mt(q,le(h(l(q,G))),-(Ue||R)),E=[];for(let M=1/13,x=M;x<=1;x+=M)E.push(K(v,q,we*2*x));return E}}else{if(!(N||be&&c.length===1))if(me)for(let E=1/13,M=E;M<=1;M+=E){let x=K(ue[0],q,we*M);ze.push(x)}else{let E=l(ye[0],ue[0]),M=f(E,.5),x=f(E,.51);ze.push(l(q,M),l(q,x),o(q,x),o(q,M))}let v=h(i(c[c.length-1].vector));if(be||N&&c.length===1)Re.push(G);else if(Pe){let E=Mt(G,v,R);for(let M=1/29,x=M;x<1;x+=M)Re.push(K(E,G,we*3*x))}else Re.push(o(G,f(v,R)),o(G,f(v,R*.99)),l(G,f(v,R*.99)),l(G,f(v,R)))}return ye.concat(Re,ue.reverse(),ze)}function Lt(c,g={}){var k;let{streamline:Z=.5,size:I=16,last:ee=!1}=g;if(c.length===0)return[];let te=.15+(1-Z)*.85,m=Array.isArray(c[0])?c:c.map(({x:S,y:j,pressure:N=.5})=>[S,j,N]);if(m.length===2){let S=m[1];m=m.slice(0,-1);for(let j=1;j<5;j++)m.push($(m[0],S,j/4))}m.length===1&&(m=[...m,[...o(m[0],[1,1]),...m[0].slice(2)]]);let B=[{point:[m[0][0],m[0][1]],pressure:m[0][2]>=0?m[0][2]:.25,vector:[1,1],distance:0,runningLength:0}],je=!1,me=0,z=B[0],Pe=m.length-1;for(let S=1;S<m.length;S++){let j=ee&&S===Pe?m[S].slice(0,2):$(z.point,m[S],te);if(p(z.point,j))continue;let N=Oe(j,z.point);if(me+=N,S<Pe&&!je){if(me<I)continue;je=!0}z={point:j,pressure:m[S][2]>=0?m[S][2]:.5,vector:le(l(z.point,j)),distance:N,runningLength:me},B.push(z)}return B[0].vector=((k=B[1])==null?void 0:k.vector)||[0,0],B}function At(c,g={}){return _t(Lt(c,g),g)}var on=At})(Wt);var En=function(e,n){return e[0]=n[0],e[1]=n[1],e},Bt=En,Dn=function(t,e){Array.isArray(e)||(e=[]),t.length>0&&e.push(Bt([0,0],t[0]));for(var n=0;n<t.length-1;n++){var s=t[n],r=t[n+1],i=s[0],o=s[1],l=r[0],f=r[1],d=[.75*i+.25*l,.75*o+.25*f],h=[.25*i+.75*l,.25*o+.75*f];e.push(d),e.push(h)}return t.length>1&&e.push(Bt([0,0],t[t.length-1])),e};const On=Wt,jn=Dn,Pn=3;function Ft(t,{isStroke:e=!1}={}){return t.length<=1?"":e?t.reduce((n,[s,r],i,o)=>{if(i===o.length-1)return n;const[l,f]=o[i+1];return n.concat(` ${s},${r} ${(s+l)/2},${(r+f)/2}`)},["M ",`${t[0][0]},${t[0][1]}`," Q"]).concat("Z").join(""):["M",t[0],"L",t.slice(1)].join(" ")}let Sn=Date.now();class Ie{constructor({offset:e=[0,0],points:n=[],drawMode:s="raw",fillMode:r="AA→AB",firstFrame:i=0,style:o={},id:l=++Sn,ref:f}={}){this.offset=e,this.points=n,this.drawMode=s,this.fillMode=r,this.firstFrame=i,this.style=o,this.id=l,this.ref=f}static build(e,n,s){if(e.ref&&s){const r=s.find(i=>i.id===e.ref);e.points=r.points}return new Ie(e)}clone(e){const n=new Ie(e);return n.ref=this.ref||this.id,n.points=this.points.slice(0),n}get isEmpty(){return!this.points||!this.points.length}get pathData(){return this._pathData||(this._pathData=Ft(this.points.map(([e,n])=>[e+this.offset[0],n+this.offset[1]]))),this._pathData}push(e){this.points.push(e)}render(e,{frame:n=Number.POSITIVE_INFINITY,drawMode:s=this.drawMode,fillMode:r=this.fillMode,style:i=this.style}={}){if(this.isEmpty||n<this.firstFrame&&r!=="AB")return;e.save();for(const[f,d]of Object.entries(i))f==="lineDash"&&e.setLineDash(d),e[f]=d;const o=[];switch(r){case"AB":o[0]=0,o[1]=this.points.length;break;case"AA→AB":o[0]=0,o[1]=n-this.firstFrame;break;case"AA→BB":o[0]=Math.max(0,n-this.firstFrame-Pn),o[1]=n-this.firstFrame;break;case"AA→AB→BB":o[0]=Math.max(0,n-this.firstFrame-this.points.length/2),o[1]=n-this.firstFrame;break}const l=(()=>{const f=this.points.slice(o[0],o[1]);return!f||!f.length?[]:s==="smooth"?jn(f):s==="freehand"?On.getStroke(f,{...i.perfectFreehand,simulatePressure:f[0][2]===void 0,last:f.length===this.points.length}):f})();if(s==="freehand"&&l.length>1)e.fillStyle=e.strokeStyle,e.fill(new Path2D(Ft(l,{isStroke:!0})));else{e.beginPath();for(let f=0;f<l.length;f++){const d=l[f];d&&e[f?"lineTo":"moveTo"](d[0]+this.offset[0],d[1]+this.offset[1])}e.stroke()}e.restore()}toJSON(){return{id:this.id,ref:this.ref,offset:this.offset,points:this.ref?null:this.points,drawMode:this.drawMode,fillMode:this.fillMode,firstFrame:this.firstFrame,style:this.style}}}var gt=Ie;const Rn=`<svg width="24" height="24" viewBox="0 0 24 24" stroke-width="1.5" fill="none" xmlns="http://www.w3.org/2000/svg">
<g clip-path="url(#clip0_2585_14438)">
<path d="M17.6744 11.4075L15.7691 17.1233C15.7072 17.309 15.5586 17.4529 15.3709 17.5087L3.69348 20.9803C3.22819 21.1186 2.79978 20.676 2.95328 20.2155L6.74467 8.84131C6.79981 8.67588 6.92419 8.54263 7.08543 8.47624L12.472 6.25822C12.696 6.166 12.9535 6.21749 13.1248 6.38876L17.5294 10.7935C17.6901 10.9542 17.7463 11.1919 17.6744 11.4075Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M3.2959 20.6016L9.65986 14.2376" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M17.7917 11.0557L20.6202 8.22724C21.4012 7.44619 21.4012 6.17986 20.6202 5.39881L18.4989 3.27749C17.7178 2.49645 16.4515 2.49645 15.6704 3.27749L12.842 6.10592" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M11.7814 12.1163C11.1956 11.5305 10.2458 11.5305 9.66004 12.1163C9.07426 12.7021 9.07426 13.6519 9.66004 14.2376C10.2458 14.8234 11.1956 14.8234 11.7814 14.2376C12.3671 13.6519 12.3671 12.7021 11.7814 12.1163Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
</g>
<defs>
<clipPath id="clip0_2585_14438">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>
</svg>
`,Tn=`<svg width="24" height="24" stroke-width="1.5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M9 2L15 2" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M5 7L19 21.5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M12 10L12 14" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M6.1905 8.5C4.83275 9.93366 4 11.8696 4 14C4 18.4183 7.58172 22 12 22C14.0049 22 15.8375 21.2625 17.2413 20.044M19.4185 17C19.7935 16.0736 20 15.0609 20 14C20 9.58172 16.4183 6 12 6C11.0187 6 10.0786 6.17669 9.20988 6.5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
`,Bn=`<svg width="24" height="24" viewBox="0 0 24 24" stroke-width="1.5" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M19.5 16L17.0248 12.6038" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M12 17.5V14" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M4.5 16L6.96895 12.6124" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M3 8C6.6 16 17.4 16 21 8" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
`,Fn=`<svg width="24" height="24" stroke-width="1.5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M13.8476 13.317L9.50515 18.2798C8.70833 19.1905 7.29167 19.1905 6.49485 18.2798L2.15238 13.317C1.49259 12.563 1.49259 11.437 2.15238 10.683L6.49485 5.72018C7.29167 4.80952 8.70833 4.80952 9.50515 5.72017L13.8476 10.683C14.5074 11.437 14.5074 12.563 13.8476 13.317Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M13 19L17.8844 13.3016C18.5263 12.5526 18.5263 11.4474 17.8844 10.6984L13 5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M17 19L21.8844 13.3016C22.5263 12.5526 22.5263 11.4474 21.8844 10.6984L17 5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
`,at=`<svg width="24" height="24" viewBox="0 0 24 24" stroke-width="1.5" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M14.3632 5.65156L15.8431 4.17157C16.6242 3.39052 17.8905 3.39052 18.6716 4.17157L20.0858 5.58579C20.8668 6.36683 20.8668 7.63316 20.0858 8.41421L18.6058 9.8942M14.3632 5.65156L4.74749 15.2672C4.41542 15.5993 4.21079 16.0376 4.16947 16.5054L3.92738 19.2459C3.87261 19.8659 4.39148 20.3848 5.0115 20.33L7.75191 20.0879C8.21972 20.0466 8.65806 19.8419 8.99013 19.5099L18.6058 9.8942M14.3632 5.65156L18.6058 9.8942" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
`,In=`<svg width="24" height="24" stroke-width="1.5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M3 3L21 21" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M10.5 10.6771C10.1888 11.0296 10 11.4928 10 12C10 13.1045 10.8954 14 12 14C12.5072 14 12.9703 13.8112 13.3229 13.5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M7.36185 7.5611C5.68002 8.73968 4.27894 10.4188 3 12C4.88856 14.991 8.2817 18 12 18C13.5499 18 15.0434 17.4772 16.3949 16.6508" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M12 6C16.0084 6 18.7015 9.1582 21 12C20.6815 12.5043 20.3203 13.0092 19.922 13.5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
`,Nn=`<svg width="24" height="24" stroke-width="1.5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M12 14C13.1046 14 14 13.1046 14 12C14 10.8954 13.1046 10 12 10C10.8954 10 10 10.8954 10 12C10 13.1046 10.8954 14 12 14Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M21 12C19.1114 14.991 15.7183 18 12 18C8.2817 18 4.88856 14.991 3 12C5.29855 9.15825 7.99163 6 12 6C16.0084 6 18.7015 9.1582 21 12Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
`,a={INPUT_MODES:_([{icon:at,label:"Dessin",value:"draw"},{icon:Fn,label:"Tampon",value:"paste"}]),LINE_WIDTHS:_({medium:{lineWidth:10,perfectFreehand:{size:15,thinning:.65,smoothing:.77,streamline:.6}},large:{lineWidth:20,perfectFreehand:{size:30,thinning:.8,smoothing:.77,streamline:.6}},small:{lineWidth:5,perfectFreehand:{size:7.5,thinning:.5,smoothing:.01,streamline:.6}}}),COLORS:_([{value:"#FFF1E8"},{value:"#FF004D"},{value:"#FFA300"},{value:"#FFEC27"},{value:"#00E436"},{value:"#29ADFF"},{value:"#83769C"},{value:"#FF77A8"},{value:"#FFCCAA"}]),FILL_MODES:_([{value:"AA→AB"},{value:"AA→BB"},{value:"AA→AB→BB"},{value:"AB",icon:Tn}]),VIEW_MODES:_([{value:"wireframe",icon:Nn},{value:"preview",icon:In},{value:"no-ui",icon:Bn}]),DRAW_MODES:_([{value:"smooth",icon:at},{value:"freehand",icon:Rn}]),app:{proMode:_(new URLSearchParams(window.location.search).has("pro")),inputMode:b("draw"),fillMode:b("AA→AB"),viewMode:b("wireframe"),drawMode:b("smooth"),lines:Tt("app.lines",[],{encode:t=>JSON.stringify(t.map(e=>e.toJSON())),decode:t=>JSON.parse(t||"[]").map(gt.build)}),style:b({lineWidth:10,strokeStyle:"white",lineJoin:"round",lineCap:"round"})},raf:{fps:_(60),maxDuration:Tt("raf.maxDuration",60*5),isRunning:b(!1),frameCount:b(0)},api:{url:_("https://toools-gcr-service-tnoires-ew9-prd-htddyedwxa-od.a.run.app"),pollingInterval:_(1e3),pollingMaxAttempts:_(30),version:b(null)}};window.Store=a;function lt(t,e,n){var s,r,i,o,l;e==null&&(e=100);function f(){var h=Date.now()-o;h<e&&h>=0?s=setTimeout(f,e-h):(s=null,n||(l=t.apply(i,r),i=r=null))}var d=function(){i=this,r=arguments,o=Date.now();var h=n&&!s;return s||(s=setTimeout(f,e)),h&&(l=t.apply(i,r),i=r=null),l};return d.clear=function(){s&&(clearTimeout(s),s=null)},d.flush=function(){s&&(l=t.apply(i,r),i=r=null,clearTimeout(s),s=null)},d}lt.debounce=lt;var Hn=lt;class Zt extends T{beforeRender(e){this.handleResize=this.handleResize.bind(this),this.state={dpr:_(e.dpr||window.devicePixelRatio||1)}}template(){return u("canvas",{class:"canvas",ref:this.ref("canvas")})}afterMount(){this.context=this.refs.canvas.getContext("2d"),this.handleResize(),window.addEventListener("resize",Hn(this.handleResize,100))}clear(){this.context.clearRect(0,0,this.refs.canvas.width,this.refs.canvas.height)}handleResize(){const e=this.state.dpr.get(),{width:n,height:s}=this.refs.canvas.getBoundingClientRect();this.refs.canvas.width=n*e,this.refs.canvas.height=s*e,this.context.scale(e,e)}}function Kn(t,e){if(e===void 0)throw new Error("You must specify a callback");t===void 0&&(t=30);var n=1e3/t,s=0,r=0;return function(i){s-=i,r+=i,s<=0&&(e(r),r=0,s=n+s%n)}}var He=typeof window>"u"?global:window,re=[],pe=[],ge=[],Y=null,ie=null,xe=!1,vt=!1,wt,X;function Ne(t){t===void 0&&(t=0),ie===null&&(ie=t),X=t-ie,wt+=X,ie=t,Y=xe?null:He.requestAnimationFrame(Ne),xe&&(xe=!1);var e;if(vt){for(e=0;e<ge.length;e++)ge[e](X);for(e=0;e<re.length;e++)re[e](X);for(e=0;e<pe.length;e++)pe[e](X)}else for(e=0;e<re.length;e++)re[e](X)}function Ke(){vt=pe.length>0||ge.length>0}function mt(t,e,n){return!e||!t||~t.indexOf(e)?!1:(n=!!n,n?t.unshift(e):t.push(e),!0)}function bt(t,e){if(!e)return!1;var n=t.indexOf(e);return~n?(t.splice(n,1),t.length===0):!1}function $n(t,e){mt(ge,t,e)&&Ke()}function Vn(t,e){mt(pe,t,e)&&Ke()}function Un(t,e){mt(re,t,e)&&zt()}function Wn(t){bt(ge,t)&&Ke()}function Zn(t,e){bt(pe,t)&&Ke()}function zn(t){bt(re,t)&&yt()}function zt(t){xe=!1,!Y&&(t=!!t,ie=null,t?Ne():Y=He.requestAnimationFrame(Ne))}function qn(){Y||(xe=!0,ie=null,Y=He.requestAnimationFrame(Ne))}function yt(){Y&&(He.cancelAnimationFrame(Y),Y=null)}function Gn(){yt(),re.length=0,pe.length=0,ge.length=0,vt=!1,ie=null,wt=0,X=0}const qt={add:Un,addAfter:Vn,addBefore:$n,remove:zn,removeAfter:Zn,removeBefore:Wn,start:zt,stop:yt,time:wt,dt:X,requestOnce:qn,dispose:Gn},Jn=()=>{a.raf.frameCount.update(t=>++t%a.raf.maxDuration.get())},Gt=Kn(a.raf.fps.current,Jn);function Jt(){a.raf.isRunning.set(!0),qt.add(Gt)}function Xt(){a.raf.isRunning.set(!1),qt.remove(Gt)}function Xn(){a.raf.isRunning.update(t=>!t),a.raf.isRunning.get()?Jt():Xt()}const F={start:Jt,stop:Xt,toggle:Xn},ct=(t,{round:e=!0}={})=>{const n=s=>e?Math.round(s):s;if(window.TouchEvent&&t instanceof TouchEvent){const s=t.targetTouches[0];return s?[n(s.clientX),n(s.clientY)]:[-1,-1]}return t.pointerType==="pen"?[n(t.clientX),n(t.clientY),t.pressure]:[n(t.clientX),n(t.clientY)]};let Yn=class extends T{beforeRender(e){this.update=this.update.bind(this),this.handleTick=this.handleTick.bind(this),this.handlePointerDown=this.handlePointerDown.bind(this),this.handlePointerMove=this.handlePointerMove.bind(this),this.handlePointerUp=this.handlePointerUp.bind(this),this.state={isDisabled:e["store-disabled"]||b(e.disabled),penDown:b(!1),penPosition:b([-1,-1]),line:b(null)}}template(e,n){return u("section",{class:"drawer","store-class-has-pen-down":n.penDown,"store-class-is-disabled":n.isDisabled,"event-pointerDown":this.handlePointerDown,"event-pointerMove":this.handlePointerMove,"event-pointerUp":this.handlePointerUp,style:"touch-action: none"},u(Zt,{ref:this.ref("canvas")}))}afterRender(){this.state.line.subscribe(this.update),a.raf.frameCount.subscribe(this.handleTick)}update(){this.refs.canvas.clear();const e=this.state.line.get();e&&e.render(this.refs.canvas.context,{frame:a.raf.frameCount.get(),fillMode:"AB"})}handlePointerDown(e){this.base.setPointerCapture(e.pointerId),this.state.penDown.set(!0),this.state.penPosition.set(ct(e));const n=new gt({firstFrame:a.raf.frameCount.get(),drawMode:a.app.drawMode.get(),fillMode:a.app.fillMode.get(),style:a.app.style.get()});this.state.line.set(n)}handlePointerMove(e){this.state.penDown.get()&&(a.app.fillMode.get()!=="AB"?F.start():(F.stop(),window.requestAnimationFrame(this.handleTick)),this.state.penPosition.set(ct(e)))}handleTick(){if(!this.state.penDown.get())return;const e=this.state.line.get();if(e){if(e.fillMode!=="AB"&&e.firstFrame+e.points.length>=a.raf.maxDuration.get()){this.handlePointerUp();return}this.state.line.update(n=>(n.push(this.state.penPosition.get()),n),!0)}}handlePointerUp(e){e&&this.base.releasePointerCapture(e.pointerId),this.state.penDown.set(!1);const n=this.state.line.get();this.state.line.set(null),!(!n||n.isEmpty)&&a.app.lines.update(s=>(s.push(n),s),!0)}};const Qn=t=>t[t.length-1];class es extends T{beforeRender(e){this.handleClick=this.handleClick.bind(this),this.state={isDisabled:e["store-disabled"]||b(e.disabled)}}template(e,n){return u("section",{class:"paster","store-class-is-disabled":n.isDisabled,"event-click":this.handleClick})}handleClick(e){const n=Qn(a.app.lines.get());if(!n)return;const[s,r]=ct(e),i=n.clone({offset:[-(n.points[0][0]-s),-(n.points[0][1]-r)],firstFrame:a.raf.frameCount.get(),style:Object.assign({},n.style,a.app.style.current),drawMode:a.app.drawMode.get(),fillMode:a.app.fillMode.get()});!e.shiftKey&&a.app.fillMode.get()!=="AB"&&F.start(),a.app.lines.update(o=>(o.push(i),o),!0)}}class ts extends T{beforeRender(){this.updateGhost=this.updateGhost.bind(this),this.updateCanvas=this.updateCanvas.bind(this),this.state={ghostPathData:b("")}}template(e,n){return u("section",{class:"renderer"},u("svg",null,u("path",{class:"ghost","store-d":n.ghostPathData})),u(Zt,{ref:this.ref("canvas")}))}afterRender(){a.app.lines.subscribe(this.updateGhost),a.app.lines.subscribe(this.updateCanvas),a.app.viewMode.subscribe(this.updateCanvas),a.raf.frameCount.subscribe(this.updateCanvas)}afterMount(){this.updateGhost(),this.updateCanvas()}updateGhost(){const e=a.app.lines.get();if(!e||!e.length){this.state.ghostPathData.set("");return}for(const n of e)n.hasGhost||n.fillMode!=="AB"&&(n.points.length<=5||(this.state.ghostPathData.current+=n.pathData+" ",n.hasGhost=!0));this.state.ghostPathData.trigger()}updateCanvas(){this.refs.canvas.clear();const e=a.raf.frameCount.get(),{context:n}=this.refs.canvas;for(const s of a.app.lines.get())s.render(n,{frame:e,smoothed:!0})}}var oe={},ns={get exports(){return oe},set exports(t){oe=t}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(t){(function(){var e={}.hasOwnProperty;function n(){for(var s=[],r=0;r<arguments.length;r++){var i=arguments[r];if(i){var o=typeof i;if(o==="string"||o==="number")s.push(i);else if(Array.isArray(i)){if(i.length){var l=n.apply(null,i);l&&s.push(l)}}else if(o==="object"){if(i.toString!==Object.prototype.toString&&!i.toString.toString().includes("[native code]")){s.push(i.toString());continue}for(var f in i)e.call(i,f)&&i[f]&&s.push(f)}}}return s.join(" ")}t.exports?(n.default=n,t.exports=n):window.classNames=n})()})(ns);class P extends T{beforeRender(e){this.animate=this.animate.bind(this),this.handleClick=this.handleClick.bind(this),this.state={label:e["store-label"]||_(e.label),isWaiting:e["store-is-waiting"]||b(!1),isDisabled:e["store-disabled"]||b(e.disabled),isHidden:e["store-hidden"]||b(e.hidden)}}template(e,n){return u("button",{class:oe("button",e.class),"store-class-is-waiting":n.isWaiting,"store-disabled":n.isDisabled,"store-hidden":n.isHidden,"event-click":this.handleClick,"event-mouseenter":e["event-mouseenter"]||U,"event-mouseleave":e["event-mouseleave"]||U,title:e.title,style:e.style,type:e.type},e.icon&&u("div",{class:"button__icon",ref:this.ref("icon"),innerHTML:e.icon}),u("div",{class:"button__text","store-innerHTML":n.label}))}afterRender(){this.state.isHidden.subscribe(this.animate)}animate(){this&&this.refs&&this.refs.icon&&(this.refs.icon.style.animation="none",this.refs.icon.offsetHeight,this.refs.icon.style.animation=null)}async handleClick(e){if(this.state.isWaiting.get())return e.preventDefault();this.animate(),this.state.isWaiting.set(!0),await(this.props["event-click"]||U)(e),this.mounted&&this.state.isWaiting.set(!1)}}class ut extends T{beforeRender(e){this.update=this.update.bind(this),this.handleChange=this.handleChange.bind(this),this.state={label:e["store-label"]||_(e.label),value:e["store-value"]||b(e.value),autofocus:e["store-autofocus"]||_(e.autofocus),placeholder:e["store-placeholder"]||_(e.placeholder),min:e["store-min"]||_(e.min),max:e["store-max"]||_(e.max),step:e["store-step"]||_(e.step),isWaiting:e["store-is-waiting"]||b(!1),isDisabled:e["store-disabled"]||b(e.disabled),isHidden:e["store-hidden"]||b(e.hidden)}}template(e,n){return u("div",{class:oe("input",e.class),"store-disabled":n.isDisabled,"store-hidden":n.isHidden,style:e.style,"event-click":s=>{this.refs.input.select(),this.refs.input.focus()}},e.label&&u("label",{innerHTML:e.label}),u("input",{ref:this.ref("input"),"event-input":this.update,"event-change":this.handleChange,type:e.type,size:e.size,"store-value":n.value,"store-autofocus":n.autofocus,"store-placeholder":n.placeholder,"store-min":n.min,"store-max":n.max,"store-step":n.step}),e.after&&u("div",{class:"input__before",innerHTML:e.after}))}afterMount(){this.state.value.subscribe(this.update),this.update()}update(){if(this.props.size==="auto"){const e=(String(this.refs.input.value)||"").length||(this.props.placeholder||"").length||1;this.refs.input.style.width=e+"ch"}}handleChange(){this.props.min!==void 0&&this.refs.input.value<this.props.min&&(this.refs.input.value=this.props.min),this.props.max!==void 0&&this.refs.input.value>this.props.max&&(this.refs.input.value=this.props.max),this.state.value.set(this.refs.input.type==="number"?+this.refs.input.value:this.refs.input.value)}}let ss=t=>crypto.getRandomValues(new Uint8Array(t)),rs=(t,e,n)=>{let s=(2<<Math.log(t.length-1)/Math.LN2)-1,r=-~(1.6*s*e/t.length);return(i=e)=>{let o="";for(;;){let l=n(r),f=r;for(;f--;)if(o+=t[l[f]&s]||"",o.length===i)return o}}},is=(t,e=21)=>rs(t,e,ss);var ft={},os={get exports(){return ft},set exports(t){ft=t}};(function(t,e){(function(n,s){s()})(Me,function(){function n(d,h){return typeof h>"u"?h={autoBom:!1}:typeof h!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),h={autoBom:!h}),h.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(d.type)?new Blob(["\uFEFF",d],{type:d.type}):d}function s(d,h,w){var p=new XMLHttpRequest;p.open("GET",d),p.responseType="blob",p.onload=function(){f(p.response,h,w)},p.onerror=function(){console.error("could not download file")},p.send()}function r(d){var h=new XMLHttpRequest;h.open("HEAD",d,!1);try{h.send()}catch{}return 200<=h.status&&299>=h.status}function i(d){try{d.dispatchEvent(new MouseEvent("click"))}catch{var h=document.createEvent("MouseEvents");h.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),d.dispatchEvent(h)}}var o=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Me=="object"&&Me.global===Me?Me:void 0,l=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),f=o.saveAs||(typeof window!="object"||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!l?function(d,h,w){var p=o.URL||o.webkitURL,C=document.createElement("a");h=h||d.name||"download",C.download=h,C.rel="noopener",typeof d=="string"?(C.href=d,C.origin===location.origin?i(C):r(C.href)?s(d,h,w):i(C,C.target="_blank")):(C.href=p.createObjectURL(d),setTimeout(function(){p.revokeObjectURL(C.href)},4e4),setTimeout(function(){i(C)},0))}:"msSaveOrOpenBlob"in navigator?function(d,h,w){if(h=h||d.name||"download",typeof d!="string")navigator.msSaveOrOpenBlob(n(d,w),h);else if(r(d))s(d,h,w);else{var p=document.createElement("a");p.href=d,p.target="_blank",setTimeout(function(){i(p)})}}:function(d,h,w,p){if(p=p||open("","_blank"),p&&(p.document.title=p.document.body.innerText="downloading..."),typeof d=="string")return s(d,h,w);var C=d.type==="application/octet-stream",O=/constructor/i.test(o.HTMLElement)||o.safari,A=/CriOS\/[\d]+/.test(navigator.userAgent);if((A||C&&O||l)&&typeof FileReader<"u"){var le=new FileReader;le.onloadend=function(){var $=le.result;$=A?$:$.replace(/^data:[^;]*;/,"data:attachment/file;"),p?p.location.href=$:location=$,p=null},le.readAsDataURL(d)}else{var Oe=o.URL||o.webkitURL,K=Oe.createObjectURL(d);p?p.location=K:location.href=K,p=null,setTimeout(function(){Oe.revokeObjectURL(K)},4e4)}});o.saveAs=f.saveAs=f,t.exports=f})})(os);const as=ft,dt=t=>a.api.url.get()+"/api/"+t,ls={timer:null,attempts:0,start:function(){if(this.stop(),!(!a.api||!a.api.url.get())){if(this.attempts>=a.api.pollingMaxAttempts.get()){console.warn("api max polling attempts reached"),a.api=null,console.error("Impossible de contacter l’API: l’export PDF ne sera pas disponible.");return}this.timer=setTimeout(async()=>{this.attempts++;try{const e=await(await fetch(dt("version"),{method:"GET"})).json();if(!e||!e.version)throw new Error("Ping malformed");a.api.version.set(e.version)}catch{this.start()}},a.api.pollingInterval.get())}},stop:function(){clearTimeout(this.timer)}},Ct={polling:ls,import:async t=>{const e=await fetch(dt("json/"+t));if(!e.ok&&e.status!==500)throw e;const n=e.json();if(n.error)throw new Error(n.error);return n},export:async(t,e)=>{const n=await fetch(dt(e?"json?uid="+e:"json"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok&&n.status!==500)throw n;const s=n.json();if(s.error)throw new Error(s.error);return s}};const kt=`<svg width="24" height="24" stroke-width="1.5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M6.75827 17.2426L12.0009 12M17.2435 6.75736L12.0009 12M12.0009 12L6.75827 6.75736M12.0009 12L17.2435 17.2426" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
`;let De=class extends T{beforeRender(){this.destroy=this.destroy.bind(this)}template(e){return u("div",{class:"modal__wrapper",...e.bigText&&{"event-click":this.destroy}},u("section",{class:oe("modal",e.class,{"big-text":e.bigText})},u("header",{class:"modal__header"},u("h2",{class:"modal__title"},e.title),u(P,{icon:kt,"event-click":this.destroy})),u("div",{class:"modal__content"},e.children)))}beforeDstroy(){this.destroyed||(this.props["event-close"]||U)()}};const Yt=`<svg width="24" height="24" stroke-width="1.5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M5 13L9 17L19 7" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
`;function cs(t,e){W(u(De,{...e,bigText:!0},e.url?u("a",{href:e.url},t):t))}function us(t,e){W(u(De,{...e},t))}async function fs(t,{title:e="Valeur demandée",yes:n="Valider",no:s="Annuler",type:r="text",value:i=void 0,icon:o=null,before:l=null,after:f=null,placeholder:d=null,onCancel:h=()=>null}={}){return new Promise(w=>{const p={},C=async()=>{w(p.input.state.value.get()),p.modal.destroy()},O=()=>{w(),p.modal.destroy()};W(u(De,{ref:A=>{p.modal=A},"event-close":O},u("form",{"event-submit":async A=>{A.preventDefault(),C()}},u(ut,{autofocus:!0,label:t,ref:A=>{p.input=A},value:i,icon:o,placeholder:d,type:r,before:l,after:f})),u("footer",null,u("fieldset",{class:"group"},u(P,{"event-click":O,icon:kt,label:s}),u(P,{"event-click":C,icon:Yt,label:n,type:"submit"})))))})}function ds(t,{title:e="Action requise",yes:n="Valider",no:s="Annuler",onYes:r=()=>!0,onNo:i=()=>!1,onCancel:o=()=>null}={}){return new Promise(l=>{let f;W(u(De,{ref:w=>{f=w},"event-close":async()=>l(await o(this))},t,u("footer",null,u("fieldset",{class:"group"},u(P,{"event-click":async()=>{l(await i(this)),f.destroy()},icon:kt,label:s}),u(P,{"event-click":async()=>{l(await r(this)),f.destroy()},icon:Yt,label:n})))))})}function hs(t){const e=t instanceof Response?"api":t instanceof Error?"internal":"unknown";W(u(De,{title:e==="api"?"Erreur de l’API":"Erreur"},e==="internal"&&[u("p",null,t.message),u("pre",{class:"stacktrace"},t.stack)],e==="api"&&[u("p",null,"[",t.status,"] ",t.statusText),u("pre",{class:"stacktrace"},t.message)],e==="unknown"&&[u("p",null,"Une erreur inconnue est survenue")]))}const _e={bigText:cs,say:us,prompt:fs,confirm:ds,error:hs},ps=is("0123456789ABCDEF",6);async function gs({force:t=!1}={}){!t&&!await _e.confirm("Tout effacer ?")||(a.app.lines.set([]),a.app.inputMode.set("draw"))}function vs(){a.app.lines.update(t=>t.slice(0,t.length-1),!0),a.app.lines.current.length||a.app.inputMode.set("draw")}async function ws(){const t=a.app.lines.current.map(e=>e.toJSON());try{const{uid:e}=await Ct.export(t,ps()),n=new URL(window.location);n.searchParams.append("uid",e),_e.bigText(e,{url:n})}catch(e){_e.error(e)}}async function ms(t){a.api.version.get()||await new Promise(e=>a.api.version.subscribeOnce(e));try{const e=await Ct.import(t);a.app.lines.set(e.map(gt.build)),F.start()}catch(e){e.status&&e.status===404?_e.say("Impossible de trouver l’animation demandée",{title:"Erreur"}):_e.error(e)}}async function bs(){const t=a.app.lines.current.map(n=>n.toJSON()),e=JSON.stringify(t,null,2);return as.saveAs(new Blob([e],{mimetype:"application/json"}),Date.now()+".json")}const ae={clear:gs,undo:vs,save:ws,load:ms,download:bs},ys=`<svg width="24" height="24" stroke-width="1.5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M3 19V5C3 3.89543 3.89543 3 5 3H16.1716C16.702 3 17.2107 3.21071 17.5858 3.58579L20.4142 6.41421C20.7893 6.78929 21 7.29799 21 7.82843V19C21 20.1046 20.1046 21 19 21H5C3.89543 21 3 20.1046 3 19Z" stroke="currentColor" stroke-width="1.5"/>
<path d="M8.6 9H15.4C15.7314 9 16 8.73137 16 8.4V3.6C16 3.26863 15.7314 3 15.4 3H8.6C8.26863 3 8 3.26863 8 3.6V8.4C8 8.73137 8.26863 9 8.6 9Z" stroke="currentColor" stroke-width="1.5"/>
<path d="M6 13.6V21H18V13.6C18 13.2686 17.7314 13 17.4 13H6.6C6.26863 13 6 13.2686 6 13.6Z" stroke="currentColor" stroke-width="1.5"/>
</svg>
`,Cs=`<svg width="24" height="24" viewBox="0 0 24 24" stroke-width="1.5" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M4 21.4V2.6C4 2.26863 4.26863 2 4.6 2H16.2515C16.4106 2 16.5632 2.06321 16.6757 2.17574L19.8243 5.32426C19.9368 5.43679 20 5.5894 20 5.74853V21.4C20 21.7314 19.7314 22 19.4 22H4.6C4.26863 22 4 21.7314 4 21.4Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M8 10L16 10" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M8 18L16 18" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M8 14L12 14" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M16 2V5.4C16 5.73137 16.2686 6 16.6 6H20" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
`,ks=`<svg width="24" height="24" stroke-width="1.5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M6.90588 4.53682C6.50592 4.2998 6 4.58808 6 5.05299V18.947C6 19.4119 6.50592 19.7002 6.90588 19.4632L18.629 12.5162C19.0211 12.2838 19.0211 11.7162 18.629 11.4838L6.90588 4.53682Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
`,Ms=`<svg width="24" height="24" stroke-width="1.5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M6 18.4V5.6C6 5.26863 6.26863 5 6.6 5H9.4C9.73137 5 10 5.26863 10 5.6V18.4C10 18.7314 9.73137 19 9.4 19H6.6C6.26863 19 6 18.7314 6 18.4Z" stroke="currentColor" stroke-width="1.5"/>
<path d="M14 18.4V5.6C14 5.26863 14.2686 5 14.6 5H17.4C17.7314 5 18 5.26863 18 5.6V18.4C18 18.7314 17.7314 19 17.4 19H14.6C14.2686 19 14 18.7314 14 18.4Z" stroke="currentColor" stroke-width="1.5"/>
</svg>
`;class xs extends T{beforeRender(){this.update=this.update.bind(this),this.handleChange=this.handleChange.bind(this)}template(e,n){return u("section",{class:"timeline"},u("fieldset",{class:"group"},u(P,{icon:Ms,"store-hidden":ot(a.raf.isRunning),"event-click":F.stop}),u(P,{icon:ks,"store-hidden":a.raf.isRunning,"event-click":F.start}),u("input",{type:"range",ref:this.ref("input"),"event-input":this.handleChange,"event-focus":s=>s.target.blur(),step:"1","store-value":a.raf.frameCount,"store-max":a.raf.maxDuration}),a.app.proMode.get()&&[u(ut,{type:"number",size:"auto","store-value":a.raf.frameCount,after:"/",min:0,style:"gap: var(--gutter-internal)","store-max":a.raf.maxDuration}),u(ut,{type:"number",size:"auto",style:"border-left: 0; padding-left: 0","store-value":a.raf.maxDuration,min:a.raf.fps.get(),after:" frames",max:1e4})]),u("fieldset",{class:"group"},u(P,{icon:Cs,"event-click":ae.download,"store-hidden":ot(a.app.proMode),"store-disabled":Q(a.app.lines,s=>!s.length)}),u(P,{icon:ys,"event-click":ae.save,"store-disabled":Q([a.api.version,a.app.lines],()=>!(a.app.lines.current.length&&a.api.version.current))})))}afterRender(){a.raf.frameCount.subscribe(this.update)}update(){const e=a.raf.frameCount.get();this.refs.input.value=e}handleChange(e){F.stop(),a.raf.frameCount.set(+e.target.value)}}const ht=`<svg width="24" height="24" stroke-width="1.5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
`;class _s extends T{beforeRender(e){this.handleValue=this.handleValue.bind(this),this.state={value:e["store-value"]||b(e.value),isDisabled:e["store-disabled"]||b(e.disabled),isHidden:e["store-hidden"]||b(e.hidden)}}template(e,n){return u("div",{class:oe("color-picker",e.class)},u("input",{type:"color",ref:this.ref("input"),"store-value":n.value,"event-input":s=>this.state.value.set(s.target.value)}),u(P,{icon:ht,"store-disabled":n.isDisabled,"store-hidden":n.isHidden,"event-click":s=>this.refs.input.click()}))}afterMount(){this.state.value.subscribe(this.handleValue),this.handleValue()}handleValue(){const e=this.state.value.get();e?this.base.style.setProperty("--color",e):this.base.style.removeProperty("--color"),(this.props["event-change"]||U)(e||"white")}}class fe extends T{beforeRender(e){this.update=this.update.bind(this),this.state={value:e["store-value"]||b(((e.values||[])[0]||{}).value)}}template(e,n){return u("div",{class:oe("switcher",e.class)},e.values.map((s,r)=>u(P,{...s,ref:this.refArray("buttons"),"event-click":()=>this.handleChange(this.props.values[(r+1)%this.props.values.length])})))}afterMount(){this.state.value.subscribe(this.update),this.update()}update(){const e=this.props.values.findIndex(({value:n})=>n===this.state.value.current);for(let n=0;n<this.refs.buttons.length;n++)this.refs.buttons[n].state.isHidden.set(n!==e)}handleChange(e){(this.props["event-change"]||U)(e.value),this.state.value.set(e.value)}}const Ls=`<svg width="24" height="24" viewBox="0 0 24 24" stroke-width="1.5" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M20 9L18.005 20.3463C17.8369 21.3026 17.0062 22 16.0353 22H7.96474C6.99379 22 6.1631 21.3026 5.99496 20.3463L4 9" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M21 6L15.375 6M3 6L8.625 6M8.625 6V4C8.625 2.89543 9.52043 2 10.625 2H13.375C14.4796 2 15.375 2.89543 15.375 4V6M8.625 6L15.375 6" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
`,As=`<svg width="24" height="24" viewBox="0 0 24 24" stroke-width="1.5" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M4.5 8C8.5 8 11 8 15 8C15 8 15 8 15 8C15 8 20 8 20 12.7059C20 18 15 18 15 18C11.5714 18 9.71429 18 6.28571 18" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M7.5 11.5C6.13317 10.1332 5.36683 9.36683 4 8C5.36683 6.63317 6.13317 5.86683 7.5 4.5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
`,Es=`<svg width="24" height="24" stroke-width="1.5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M9 2L15 2" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M12 10L12 14" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M12 22C16.4183 22 20 18.4183 20 14C20 9.58172 16.4183 6 12 6C7.58172 6 4 9.58172 4 14C4 18.4183 7.58172 22 12 22Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
`;class Ds extends T{beforeRender(){this.state={hasNoLines:Q(a.app.lines,e=>!e.length)}}template(e,n){return u("section",{class:"toolbar"},u("fieldset",null,u(fe,{"store-disabled":n.hasNoLines,"store-value":a.app.inputMode,values:a.INPUT_MODES.get()}),u("fieldset",{class:"group"},a.app.proMode.get()&&u(fe,{"store-value":a.app.drawMode,values:a.DRAW_MODES.get()}),u(fe,{values:Object.entries(a.LINE_WIDTHS.get()).map(([s,r])=>({value:r,icon:ht,class:`disc disc-${s}`})),"event-change":s=>{a.app.style.update(r=>({...r,...s}),!0)}}),a.app.proMode.get()?u(_s,{"event-change":s=>{a.app.style.update(r=>({...r,strokeStyle:s}),!0)}}):u(fe,{values:a.COLORS.get().map(({label:s,value:r})=>({value:r,icon:ht,class:"disc",style:`--color: ${r}`})),"event-change":s=>{a.app.style.update(r=>({...r,strokeStyle:s}),!0)}})),u(fe,{values:a.FILL_MODES.get().map(({value:s,icon:r})=>({value:s,icon:r||Es,label:s.replace(/(→)/g,"&thinsp;$1&thinsp;")})),"event-change":s=>a.app.fillMode.set(s)})),u("fieldset",null,u(fe,{class:"view-mode",values:a.VIEW_MODES.get(),"store-value":a.app.viewMode}),u("fieldset",{class:"group"},u(P,{icon:As,"store-disabled":n.hasNoLines,"event-click":ae.undo}),u(P,{icon:Ls,"store-disabled":Q(a.app.lines,s=>!s.length),"event-click":ae.clear}))))}}class Os extends T{template(e){return u("main",{class:"app","store-data-view-mode":a.app.viewMode},u(Ds,null),u("div",{class:"app__main"},u(Yn,{"store-disabled":Q(a.app.inputMode,n=>n!=="draw")}),u(es,{"store-disabled":Q(a.app.inputMode,n=>n!=="paste")}),u(ts,null)),u(xs,null))}}const js=`<svg width='100%' height='100%' viewBox='0 0 116 100'>
  <path d='M57.734,82.319C39.884,82.319 25.414,67.85 25.414,50C25.414,32.15 39.884,17.681 57.734,17.681C75.584,17.681 90.053,32.15 90.053,50C90.053,67.85 75.584,82.319 57.734,82.319M86.603,-0L28.867,-0L0,50L28.867,100L86.603,100L115.47,50L86.603,-0Z' />
</svg>
`,Ps=`<svg width="24" height="24" stroke-width="1.5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M21.8883 13.5C21.1645 18.3113 17.013 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C16.1006 2 19.6248 4.46819 21.1679 8" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M17 8H21.4C21.7314 8 22 7.73137 22 7.4V3" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
`;class It extends T{beforeRender(e){this.handleClick=this.handleClick.bind(this),this.state={hasNoLines:Q(a.app.lines,n=>!n.length)}}template(e,n){return u("section",{class:"splashscreen"},u("div",{class:"splashscreen__content"},u("div",{class:"splashscreen__icon",innerHTML:js}),e.loading?u(P,{label:"Chargement…","store-is-waiting":_(!0)}):u("fieldset",{"store-class-group":ot(n.hasNoLines)},u(P,{label:"Nouveau dessin",icon:at,"event-click":s=>{a.app.lines.set([]),this.handleClick(s)}}),u(P,{icon:Ps,"store-hidden":n.hasNoLines,"event-click":this.handleClick}))))}async handleClick(e){!e.shiftKey&&document.body.requestFullscreen&&await document.body.requestFullscreen(),this.destroy()}}var et=typeof navigator<"u"?navigator.userAgent.toLowerCase().indexOf("firefox")>0:!1;function tt(t,e,n,s){t.addEventListener?t.addEventListener(e,n,s):t.attachEvent&&t.attachEvent("on".concat(e),function(){n(window.event)})}function Qt(t,e){for(var n=e.slice(0,e.length-1),s=0;s<n.length;s++)n[s]=t[n[s].toLowerCase()];return n}function en(t){typeof t!="string"&&(t=""),t=t.replace(/\s/g,"");for(var e=t.split(","),n=e.lastIndexOf("");n>=0;)e[n-1]+=",",e.splice(n,1),n=e.lastIndexOf("");return e}function Ss(t,e){for(var n=t.length>=e.length?t:e,s=t.length>=e.length?e:t,r=!0,i=0;i<n.length;i++)s.indexOf(n[i])===-1&&(r=!1);return r}var Le={backspace:8,"⌫":8,tab:9,clear:12,enter:13,"↩":13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_multiply:106,num_add:107,num_enter:108,num_subtract:109,num_decimal:110,num_divide:111,"⇪":20,",":188,".":190,"/":191,"`":192,"-":et?173:189,"=":et?61:187,";":et?59:186,"'":222,"[":219,"]":221,"\\":220},H={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,cmd:91,command:91},pt={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91},D={16:!1,18:!1,17:!1,91:!1},L={};for(var Fe=1;Fe<20;Fe++)Le["f".concat(Fe)]=111+Fe;var y=[],Nt=!1,tn="all",nn=[],$e=function(e){return Le[e.toLowerCase()]||H[e.toLowerCase()]||e.toUpperCase().charCodeAt(0)},Rs=function(e){return Object.keys(Le).find(function(n){return Le[n]===e})},Ts=function(e){return Object.keys(H).find(function(n){return H[n]===e})};function sn(t){tn=t||"all"}function Ae(){return tn||"all"}function Bs(){return y.slice(0)}function Fs(){return y.map(function(t){return Rs(t)||Ts(t)||String.fromCharCode(t)})}function Is(t){var e=t.target||t.srcElement,n=e.tagName,s=!0;return(e.isContentEditable||(n==="INPUT"||n==="TEXTAREA"||n==="SELECT")&&!e.readOnly)&&(s=!1),s}function Ns(t){return typeof t=="string"&&(t=$e(t)),y.indexOf(t)!==-1}function Hs(t,e){var n,s;t||(t=Ae());for(var r in L)if(Object.prototype.hasOwnProperty.call(L,r))for(n=L[r],s=0;s<n.length;)n[s].scope===t?n.splice(s,1):s++;Ae()===t&&sn(e||"all")}function Ks(t){var e=t.keyCode||t.which||t.charCode,n=y.indexOf(e);if(n>=0&&y.splice(n,1),t.key&&t.key.toLowerCase()==="meta"&&y.splice(0,y.length),(e===93||e===224)&&(e=91),e in D){D[e]=!1;for(var s in H)H[s]===e&&(V[s]=!1)}}function $s(t){if(typeof t>"u")Object.keys(L).forEach(function(o){return delete L[o]});else if(Array.isArray(t))t.forEach(function(o){o.key&&nt(o)});else if(typeof t=="object")t.key&&nt(t);else if(typeof t=="string"){for(var e=arguments.length,n=new Array(e>1?e-1:0),s=1;s<e;s++)n[s-1]=arguments[s];var r=n[0],i=n[1];typeof r=="function"&&(i=r,r=""),nt({key:t,scope:r,method:i,splitKey:"+"})}}var nt=function(e){var n=e.key,s=e.scope,r=e.method,i=e.splitKey,o=i===void 0?"+":i,l=en(n);l.forEach(function(f){var d=f.split(o),h=d.length,w=d[h-1],p=w==="*"?"*":$e(w);if(L[p]){s||(s=Ae());var C=h>1?Qt(H,d):[];L[p]=L[p].filter(function(O){var A=r?O.method===r:!0;return!(A&&O.scope===s&&Ss(O.mods,C))})}})};function Ht(t,e,n,s){if(e.element===s){var r;if(e.scope===n||e.scope==="all"){r=e.mods.length>0;for(var i in D)Object.prototype.hasOwnProperty.call(D,i)&&(!D[i]&&e.mods.indexOf(+i)>-1||D[i]&&e.mods.indexOf(+i)===-1)&&(r=!1);(e.mods.length===0&&!D[16]&&!D[18]&&!D[17]&&!D[91]||r||e.shortcut==="*")&&e.method(t,e)===!1&&(t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation&&t.stopPropagation(),t.cancelBubble&&(t.cancelBubble=!0))}}}function Kt(t,e){var n=L["*"],s=t.keyCode||t.which||t.charCode;if(V.filter.call(this,t)){if((s===93||s===224)&&(s=91),y.indexOf(s)===-1&&s!==229&&y.push(s),["ctrlKey","altKey","shiftKey","metaKey"].forEach(function(O){var A=pt[O];t[O]&&y.indexOf(A)===-1?y.push(A):!t[O]&&y.indexOf(A)>-1?y.splice(y.indexOf(A),1):O==="metaKey"&&t[O]&&y.length===3&&(t.ctrlKey||t.shiftKey||t.altKey||(y=y.slice(y.indexOf(A))))}),s in D){D[s]=!0;for(var r in H)H[r]===s&&(V[r]=!0);if(!n)return}for(var i in D)Object.prototype.hasOwnProperty.call(D,i)&&(D[i]=t[pt[i]]);t.getModifierState&&!(t.altKey&&!t.ctrlKey)&&t.getModifierState("AltGraph")&&(y.indexOf(17)===-1&&y.push(17),y.indexOf(18)===-1&&y.push(18),D[17]=!0,D[18]=!0);var o=Ae();if(n)for(var l=0;l<n.length;l++)n[l].scope===o&&(t.type==="keydown"&&n[l].keydown||t.type==="keyup"&&n[l].keyup)&&Ht(t,n[l],o,e);if(s in L){for(var f=0;f<L[s].length;f++)if((t.type==="keydown"&&L[s][f].keydown||t.type==="keyup"&&L[s][f].keyup)&&L[s][f].key){for(var d=L[s][f],h=d.splitKey,w=d.key.split(h),p=[],C=0;C<w.length;C++)p.push($e(w[C]));p.sort().join("")===y.sort().join("")&&Ht(t,d,o,e)}}}}function Vs(t){return nn.indexOf(t)>-1}function V(t,e,n){y=[];var s=en(t),r=[],i="all",o=document,l=0,f=!1,d=!0,h="+",w=!1;for(n===void 0&&typeof e=="function"&&(n=e),Object.prototype.toString.call(e)==="[object Object]"&&(e.scope&&(i=e.scope),e.element&&(o=e.element),e.keyup&&(f=e.keyup),e.keydown!==void 0&&(d=e.keydown),e.capture!==void 0&&(w=e.capture),typeof e.splitKey=="string"&&(h=e.splitKey)),typeof e=="string"&&(i=e);l<s.length;l++)t=s[l].split(h),r=[],t.length>1&&(r=Qt(H,t)),t=t[t.length-1],t=t==="*"?"*":$e(t),t in L||(L[t]=[]),L[t].push({keyup:f,keydown:d,scope:i,mods:r,shortcut:s[l],method:n,key:s[l],splitKey:h,element:o});typeof o<"u"&&!Vs(o)&&window&&(nn.push(o),tt(o,"keydown",function(p){Kt(p,o)},w),Nt||(Nt=!0,tt(window,"focus",function(){y=[]},w)),tt(o,"keyup",function(p){Kt(p,o),Ks(p)},w))}function Us(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"all";Object.keys(L).forEach(function(n){var s=L[n].filter(function(r){return r.scope===e&&r.shortcut===t});s.forEach(function(r){r&&r.method&&r.method()})})}var st={getPressedKeyString:Fs,setScope:sn,getScope:Ae,deleteScope:Hs,getPressedKeyCodes:Bs,isPressed:Ns,filter:Is,trigger:Us,unbind:$s,keyMap:Le,modifier:H,modifierMap:pt};for(var rt in st)Object.prototype.hasOwnProperty.call(st,rt)&&(V[rt]=st[rt]);if(typeof window<"u"){var Ws=window.hotkeys;V.noConflict=function(t){return t&&window.hotkeys===V&&(window.hotkeys=Ws),V},window.hotkeys=V}[{key:"space",description:"Jouer ou stopper l’animation",callback:F.toggle},{key:"left",description:"Reculer d’une image",callback:()=>{F.stop(),a.raf.frameCount.update(t=>Math.max(0,t-1))}},{key:"shift+left",description:"Reculer de 10 images",callback:()=>{F.stop(),a.raf.frameCount.update(t=>Math.max(0,t-10))}},{key:"right",description:"Avancer d’une image",callback:()=>{F.stop(),a.raf.frameCount.update(t=>Math.min(t+1,a.raf.maxDuration.get()))}},{key:"shift+right",description:"Avancer de 10 images",callback:()=>{F.stop(),a.raf.frameCount.update(t=>Math.min(t+10,a.raf.maxDuration.get()))}},{key:"cmd+z",description:"Effacer le dernier dessin",callback:ae.undo},{key:"cmd+x",description:"Tout effacer",callback:ae.clear},{key:"w",description:"Afficher/masquer les dessins à venir",callback:()=>a.app.viewMode.update(t=>t==="wireframe"?"preview":"wireframe")},{key:"tab",description:"Afficher / cacher l’interface",callback:t=>{t.preventDefault(),a.app.viewMode.update(e=>e==="no-ui"?"wireframe":"no-ui")}}].map(Zs);function Zs(t){return t.callback&&!t.disabled&&V(t.key,e=>{t.filter&&t.filter(e)||(e.preventDefault(),e.stopPropagation(),t.callback(e))}),t}console.log("1.5.0-production");const $t=new URLSearchParams(window.location.search).get("uid");(async()=>{if(Ct.polling.start(),$t){const{components:t}=W(u(It,{loading:!0}));await ae.load($t),t[0].destroy()}else W(u(It,null));W(u(Os,null))})();
