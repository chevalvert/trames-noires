(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();function u(t,e){const n={};return n.vnode=!0,n.type=t,n.props=e||{},n.children=[].concat.apply([],[].slice.call(arguments,2)),n.isInstance=t&&t.template&&typeof t.template=="function",n.isComponent=typeof t=="function"&&t.prototype&&typeof t.prototype.render=="function",n.isStateless=typeof t=="function"&&!n.isComponent,n.isDom=typeof t=="string",n}u.f=t=>t.children;function Ve(t,e){for(const n in e)t[n]=e[n];return t}function B(){}function Ut(t,e,n,s){if(s)return{log:B,warn:B,error:B};const r=[];t=t.toUpperCase(),r.push(`%c ${t} `);let i="font-weight:bold;";return e&&(i+=`color:${e};`),n&&(i+=`background-color:${n}`),r.push(i),{log:console.log.bind(console,...r),warn:console.warn.bind(console,...r),error:console.error.bind(console,...r)}}const lt=["nodes","components","refs","domEvents","storeEvents"];class se{constructor(){this.data={};for(let e=0;e<lt.length;e++)this.data[lt[e]]=[]}append(e){for(const n in e)this.data[n]=this.data[n].concat(e[n])}set(e){for(const n in e)this.data[n]=e[n]}get(){return this.data}}const ye=["xlink","xmlns","xml"],Wt=new Set(["placeholder","autoplay","muted","for","webkit-playsinline","playsinline","selected"]);let Te;const Y=(t,e)=>t.substr(0,e.length)===e,zt=t=>(e,n)=>n.classList.toggle(t,e||!1),Be=(t="textContent",e)=>(n,s)=>{e&&t!==(t=t.replace(/^xlink:?/,""))?s.setAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase(),n):(Te=n??"",e||(s[t]=Te),(e||Wt.has(t)||Y(t,"data-"))&&s.setAttribute(t,Te))};function Zt(t,e,n,s,r){if(n!==void 0&&!(e==="__self"||e==="__source")){e==="className"&&(e="class");for(let i=0;i<ye.length;i++)if(Y(e,ye[i])){const o=ye[i].length;e[o]&&e[o]!==":"&&(e=ye[i]+":"+e[o].toLowerCase()+e.substr(o+1,e.length));break}if(e!=="ref"){if(Y(e,"event-")){const i=e.toLowerCase().substring(6);s.append({domEvents:[{el:t,evt:i,fn:n}]})}else if(e==="store"){const i=Array.isArray(n)?n:[n],o=[];for(let a=0,c=i.length;a<c;a++){const f=Array.isArray(i[a])?i[a]:[i[a]],p=f[0],g=f[1],w=f[2]!==void 0?f[2]:!0;p&&o.push({store:p,fn:g,init:w,el:t})}s.append({storeEvents:o})}else if(Y(e,"store-class-")){const i=e.substring(12),o=zt(i);s.append({storeEvents:[{store:n,init:!0,fn:o,el:t}]})}else if(Y(e,"store-")){let i=e.substring(6);i==="text"&&(i="textContent");const o=Be(i,r);s.append({storeEvents:[{store:n,init:!0,fn:o,el:t}]})}else if(!(typeof n=="function"&&Y(e,"on")))if(e==="class"&&!r)t.className=n||"";else if(e==="style")typeof n=="object"?Ve(t.style,n):typeof n=="string"&&(t.style.cssText=n);else if(e!=="list"&&e!=="type"&&!r&&e in t)try{Be(e,r)(n,t)}catch{}else typeof n!="object"&&typeof n!="function"&&Be(e,r)(n,t)}}}function qt(t){return Array.isArray(t)?t:[t]}function ge(t,e){if(Array.isArray(t))return Gt(t,e);if(t instanceof window.Element)return Xt(t);if(t===null||typeof t!="object"||!t.vnode)return Jt(t);const n=Ve(Ve({},t.props),{children:[].concat.apply([],t.children||[])});if(t.isDom)return Yt(t,n,e);if(t.isInstance)return ct(t,n,e,!0);if(t.isStateless)return Qt(t,n,e);if(t.isComponent)return ct(t,n,e)}function Gt(t,e){t=qt(t);const n=new se;for(let s=0;s<t.length;s++)n.append(ge(t[s],e));return n.get()}function Jt(t){const e=new se;return t==null||t===!1||e.append({nodes:document.createTextNode(t+"")}),e.get()}function Yt(t,e,n){const s=new se;let r=[];t.type==="svg"&&(n=!0);for(let o=0;o<e.children.length;o++){const a=ge(e.children[o],n);a.nodes&&(r=r.concat(a.nodes),s.append({components:a.components,refs:a.refs,domEvents:a.domEvents,storeEvents:a.storeEvents}))}const i=n?document.createElementNS("http://www.w3.org/2000/svg",t.type):document.createElement(t.type);for(const o in t.props)Zt(i,o,t.props[o],s,n);for(let o=0;o<r.length;o++)i.appendChild(r[o]);return e.ref&&s.append({refs:{ref:i,fn:e.ref}}),s.append({nodes:i}),s.get()}function Xt(t){const e=new se;return e.append({nodes:t}),e.get()}function Qt(t,e,n){const s=new se,r=t.type(e);return s.append(ge(r,n)),s.get()}function ct(t,e,n,s=!1){const r=new se,i=s?t.type:new t.type(e);s&&(e=i.props),i.beforeRender(e);const o=i.template(e,i.state||{});e.ref&&r.append({refs:{ref:i,fn:e.ref}}),r.append(ge(o,n));const a=r.data.nodes;i.base=a.length>1?a:a[0];for(const c in r.data)c!=="nodes"&&(i._collector[c]||(i._collector[c]=[]),i._collector[c]=i._collector[c].concat(r.data[c]));r.set({components:[i],refs:[],domEvents:[],storeEvents:[]});for(let c=0;c<i._collector.components.length;c++)i._collector.components[c]._parent=i;return r.get()}function X(t,e,n){const s=t._collector&&t._collector.components;if(n&&e(t),s)for(let r=0;r<s.length;r++)X(s[r],e);n||e(t)}function en(t){for(let e=0;e<t._collector.refs.length;e++)t._collector.refs[e].fn(t._collector.refs[e].ref),t._collector.refs[e].ref=null}function tn(t){for(let e=0;e<t._collector.storeEvents.length;e++){const n=t._collector.storeEvents[e],s=n.fn;n.fn=function(r){s(r,n.el)},n.store.subscribe(n.fn),n.init&&n.fn(n.store.current)}}function nn(t){t.test&&console.log("call dom listeners",t._collector.domEvents);for(let e=0;e<t._collector.domEvents.length;e++){const n=t._collector.domEvents[e];n.el.addEventListener(n.evt,n.fn)}}function sn(t){X(t,en)}function rn(t){X(t,nn),X(t,tn)}const on=new Set(["g","svg","defs"]);function F(t,e=document.body,n){let s=0;const r=ge(t,on.has(e.tagName));let i={_collector:r};if(sn(i),X(i,function(o){o.afterRender&&o.afterRender(o.props)}),typeof e=="function"){const o=r.nodes.length<2?r.nodes[0]:r.nodes;e(o)}else if(e)for(s=0;s<r.nodes.length;s++)e.appendChild(r.nodes[s]);if((!n||n.mounted)&&(rn(i),X(i,function(o){o.mounted=!0,o.afterMount&&o.afterMount(o.props)})),n&&n._collector){const o=n._collector;for(s=0;s<r.components.length;s++)r.components[s]._parent=n;o.refs&&(o.refs=o.refs.concat(r.refs)),o.components&&(o.components=o.components.concat(r.components)),o.domEvents&&(o.domEvents=o.domEvents.concat(r.domEvents)),o.storeEvents&&(o.storeEvents=o.storeEvents.concat(r.storeEvents))}return i=void 0,r}class D{constructor(e={}){this._parent=null,this._collector={refs:[],components:[],domEvents:[],storeEvents:[]},this._storeListeners=[],this.refs={},this.state={},this.store={},this.props=e||{},this.base=null,this.mounted=!1,this.destroyed=!1;const n=e.name||this.constructor.name||"Component",{log:s,warn:r,error:i}=Ut(n,"white","#000",e.disableLog);this.log=s,this.warn=r,this.error=i}storeSubscribe(e,n,s,r=!0){e.subscribe(n,s),this._storeListeners.push([e,n,s]),r&&n.call(s,e.current)}template(){}beforeRender(){}afterRender(){}afterMount(){}beforeDestroy(){}ref(e){const n=this;return function(r){n.refs[e]=r}}refArray(e,n=!1){const s=this.refs[e]||(this.refs[e]=[]);let r=s.length,i,o;return n&&(i=this.refs.__pools||(this.refs.__pools={}),o=i[e]||(i[e]=[]),o.length&&(r=o.pop())),s[r]=null,function(c){s[r]=c,n&&o.push(r)}}refMap(e,n){const s=this.refs[n]||(this.refs[n]=new Map);return function(i){i?s.set(e,i):s.delete(e)}}render(e,n){return F(e,n,this)}destroy(){let e=0;for(this.beforeDestroy(this.props),e=this._collector.domEvents.length-1;e>=0;e--){const s=this._collector.domEvents[e];s.el.removeEventListener(s.evt,s.fn)}for(e=this._collector.storeEvents.length-1;e>=0;e--){const s=this._collector.storeEvents[e];s.store.unsubscribe(s.fn)}for(e=this._storeListeners.length-1;e>=0;e--){const s=this._storeListeners[e];s[0].unsubscribe(s[1],s[2])}for(e=this._collector.components.length-1;e>=0;e--)this._collector.components[e].destroy();if(this.mounted=!1,this.destroyed=!0,this._parent){const s=this._parent._collector.components.indexOf(this);~s&&this._parent._collector.components.splice(s,1),this._parent=null}for(e=this._collector.refs.length-1;e>=0;e--)this._collector.refs[e].fn(null),this._collector.refs.splice(e,1);let n=Array.isArray(this.base)?this.base:[this.base];for(e=0;e<n.length;e++)n[e]&&n[e].parentNode&&n[e].parentNode.removeChild(n[e]);this.base=n=null,this.props=null,this.state=null,this.store=null,this.refs=null,this._storeListeners=null}}function ut(t,e,n,s){this.fn=e,this.ctx=n||null,this.owner=t,this.once=!!s}function Fe(t,e){e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),e.ctx=e.fn=e.owner=null,e===t._first&&(t._first=e.next),e===t._last&&(t._last=e.prev)}class an{constructor(){this._first=this._last=null}dispatch(e,n,s,r,i){let o=this._first;for(;o;)o.fn.call(o.ctx,e,n,s,r,i),o.once&&this.unsubscribe(o),o=o.next}trigger(){this.dispatch(this.current)}subscribe(e,n,s){const r=new ut(this,e,n,s);return this._first?(this._last.next=r,r.prev=this._last,this._last=r):(this._first=r,this._last=r),r}subscribeOnce(e,n){return this.subscribe(e,n,!0)}unsubscribe(e,n){if(e instanceof ut)return Fe(this,e);n||(n=null);let s=this._first;for(;s;)s.fn===e&&s.ctx===n&&Fe(this,s),s=s.next}unsubscribeAll(){let e=this._first;for(this._first=this._last=null;e;)Fe(this,e),e=e.next}}class Lt extends an{constructor(e){super(),this.current=e}set(){throw new Error("Cannot set a different value for a Readable Signal. Use Writable instead")}get(){return this.current}}function M(t){return new Lt(t)}class At extends Lt{set(e,n){if(!n&&this.current===e)return;this.previous=this.current,this.current=e;let s=this._first;for(;s;)s.fn.call(s.ctx,this.current,this.previous),s.once&&this.unsubscribe(s),s=s.next}update(e,n){const s=e(this.current);this.set(s!==void 0?s:this.current,n)}}function v(t){return new At(t)}function Q(t,e){const n=new At,s=n.set.bind(n);delete n.set;const r=Array.isArray(t);let i=r?new Array(t.length):null;if(r)for(let a=0,c=t.length;a<c;a++)i[a]=t[a].current,t[a].subscribe(function(f){i[a]=f,o()});else i=t.current,t.subscribe(function(a){i=a,o()});o();function o(){const a=e(i);a&&a.then?a.then(s):s(a)}return n}const ln="trames-noires@1.2.2/";function ft(t,e,{encode:n=JSON.stringify,decode:s=JSON.parse,silent:r=!1}={}){const i=v(e),o=ln+t,a=localStorage.getItem(o);if(a!==null)try{r?i.current=s(a):i.set(s(a))}catch(c){console.warn(`Error while trying to decode ${t} in local storage`),console.error(c)}else localStorage.setItem(o,n(i.current));return i.subscribe(c=>localStorage.setItem(o,n(c))),i}const ht=t=>Q(t,e=>!e);function dt(t,e,n,s=r=>r){return t*s(.5-e*(.5-n))}function cn(t){return[-t[0],-t[1]]}function R(t,e){return[t[0]+e[0],t[1]+e[1]]}function O(t,e){return[t[0]-e[0],t[1]-e[1]]}function j(t,e){return[t[0]*e,t[1]*e]}function un(t,e){return[t[0]/e,t[1]/e]}function le(t){return[t[1],-t[0]]}function pt(t,e){return t[0]*e[0]+t[1]*e[1]}function fn(t,e){return t[0]===e[0]&&t[1]===e[1]}function hn(t){return Math.hypot(t[0],t[1])}function dn(t){return t[0]*t[0]+t[1]*t[1]}function gt(t,e){return dn(O(t,e))}function Et(t){return un(t,hn(t))}function pn(t,e){return Math.hypot(t[1]-e[1],t[0]-e[0])}function ce(t,e,n){let s=Math.sin(n),r=Math.cos(n),i=t[0]-e[0],o=t[1]-e[1],a=i*r-o*s,c=i*s+o*r;return[a+e[0],c+e[1]]}function Ue(t,e,n){return R(t,j(O(e,t),n))}function vt(t,e,n){return R(t,j(e,n))}var{min:G,PI:gn}=Math,mt=.275,ue=gn+1e-4;function vn(t,e={}){let{size:n=16,smoothing:s=.5,thinning:r=.5,simulatePressure:i=!0,easing:o=h=>h,start:a={},end:c={},last:f=!1}=e,{cap:p=!0,easing:g=h=>h*(2-h)}=a,{cap:w=!0,easing:C=h=>--h*h*h+1}=c;if(t.length===0||n<=0)return[];let d=t[t.length-1].runningLength,b=a.taper===!1?0:a.taper===!0?Math.max(n,d):a.taper,re=c.taper===!1?0:c.taper===!0?Math.max(n,d):c.taper,rt=Math.pow(n*s,2),ie=[],q=[],Ae=t.slice(0,10).reduce((h,_)=>{let y=_.pressure;if(i){let k=G(1,_.distance/n),je=G(1,1-k);y=G(1,h+(je-h)*(k*mt))}return(h+y)/2},t[0].pressure),A=dt(n,r,t[t.length-1].pressure,o),Ee,De=t[0].vector,oe=t[0].point,me=oe,V=oe,U=me,Oe=!1;for(let h=0;h<t.length;h++){let{pressure:_}=t[h],{point:y,vector:k,distance:je,runningLength:ae}=t[h];if(h<t.length-1&&d-ae<3)continue;if(r){if(i){let K=G(1,je/n),Se=G(1,1-K);_=G(1,Ae+(Se-Ae)*(K*mt))}A=dt(n,r,_,o)}else A=n/2;Ee===void 0&&(Ee=A);let $t=ae<b?g(ae/b):1,Ht=d-ae<re?C((d-ae)/re):1;A=Math.max(.01,A*Math.min($t,Ht));let it=(h<t.length-1?t[h+1]:t[h]).vector,Re=h<t.length-1?pt(k,it):1,Vt=pt(k,De)<0&&!Oe,ot=Re!==null&&Re<0;if(Vt||ot){let K=j(le(De),A);for(let Se=1/13,be=0;be<=1;be+=Se)V=ce(O(y,K),y,ue*be),ie.push(V),U=ce(R(y,K),y,ue*-be),q.push(U);oe=V,me=U,ot&&(Oe=!0);continue}if(Oe=!1,h===t.length-1){let K=j(le(k),A);ie.push(O(y,K)),q.push(R(y,K));continue}let at=j(le(Ue(it,k,Re)),A);V=O(y,at),(h<=1||gt(oe,V)>rt)&&(ie.push(V),oe=V),U=R(y,at),(h<=1||gt(me,U)>rt)&&(q.push(U),me=U),Ae=_,De=k}let I=t[0].point.slice(0,2),N=t.length>1?t[t.length-1].point.slice(0,2):R(t[0].point,[1,1]),Pe=[],we=[];if(t.length===1){if(!(b||re)||f){let h=vt(I,Et(le(O(I,N))),-(Ee||A)),_=[];for(let y=1/13,k=y;k<=1;k+=y)_.push(ce(h,I,ue*2*k));return _}}else{if(!(b||re&&t.length===1))if(p)for(let _=1/13,y=_;y<=1;y+=_){let k=ce(q[0],I,ue*y);Pe.push(k)}else{let _=O(ie[0],q[0]),y=j(_,.5),k=j(_,.51);Pe.push(O(I,y),O(I,k),R(I,k),R(I,y))}let h=le(cn(t[t.length-1].vector));if(re||b&&t.length===1)we.push(N);else if(w){let _=vt(N,h,A);for(let y=1/29,k=y;k<1;k+=y)we.push(ce(_,N,ue*3*k))}else we.push(R(N,j(h,A)),R(N,j(h,A*.99)),O(N,j(h,A*.99)),O(N,j(h,A)))}return ie.concat(we,q.reverse(),Pe)}function mn(t,e={}){var n;let{streamline:s=.5,size:r=16,last:i=!1}=e;if(t.length===0)return[];let o=.15+(1-s)*.85,a=Array.isArray(t[0])?t:t.map(({x:C,y:d,pressure:b=.5})=>[C,d,b]);if(a.length===2){let C=a[1];a=a.slice(0,-1);for(let d=1;d<5;d++)a.push(Ue(a[0],C,d/4))}a.length===1&&(a=[...a,[...R(a[0],[1,1]),...a[0].slice(2)]]);let c=[{point:[a[0][0],a[0][1]],pressure:a[0][2]>=0?a[0][2]:.25,vector:[1,1],distance:0,runningLength:0}],f=!1,p=0,g=c[0],w=a.length-1;for(let C=1;C<a.length;C++){let d=i&&C===w?a[C].slice(0,2):Ue(g.point,a[C],o);if(fn(g.point,d))continue;let b=pn(d,g.point);if(p+=b,C<w&&!f){if(p<r)continue;f=!0}g={point:d,pressure:a[C][2]>=0?a[C][2]:.5,vector:Et(O(g.point,d)),distance:b,runningLength:p},c.push(g)}return c[0].vector=((n=c[1])==null?void 0:n.vector)||[0,0],c}function wn(t,e={}){return vn(mn(t,e),e)}var bn=function(e,n){return e[0]=n[0],e[1]=n[1],e},wt=bn,yn=function(t,e){Array.isArray(e)||(e=[]),t.length>0&&e.push(wt([0,0],t[0]));for(var n=0;n<t.length-1;n++){var s=t[n],r=t[n+1],i=s[0],o=s[1],a=r[0],c=r[1],f=[.75*i+.25*a,.75*o+.25*c],p=[.25*i+.75*a,.25*o+.75*c];e.push(f),e.push(p)}return t.length>1&&e.push(wt([0,0],t[t.length-1])),e};const Cn=3;function bt(t,{isStroke:e=!1}={}){return t.length<=1?"":e?t.reduce((n,[s,r],i,o)=>{if(i===o.length-1)return n;const[a,c]=o[i+1];return n.concat(` ${s},${r} ${(s+a)/2},${(r+c)/2}`)},["M ",`${t[0][0]},${t[0][1]}`," Q"]).concat("Z").join(""):["M",t[0],"L",t.slice(1)].join(" ")}class Me{constructor({points:e=[],drawMode:n="raw",fillMode:s="AA→AB",firstFrame:r=0,style:i={}}={}){this.points=e,this.drawMode=n,this.fillMode=s,this.firstFrame=r,this.style=i}get isEmpty(){return!this.points||!this.points.length}get pathData(){return this._pathData||(this._pathData=bt(this.points)),this._pathData}push(e){this.points.push(e)}render(e,{frame:n=Number.POSITIVE_INFINITY,drawMode:s=this.drawMode,fillMode:r=this.fillMode,style:i=this.style}={}){if(this.isEmpty||n<this.firstFrame&&r!=="AB")return;e.save();for(const[c,f]of Object.entries(i))c==="lineDash"&&e.setLineDash(f),e[c]=f;const o=[];switch(r){case"AB":o[0]=0,o[1]=this.points.length;break;case"AA→AB":o[0]=0,o[1]=n-this.firstFrame;break;case"AA→BB":o[0]=Math.max(0,n-this.firstFrame-Cn),o[1]=n-this.firstFrame;break;case"AA→AB→BB":o[0]=Math.max(0,n-this.firstFrame-this.points.length/2),o[1]=n-this.firstFrame;break}const a=(()=>{const c=this.points.slice(o[0],o[1]);return!c||!c.length?[]:s==="smooth"?yn(c):s==="freehand"?wn(c,{...i.perfectFreehand,simulatePressure:c[0][2]===void 0,last:c.length===this.points.length}):c})();if(s==="freehand"&&a.length>1)e.fillStyle=e.strokeStyle,e.fill(new Path2D(bt(a,{isStroke:!0})));else{e.beginPath();for(let c=0;c<a.length;c++){const f=a[c];f&&e[c?"lineTo":"moveTo"](f[0],f[1])}e.stroke()}e.restore()}toJSON(){return{points:this.points,drawMode:this.drawMode,fillMode:this.fillMode,firstFrame:this.firstFrame,style:this.style}}}const kn=`<svg width="24" height="24" viewBox="0 0 24 24" stroke-width="1.5" fill="none" xmlns="http://www.w3.org/2000/svg">
<g clip-path="url(#clip0_2585_14438)">
<path d="M17.6744 11.4075L15.7691 17.1233C15.7072 17.309 15.5586 17.4529 15.3709 17.5087L3.69348 20.9803C3.22819 21.1186 2.79978 20.676 2.95328 20.2155L6.74467 8.84131C6.79981 8.67588 6.92419 8.54263 7.08543 8.47624L12.472 6.25822C12.696 6.166 12.9535 6.21749 13.1248 6.38876L17.5294 10.7935C17.6901 10.9542 17.7463 11.1919 17.6744 11.4075Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M3.2959 20.6016L9.65986 14.2376" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M17.7917 11.0557L20.6202 8.22724C21.4012 7.44619 21.4012 6.17986 20.6202 5.39881L18.4989 3.27749C17.7178 2.49645 16.4515 2.49645 15.6704 3.27749L12.842 6.10592" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M11.7814 12.1163C11.1956 11.5305 10.2458 11.5305 9.66004 12.1163C9.07426 12.7021 9.07426 13.6519 9.66004 14.2376C10.2458 14.8234 11.1956 14.8234 11.7814 14.2376C12.3671 13.6519 12.3671 12.7021 11.7814 12.1163Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
</g>
<defs>
<clipPath id="clip0_2585_14438">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>
</svg>
`,Mn=`<svg width="24" height="24" stroke-width="1.5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M9 2L15 2" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M5 7L19 21.5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M12 10L12 14" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M6.1905 8.5C4.83275 9.93366 4 11.8696 4 14C4 18.4183 7.58172 22 12 22C14.0049 22 15.8375 21.2625 17.2413 20.044M19.4185 17C19.7935 16.0736 20 15.0609 20 14C20 9.58172 16.4183 6 12 6C11.0187 6 10.0786 6.17669 9.20988 6.5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
`,xn=`<svg width="24" height="24" viewBox="0 0 24 24" stroke-width="1.5" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M19.5 16L17.0248 12.6038" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M12 17.5V14" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M4.5 16L6.96895 12.6124" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M3 8C6.6 16 17.4 16 21 8" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
`,_n=`<svg width="24" height="24" stroke-width="1.5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M13.8476 13.317L9.50515 18.2798C8.70833 19.1905 7.29167 19.1905 6.49485 18.2798L2.15238 13.317C1.49259 12.563 1.49259 11.437 2.15238 10.683L6.49485 5.72018C7.29167 4.80952 8.70833 4.80952 9.50515 5.72017L13.8476 10.683C14.5074 11.437 14.5074 12.563 13.8476 13.317Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M13 19L17.8844 13.3016C18.5263 12.5526 18.5263 11.4474 17.8844 10.6984L13 5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M17 19L21.8844 13.3016C22.5263 12.5526 22.5263 11.4474 21.8844 10.6984L17 5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
`,yt=`<svg width="24" height="24" viewBox="0 0 24 24" stroke-width="1.5" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M14.3632 5.65156L15.8431 4.17157C16.6242 3.39052 17.8905 3.39052 18.6716 4.17157L20.0858 5.58579C20.8668 6.36683 20.8668 7.63316 20.0858 8.41421L18.6058 9.8942M14.3632 5.65156L4.74749 15.2672C4.41542 15.5993 4.21079 16.0376 4.16947 16.5054L3.92738 19.2459C3.87261 19.8659 4.39148 20.3848 5.0115 20.33L7.75191 20.0879C8.21972 20.0466 8.65806 19.8419 8.99013 19.5099L18.6058 9.8942M14.3632 5.65156L18.6058 9.8942" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
`,Ln=`<svg width="24" height="24" stroke-width="1.5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M3 3L21 21" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M10.5 10.6771C10.1888 11.0296 10 11.4928 10 12C10 13.1045 10.8954 14 12 14C12.5072 14 12.9703 13.8112 13.3229 13.5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M7.36185 7.5611C5.68002 8.73968 4.27894 10.4188 3 12C4.88856 14.991 8.2817 18 12 18C13.5499 18 15.0434 17.4772 16.3949 16.6508" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M12 6C16.0084 6 18.7015 9.1582 21 12C20.6815 12.5043 20.3203 13.0092 19.922 13.5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
`,An=`<svg width="24" height="24" stroke-width="1.5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M12 14C13.1046 14 14 13.1046 14 12C14 10.8954 13.1046 10 12 10C10.8954 10 10 10.8954 10 12C10 13.1046 10.8954 14 12 14Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M21 12C19.1114 14.991 15.7183 18 12 18C8.2817 18 4.88856 14.991 3 12C5.29855 9.15825 7.99163 6 12 6C16.0084 6 18.7015 9.1582 21 12Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
`,l={INPUT_MODES:M([{icon:yt,label:"Dessin",value:"draw"},{icon:_n,label:"Tampon",value:"paste"}]),LINE_WIDTHS:M({medium:{lineWidth:10,perfectFreehand:{size:15,thinning:.65,smoothing:.77,streamline:.6}},large:{lineWidth:20,perfectFreehand:{size:30,thinning:.8,smoothing:.77,streamline:.6}},small:{lineWidth:5,perfectFreehand:{size:7.5,thinning:.5,smoothing:.01,streamline:.6}}}),COLORS:M([{value:"#FFF1E8"},{value:"#FF004D"},{value:"#FFA300"},{value:"#FFEC27"},{value:"#00E436"},{value:"#29ADFF"},{value:"#83769C"},{value:"#FF77A8"},{value:"#FFCCAA"}]),FILL_MODES:M([{value:"AA→AB"},{value:"AA→BB"},{value:"AA→AB→BB"},{value:"AB",icon:Mn}]),VIEW_MODES:M([{value:"wireframe",icon:An},{value:"preview",icon:Ln},{value:"no-ui",icon:xn}]),DRAW_MODES:M([{value:"smooth",icon:yt},{value:"freehand",icon:kn}]),app:{proMode:M(new URLSearchParams(window.location.search).has("pro")),inputMode:v("draw"),fillMode:v("AA→AB"),viewMode:v("wireframe"),drawMode:v("smooth"),lines:ft("app.lines",[],{encode:t=>JSON.stringify(t.map(e=>e.toJSON())),decode:t=>JSON.parse(t||"[]").map(e=>new Me(e))}),style:v({lineWidth:10,strokeStyle:"white",lineJoin:"round",lineCap:"round"})},raf:{fps:M(60),maxDuration:ft("raf.maxDuration",60*5),isRunning:v(!1),frameCount:v(0)},api:{url:M("https://toools-gcr-service-tnoires-ew9-prd-htddyedwxa-od.a.run.app"),pollingInterval:M(1e3),pollingMaxAttempts:M(30),version:v(null)}};window.Store=l;function We(t,e,n){var s,r,i,o,a;e==null&&(e=100);function c(){var p=Date.now()-o;p<e&&p>=0?s=setTimeout(c,e-p):(s=null,n||(a=t.apply(i,r),i=r=null))}var f=function(){i=this,r=arguments,o=Date.now();var p=n&&!s;return s||(s=setTimeout(c,e)),p&&(a=t.apply(i,r),i=r=null),a};return f.clear=function(){s&&(clearTimeout(s),s=null)},f.flush=function(){s&&(a=t.apply(i,r),i=r=null,clearTimeout(s),s=null)},f}We.debounce=We;var En=We;class Dt extends D{beforeRender(e){this.handleResize=this.handleResize.bind(this),this.state={dpr:M(e.dpr||window.devicePixelRatio||1)}}template(){return u("canvas",{class:"canvas",ref:this.ref("canvas")})}afterMount(){this.context=this.refs.canvas.getContext("2d"),this.handleResize(),window.addEventListener("resize",En(this.handleResize,100))}clear(){this.context.clearRect(0,0,this.refs.canvas.width,this.refs.canvas.height)}handleResize(){const e=this.state.dpr.get(),{width:n,height:s}=this.refs.canvas.getBoundingClientRect();this.refs.canvas.width=n*e,this.refs.canvas.height=s*e,this.context.scale(e,e)}}function Dn(t,e){if(e===void 0)throw new Error("You must specify a callback");t===void 0&&(t=30);var n=1e3/t,s=0,r=0;return function(i){s-=i,r+=i,s<=0&&(e(r),r=0,s=n+s%n)}}var xe=typeof window>"u"?global:window,W=[],ee=[],te=[],H=null,z=null,fe=!1,Ye=!1,Xe,$;function ke(t){t===void 0&&(t=0),z===null&&(z=t),$=t-z,Xe+=$,z=t,H=fe?null:xe.requestAnimationFrame(ke),fe&&(fe=!1);var e;if(Ye){for(e=0;e<te.length;e++)te[e]($);for(e=0;e<W.length;e++)W[e]($);for(e=0;e<ee.length;e++)ee[e]($)}else for(e=0;e<W.length;e++)W[e]($)}function _e(){Ye=ee.length>0||te.length>0}function Qe(t,e,n){return!e||!t||~t.indexOf(e)?!1:(n=!!n,n?t.unshift(e):t.push(e),!0)}function et(t,e){if(!e)return!1;var n=t.indexOf(e);return~n?(t.splice(n,1),t.length===0):!1}function On(t,e){Qe(te,t,e)&&_e()}function Pn(t,e){Qe(ee,t,e)&&_e()}function jn(t,e){Qe(W,t,e)&&Ot()}function Rn(t){et(te,t)&&_e()}function Sn(t,e){et(ee,t)&&_e()}function Tn(t){et(W,t)&&tt()}function Ot(t){fe=!1,!H&&(t=!!t,z=null,t?ke():H=xe.requestAnimationFrame(ke))}function Bn(){H||(fe=!0,z=null,H=xe.requestAnimationFrame(ke))}function tt(){H&&(xe.cancelAnimationFrame(H),H=null)}function Fn(){tt(),W.length=0,ee.length=0,te.length=0,Ye=!1,z=null,Xe=0,$=0}const Pt={add:jn,addAfter:Pn,addBefore:On,remove:Tn,removeAfter:Sn,removeBefore:Rn,start:Ot,stop:tt,time:Xe,dt:$,requestOnce:Bn,dispose:Fn},In=()=>{l.raf.frameCount.update(t=>++t%l.raf.maxDuration.get())},jt=Dn(l.raf.fps.current,In);function Rt(){l.raf.isRunning.set(!0),Pt.add(jt)}function St(){l.raf.isRunning.set(!1),Pt.remove(jt)}function Nn(){l.raf.isRunning.update(t=>!t),l.raf.isRunning.get()?Rt():St()}const P={start:Rt,stop:St,toggle:Nn},ze=t=>{if(window.TouchEvent&&t instanceof TouchEvent){const e=t.targetTouches[0];return e?[e.clientX,e.clientY]:[-1,-1]}return t.pointerType==="pen"?[t.clientX,t.clientY,t.pressure]:[t.clientX,t.clientY]};let Kn=class extends D{beforeRender(e){this.update=this.update.bind(this),this.handleTick=this.handleTick.bind(this),this.handlePointerDown=this.handlePointerDown.bind(this),this.handlePointerMove=this.handlePointerMove.bind(this),this.handlePointerUp=this.handlePointerUp.bind(this),this.state={isDisabled:e["store-disabled"]||v(e.disabled),penDown:v(!1),penPosition:v([-1,-1]),line:v(null)}}template(e,n){return u("section",{class:"drawer","store-class-has-pen-down":n.penDown,"store-class-is-disabled":n.isDisabled,"event-pointerDown":this.handlePointerDown,"event-pointerMove":this.handlePointerMove,"event-pointerUp":this.handlePointerUp,style:"touch-action: none"},u(Dt,{ref:this.ref("canvas")}))}afterRender(){this.state.line.subscribe(this.update),l.raf.frameCount.subscribe(this.handleTick)}update(){this.refs.canvas.clear();const e=this.state.line.get();e&&e.render(this.refs.canvas.context,{frame:l.raf.frameCount.get(),fillMode:"AB"})}handlePointerDown(e){this.base.setPointerCapture(e.pointerId),this.state.penDown.set(!0),this.state.penPosition.set(ze(e));const n=new Me({firstFrame:l.raf.frameCount.get(),drawMode:l.app.drawMode.get(),fillMode:l.app.fillMode.get(),style:l.app.style.get()});this.state.line.set(n)}handlePointerMove(e){this.state.penDown.get()&&(l.app.fillMode.get()!=="AB"?P.start():(P.stop(),window.requestAnimationFrame(this.handleTick)),this.state.penPosition.set(ze(e)))}handleTick(){if(!this.state.penDown.get())return;const e=this.state.line.get();if(e){if(e.fillMode!=="AB"&&e.firstFrame+e.points.length>=l.raf.maxDuration.get()){this.handlePointerUp();return}this.state.line.update(n=>(n.push(this.state.penPosition.get()),n),!0)}}handlePointerUp(e){e&&this.base.releasePointerCapture(e.pointerId),this.state.penDown.set(!1);const n=this.state.line.get();this.state.line.set(null),!(!n||n.isEmpty)&&l.app.lines.update(s=>(s.push(n),s),!0)}};const $n=t=>t[t.length-1];class Hn extends D{beforeRender(e){this.handleClick=this.handleClick.bind(this),this.state={isDisabled:e["store-disabled"]||v(e.disabled)}}template(e,n){return u("section",{class:"paster","store-class-is-disabled":n.isDisabled,"event-click":this.handleClick})}handleClick(e){const n=$n(l.app.lines.get());if(!n)return;const[s,r]=ze(e),i=n.points[0][0]-s,o=n.points[0][1]-r,a=new Me({points:n.points.map(([c,f])=>[c-i,f-o]),firstFrame:l.raf.frameCount.get(),style:Object.assign({},n.style,l.app.style.current),drawMode:l.app.drawMode.get(),fillMode:l.app.fillMode.get()});l.app.fillMode.get()!=="AB"&&P.start(),l.app.lines.update(c=>(c.push(a),c),!0)}}class Vn extends D{beforeRender(){this.updateGhost=this.updateGhost.bind(this),this.updateCanvas=this.updateCanvas.bind(this),this.state={ghostPathData:v("")}}template(e,n){return u("section",{class:"renderer"},u("svg",null,u("path",{class:"ghost","store-d":n.ghostPathData})),u(Dt,{ref:this.ref("canvas")}))}afterRender(){l.app.lines.subscribe(this.updateGhost),l.app.lines.subscribe(this.updateCanvas),l.app.viewMode.subscribe(this.updateCanvas),l.raf.frameCount.subscribe(this.updateCanvas)}afterMount(){this.updateGhost(),this.updateCanvas()}updateGhost(){const e=l.app.lines.get();if(!e||!e.length){this.state.ghostPathData.set("");return}for(const n of e)n.hasGhost||n.fillMode!=="AB"&&(n.points.length<=5||(this.state.ghostPathData.current+=n.pathData+" ",n.hasGhost=!0));this.state.ghostPathData.trigger()}updateCanvas(){this.refs.canvas.clear();const e=l.raf.frameCount.get(),{context:n}=this.refs.canvas;for(const s of l.app.lines.get())s.render(n,{frame:e,smoothed:!0})}}var Z={},Un={get exports(){return Z},set exports(t){Z=t}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(t){(function(){var e={}.hasOwnProperty;function n(){for(var s=[],r=0;r<arguments.length;r++){var i=arguments[r];if(i){var o=typeof i;if(o==="string"||o==="number")s.push(i);else if(Array.isArray(i)){if(i.length){var a=n.apply(null,i);a&&s.push(a)}}else if(o==="object"){if(i.toString!==Object.prototype.toString&&!i.toString.toString().includes("[native code]")){s.push(i.toString());continue}for(var c in i)e.call(i,c)&&i[c]&&s.push(c)}}}return s.join(" ")}t.exports?(n.default=n,t.exports=n):window.classNames=n})()})(Un);class E extends D{beforeRender(e){this.animate=this.animate.bind(this),this.handleClick=this.handleClick.bind(this),this.state={label:e["store-label"]||M(e.label),isWaiting:e["store-is-waiting"]||v(!1),isDisabled:e["store-disabled"]||v(e.disabled),isHidden:e["store-hidden"]||v(e.hidden)}}template(e,n){return u("button",{class:Z("button",e.class),"store-class-is-waiting":n.isWaiting,"store-disabled":n.isDisabled,"store-hidden":n.isHidden,"event-click":this.handleClick,"event-mouseenter":e["event-mouseenter"]||B,"event-mouseleave":e["event-mouseleave"]||B,title:e.title,style:e.style,type:e.type},e.icon&&u("div",{class:"button__icon",ref:this.ref("icon"),innerHTML:e.icon}),u("div",{class:"button__text","store-innerHTML":n.label}))}afterRender(){this.state.isHidden.subscribe(this.animate)}animate(){this&&this.refs&&this.refs.icon&&(this.refs.icon.style.animation="none",this.refs.icon.offsetHeight,this.refs.icon.style.animation=null)}async handleClick(e){if(this.state.isWaiting.get())return e.preventDefault();this.animate(),this.state.isWaiting.set(!0),await(this.props["event-click"]||B)(e),this.mounted&&this.state.isWaiting.set(!1)}}class Ze extends D{beforeRender(e){this.update=this.update.bind(this),this.handleChange=this.handleChange.bind(this),this.state={label:e["store-label"]||M(e.label),value:e["store-value"]||v(e.value),autofocus:e["store-autofocus"]||M(e.autofocus),placeholder:e["store-placeholder"]||M(e.placeholder),min:e["store-min"]||M(e.min),max:e["store-max"]||M(e.max),step:e["store-step"]||M(e.step),isWaiting:e["store-is-waiting"]||v(!1),isDisabled:e["store-disabled"]||v(e.disabled),isHidden:e["store-hidden"]||v(e.hidden)}}template(e,n){return u("div",{class:Z("input",e.class),"store-disabled":n.isDisabled,"store-hidden":n.isHidden,style:e.style,"event-click":s=>{this.refs.input.select(),this.refs.input.focus()}},e.label&&u("label",{innerHTML:e.label}),u("input",{ref:this.ref("input"),"event-input":this.update,"event-change":this.handleChange,type:e.type,size:e.size,"store-value":n.value,"store-autofocus":n.autofocus,"store-placeholder":n.placeholder,"store-min":n.min,"store-max":n.max,"store-step":n.step}),e.after&&u("div",{class:"input__before",innerHTML:e.after}))}afterMount(){this.state.value.subscribe(this.update),this.update()}update(){if(this.props.size==="auto"){const e=(String(this.refs.input.value)||"").length||(this.props.placeholder||"").length||1;this.refs.input.style.width=e+"ch"}}handleChange(){this.props.min!==void 0&&this.refs.input.value<this.props.min&&(this.refs.input.value=this.props.min),this.props.max!==void 0&&this.refs.input.value>this.props.max&&(this.refs.input.value=this.props.max),this.state.value.set(this.refs.input.type==="number"?+this.refs.input.value:this.refs.input.value)}}let Wn=t=>crypto.getRandomValues(new Uint8Array(t)),zn=(t,e,n)=>{let s=(2<<Math.log(t.length-1)/Math.LN2)-1,r=-~(1.6*s*e/t.length);return(i=e)=>{let o="";for(;;){let a=n(r),c=r;for(;c--;)if(o+=t[a[c]&s]||"",o.length===i)return o}}},Zn=(t,e=21)=>zn(t,e,Wn);const qe=t=>l.api.url.get()+"/api/"+t,qn={timer:null,attempts:0,start:function(){if(this.stop(),!(!l.api||!l.api.url.get())){if(this.attempts>=l.api.pollingMaxAttempts.get()){console.warn("api max polling attempts reached"),l.api=null,console.error("Impossible de contacter l’API: l’export PDF ne sera pas disponible.");return}this.timer=setTimeout(async()=>{this.attempts++;try{const e=await(await fetch(qe("version"),{method:"GET"})).json();if(!e||!e.version)throw new Error("Ping malformed");l.api.version.set(e.version)}catch{this.start()}},l.api.pollingInterval.get())}},stop:function(){clearTimeout(this.timer)}},nt={polling:qn,import:async t=>{const e=await fetch(qe("json/"+t));if(!e.ok&&e.status!==500)throw e;const n=e.json();if(n.error)throw new Error(n.error);return n},export:async(t,e)=>{const n=await fetch(qe(e?"json?uid="+e:"json"),{method:"PUT",body:JSON.stringify(t)});if(!n.ok&&n.status!==500)throw n;const s=n.json();if(s.error)throw new Error(s.error);return s}};const st=`<svg width="24" height="24" stroke-width="1.5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M6.75827 17.2426L12.0009 12M17.2435 6.75736L12.0009 12M12.0009 12L6.75827 6.75736M12.0009 12L17.2435 17.2426" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
`;let ve=class extends D{beforeRender(){this.destroy=this.destroy.bind(this)}template(e){return u("div",{class:"modal__wrapper",...e.bigText&&{"event-click":this.destroy}},u("section",{class:Z("modal",e.class,{"big-text":e.bigText})},u("header",{class:"modal__header"},u("h2",{class:"modal__title"},e.title),u(E,{icon:st,"event-click":this.destroy})),u("div",{class:"modal__content"},e.children)))}beforeDstroy(){this.destroyed||(this.props["event-close"]||B)()}};const Tt=`<svg width="24" height="24" stroke-width="1.5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M5 13L9 17L19 7" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
`;function Gn(t,e){F(u(ve,{...e,bigText:!0},e.url?u("a",{href:e.url},t):t))}function Jn(t,e){F(u(ve,{...e},t))}async function Yn(t,{title:e="Valeur demandée",yes:n="Valider",no:s="Annuler",type:r="text",value:i=void 0,icon:o=null,before:a=null,after:c=null,placeholder:f=null,onCancel:p=()=>null}={}){return new Promise(g=>{const w={},C=async()=>{g(w.input.state.value.get()),w.modal.destroy()},d=()=>{g(),w.modal.destroy()};F(u(ve,{ref:b=>{w.modal=b},"event-close":d},u("form",{"event-submit":async b=>{b.preventDefault(),C()}},u(Ze,{autofocus:!0,label:t,ref:b=>{w.input=b},value:i,icon:o,placeholder:f,type:r,before:a,after:c})),u("footer",null,u("fieldset",{class:"group"},u(E,{"event-click":d,icon:st,label:s}),u(E,{"event-click":C,icon:Tt,label:n,type:"submit"})))))})}function Xn(t,{title:e="Action requise",yes:n="Valider",no:s="Annuler",onYes:r=()=>!0,onNo:i=()=>!1,onCancel:o=()=>null}={}){return new Promise(a=>{let c;F(u(ve,{ref:g=>{c=g},"event-close":async()=>a(await o(this))},t,u("footer",null,u("fieldset",{class:"group"},u(E,{"event-click":async()=>{a(await i(this)),c.destroy()},icon:st,label:s}),u(E,{"event-click":async()=>{a(await r(this)),c.destroy()},icon:Tt,label:n})))))})}function Qn(t){const e=t instanceof Response?"api":t instanceof Error?"internal":"unknown";F(u(ve,{title:e==="api"?"Erreur de l’API":"Erreur"},e==="internal"&&[u("p",null,t.message),u("pre",{class:"stacktrace"},t.stack)],e==="api"&&[u("p",null,"[",t.status,"] ",t.statusText),u("pre",{class:"stacktrace"},t.message)],e==="unknown"&&[u("p",null,"Une erreur inconnue est survenue")]))}const he={bigText:Gn,say:Jn,prompt:Yn,confirm:Xn,error:Qn},es=Zn("0123456789ABCDEF",6);async function ts({force:t=!1}={}){!t&&!await he.confirm("Tout effacer ?")||(l.app.lines.set([]),l.app.inputMode.set("draw"))}function ns(){l.app.lines.update(t=>t.slice(0,t.length-1),!0),l.app.lines.current.length||l.app.inputMode.set("draw")}async function ss(){const t=l.app.lines.current.map(e=>e.toJSON());try{const{uid:e}=await nt.export(t,es()),n=new URL(window.location);n.searchParams.append("uid",e),he.bigText(e,{url:n})}catch(e){he.error(e)}}async function rs(t){l.api.version.get()||await new Promise(e=>l.api.version.subscribeOnce(e));try{const e=await nt.import(t);l.app.lines.set(e.map(n=>new Me(n))),P.start()}catch(e){e.status&&e.status===404?he.say("Impossible de trouver l’animation demandée",{title:"Erreur"}):he.error(e)}}const ne={clear:ts,undo:ns,save:ss,load:rs},is=`<svg width="24" height="24" stroke-width="1.5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M3 19V5C3 3.89543 3.89543 3 5 3H16.1716C16.702 3 17.2107 3.21071 17.5858 3.58579L20.4142 6.41421C20.7893 6.78929 21 7.29799 21 7.82843V19C21 20.1046 20.1046 21 19 21H5C3.89543 21 3 20.1046 3 19Z" stroke="currentColor" stroke-width="1.5"/>
<path d="M8.6 9H15.4C15.7314 9 16 8.73137 16 8.4V3.6C16 3.26863 15.7314 3 15.4 3H8.6C8.26863 3 8 3.26863 8 3.6V8.4C8 8.73137 8.26863 9 8.6 9Z" stroke="currentColor" stroke-width="1.5"/>
<path d="M6 13.6V21H18V13.6C18 13.2686 17.7314 13 17.4 13H6.6C6.26863 13 6 13.2686 6 13.6Z" stroke="currentColor" stroke-width="1.5"/>
</svg>
`,os=`<svg width="24" height="24" stroke-width="1.5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M6.90588 4.53682C6.50592 4.2998 6 4.58808 6 5.05299V18.947C6 19.4119 6.50592 19.7002 6.90588 19.4632L18.629 12.5162C19.0211 12.2838 19.0211 11.7162 18.629 11.4838L6.90588 4.53682Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
`,as=`<svg width="24" height="24" stroke-width="1.5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M6 18.4V5.6C6 5.26863 6.26863 5 6.6 5H9.4C9.73137 5 10 5.26863 10 5.6V18.4C10 18.7314 9.73137 19 9.4 19H6.6C6.26863 19 6 18.7314 6 18.4Z" stroke="currentColor" stroke-width="1.5"/>
<path d="M14 18.4V5.6C14 5.26863 14.2686 5 14.6 5H17.4C17.7314 5 18 5.26863 18 5.6V18.4C18 18.7314 17.7314 19 17.4 19H14.6C14.2686 19 14 18.7314 14 18.4Z" stroke="currentColor" stroke-width="1.5"/>
</svg>
`;class ls extends D{beforeRender(){this.update=this.update.bind(this),this.handleChange=this.handleChange.bind(this)}template(e,n){return u("section",{class:"timeline"},u("fieldset",{class:"group"},u(E,{icon:as,"store-hidden":ht(l.raf.isRunning),"event-click":P.stop}),u(E,{icon:os,"store-hidden":l.raf.isRunning,"event-click":P.start}),u("input",{type:"range",ref:this.ref("input"),"event-input":this.handleChange,"event-focus":s=>s.target.blur(),step:"1","store-value":l.raf.frameCount,"store-max":l.raf.maxDuration}),l.app.proMode.get()&&[u(Ze,{type:"number",size:"auto","store-value":l.raf.frameCount,after:"/",min:0,style:"gap: var(--gutter-internal)","store-max":l.raf.maxDuration}),u(Ze,{type:"number",size:"auto",style:"border-left: 0; padding-left: 0","store-value":l.raf.maxDuration,min:l.raf.fps.get(),after:" frames",max:1e4})]),u(E,{icon:is,"event-click":ne.save,"store-hidden":ht(l.api.version),"store-disabled":Q(l.app.lines,s=>!s.length)}))}afterRender(){l.raf.frameCount.subscribe(this.update)}update(){const e=l.raf.frameCount.get();this.refs.input.value=e}handleChange(e){P.stop(),l.raf.frameCount.set(+e.target.value)}}const Ge=`<svg width="24" height="24" stroke-width="1.5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
`;class cs extends D{beforeRender(e){this.handleValue=this.handleValue.bind(this),this.state={value:e["store-value"]||v(e.value),isDisabled:e["store-disabled"]||v(e.disabled),isHidden:e["store-hidden"]||v(e.hidden)}}template(e,n){return u("div",{class:Z("color-picker",e.class)},u("input",{type:"color",ref:this.ref("input"),"store-value":n.value,"event-input":s=>this.state.value.set(s.target.value)}),u(E,{icon:Ge,"store-disabled":n.isDisabled,"store-hidden":n.isHidden,"event-click":s=>this.refs.input.click()}))}afterMount(){this.state.value.subscribe(this.handleValue),this.handleValue()}handleValue(){const e=this.state.value.get();e?this.base.style.setProperty("--color",e):this.base.style.removeProperty("--color"),(this.props["event-change"]||B)(e||"white")}}class J extends D{beforeRender(e){this.update=this.update.bind(this),this.state={value:e["store-value"]||v(((e.values||[])[0]||{}).value)}}template(e,n){return u("div",{class:Z("switcher",e.class)},e.values.map((s,r)=>u(E,{...s,ref:this.refArray("buttons"),"event-click":()=>this.handleChange(this.props.values[(r+1)%this.props.values.length])})))}afterMount(){this.state.value.subscribe(this.update),this.update()}update(){const e=this.props.values.findIndex(({value:n})=>n===this.state.value.current);for(let n=0;n<this.refs.buttons.length;n++)this.refs.buttons[n].state.isHidden.set(n!==e)}handleChange(e){(this.props["event-change"]||B)(e.value),this.state.value.set(e.value)}}const us=`<svg width="24" height="24" viewBox="0 0 24 24" stroke-width="1.5" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M20 9L18.005 20.3463C17.8369 21.3026 17.0062 22 16.0353 22H7.96474C6.99379 22 6.1631 21.3026 5.99496 20.3463L4 9" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M21 6L15.375 6M3 6L8.625 6M8.625 6V4C8.625 2.89543 9.52043 2 10.625 2H13.375C14.4796 2 15.375 2.89543 15.375 4V6M8.625 6L15.375 6" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
`,fs=`<svg width="24" height="24" viewBox="0 0 24 24" stroke-width="1.5" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M4.5 8C8.5 8 11 8 15 8C15 8 15 8 15 8C15 8 20 8 20 12.7059C20 18 15 18 15 18C11.5714 18 9.71429 18 6.28571 18" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M7.5 11.5C6.13317 10.1332 5.36683 9.36683 4 8C5.36683 6.63317 6.13317 5.86683 7.5 4.5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
`,hs=`<svg width="24" height="24" stroke-width="1.5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M9 2L15 2" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M12 10L12 14" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M12 22C16.4183 22 20 18.4183 20 14C20 9.58172 16.4183 6 12 6C7.58172 6 4 9.58172 4 14C4 18.4183 7.58172 22 12 22Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
`;class ds extends D{beforeRender(){this.state={hasNoLines:Q(l.app.lines,e=>!e.length)}}template(e,n){return u("section",{class:"toolbar"},u("fieldset",null,u(J,{"store-disabled":n.hasNoLines,"store-value":l.app.inputMode,values:l.INPUT_MODES.get()}),u("fieldset",{class:"group"},l.app.proMode.get()&&u(J,{"store-value":l.app.drawMode,values:l.DRAW_MODES.get()}),u(J,{values:Object.entries(l.LINE_WIDTHS.get()).map(([s,r])=>({value:r,icon:Ge,class:`disc disc-${s}`})),"event-change":s=>{l.app.style.update(r=>({...r,...s}),!0)}}),l.app.proMode.get()?u(cs,{"event-change":s=>{l.app.style.update(r=>({...r,strokeStyle:s}),!0)}}):u(J,{values:l.COLORS.get().map(({label:s,value:r})=>({value:r,icon:Ge,class:"disc",style:`--color: ${r}`})),"event-change":s=>{l.app.style.update(r=>({...r,strokeStyle:s}),!0)}})),u(J,{values:l.FILL_MODES.get().map(({value:s,icon:r})=>({value:s,icon:r||hs,label:s.replace(/(→)/g,"&thinsp;$1&thinsp;")})),"event-change":s=>l.app.fillMode.set(s)})),u("fieldset",null,u(J,{class:"view-mode",values:l.VIEW_MODES.get(),"store-value":l.app.viewMode}),u("fieldset",{class:"group"},u(E,{icon:fs,"store-disabled":n.hasNoLines,"event-click":ne.undo}),u(E,{icon:us,"store-disabled":Q(l.app.lines,s=>!s.length),"event-click":ne.clear}))))}}class ps extends D{template(e){return u("main",{class:"app","store-data-view-mode":l.app.viewMode},u(ds,null),u("div",{class:"app__main"},u(Kn,{"store-disabled":Q(l.app.inputMode,n=>n!=="draw")}),u(Hn,{"store-disabled":Q(l.app.inputMode,n=>n!=="paste")}),u(Vn,null)),u(ls,null))}}const gs=`<svg width='100%' height='100%' viewBox='0 0 116 100'>
  <path d='M57.734,82.319C39.884,82.319 25.414,67.85 25.414,50C25.414,32.15 39.884,17.681 57.734,17.681C75.584,17.681 90.053,32.15 90.053,50C90.053,67.85 75.584,82.319 57.734,82.319M86.603,-0L28.867,-0L0,50L28.867,100L86.603,100L115.47,50L86.603,-0Z' />
</svg>
`;class Ct extends D{beforeRender(e){this.handleClick=this.handleClick.bind(this),this.state={isClickable:M(e.clickable!==!1)}}template(e,n){return u("section",{class:"splashscreen","store-class-is-clickable":n.isClickable,"event-click":this.handleClick},u("div",{class:"splashscreen__content"},u("div",{class:"splashscreen__icon",innerHTML:gs}),u(E,{label:e.text||"Nouveau dessin"})))}async handleClick(){this.state.isClickable.get()&&(document.body.requestFullscreen&&await document.body.requestFullscreen(),this.destroy())}}var Ie=typeof navigator<"u"?navigator.userAgent.toLowerCase().indexOf("firefox")>0:!1;function Ne(t,e,n,s){t.addEventListener?t.addEventListener(e,n,s):t.attachEvent&&t.attachEvent("on".concat(e),function(){n(window.event)})}function Bt(t,e){for(var n=e.slice(0,e.length-1),s=0;s<n.length;s++)n[s]=t[n[s].toLowerCase()];return n}function Ft(t){typeof t!="string"&&(t=""),t=t.replace(/\s/g,"");for(var e=t.split(","),n=e.lastIndexOf("");n>=0;)e[n-1]+=",",e.splice(n,1),n=e.lastIndexOf("");return e}function vs(t,e){for(var n=t.length>=e.length?t:e,s=t.length>=e.length?e:t,r=!0,i=0;i<n.length;i++)s.indexOf(n[i])===-1&&(r=!1);return r}var de={backspace:8,"⌫":8,tab:9,clear:12,enter:13,"↩":13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_multiply:106,num_add:107,num_enter:108,num_subtract:109,num_decimal:110,num_divide:111,"⇪":20,",":188,".":190,"/":191,"`":192,"-":Ie?173:189,"=":Ie?61:187,";":Ie?59:186,"'":222,"[":219,"]":221,"\\":220},S={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,cmd:91,command:91},Je={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91},L={16:!1,18:!1,17:!1,91:!1},x={};for(var Ce=1;Ce<20;Ce++)de["f".concat(Ce)]=111+Ce;var m=[],kt=!1,It="all",Nt=[],Le=function(e){return de[e.toLowerCase()]||S[e.toLowerCase()]||e.toUpperCase().charCodeAt(0)},ms=function(e){return Object.keys(de).find(function(n){return de[n]===e})},ws=function(e){return Object.keys(S).find(function(n){return S[n]===e})};function Kt(t){It=t||"all"}function pe(){return It||"all"}function bs(){return m.slice(0)}function ys(){return m.map(function(t){return ms(t)||ws(t)||String.fromCharCode(t)})}function Cs(t){var e=t.target||t.srcElement,n=e.tagName,s=!0;return(e.isContentEditable||(n==="INPUT"||n==="TEXTAREA"||n==="SELECT")&&!e.readOnly)&&(s=!1),s}function ks(t){return typeof t=="string"&&(t=Le(t)),m.indexOf(t)!==-1}function Ms(t,e){var n,s;t||(t=pe());for(var r in x)if(Object.prototype.hasOwnProperty.call(x,r))for(n=x[r],s=0;s<n.length;)n[s].scope===t?n.splice(s,1):s++;pe()===t&&Kt(e||"all")}function xs(t){var e=t.keyCode||t.which||t.charCode,n=m.indexOf(e);if(n>=0&&m.splice(n,1),t.key&&t.key.toLowerCase()==="meta"&&m.splice(0,m.length),(e===93||e===224)&&(e=91),e in L){L[e]=!1;for(var s in S)S[s]===e&&(T[s]=!1)}}function _s(t){if(typeof t>"u")Object.keys(x).forEach(function(o){return delete x[o]});else if(Array.isArray(t))t.forEach(function(o){o.key&&Ke(o)});else if(typeof t=="object")t.key&&Ke(t);else if(typeof t=="string"){for(var e=arguments.length,n=new Array(e>1?e-1:0),s=1;s<e;s++)n[s-1]=arguments[s];var r=n[0],i=n[1];typeof r=="function"&&(i=r,r=""),Ke({key:t,scope:r,method:i,splitKey:"+"})}}var Ke=function(e){var n=e.key,s=e.scope,r=e.method,i=e.splitKey,o=i===void 0?"+":i,a=Ft(n);a.forEach(function(c){var f=c.split(o),p=f.length,g=f[p-1],w=g==="*"?"*":Le(g);if(x[w]){s||(s=pe());var C=p>1?Bt(S,f):[];x[w]=x[w].filter(function(d){var b=r?d.method===r:!0;return!(b&&d.scope===s&&vs(d.mods,C))})}})};function Mt(t,e,n,s){if(e.element===s){var r;if(e.scope===n||e.scope==="all"){r=e.mods.length>0;for(var i in L)Object.prototype.hasOwnProperty.call(L,i)&&(!L[i]&&e.mods.indexOf(+i)>-1||L[i]&&e.mods.indexOf(+i)===-1)&&(r=!1);(e.mods.length===0&&!L[16]&&!L[18]&&!L[17]&&!L[91]||r||e.shortcut==="*")&&e.method(t,e)===!1&&(t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation&&t.stopPropagation(),t.cancelBubble&&(t.cancelBubble=!0))}}}function xt(t,e){var n=x["*"],s=t.keyCode||t.which||t.charCode;if(T.filter.call(this,t)){if((s===93||s===224)&&(s=91),m.indexOf(s)===-1&&s!==229&&m.push(s),["ctrlKey","altKey","shiftKey","metaKey"].forEach(function(d){var b=Je[d];t[d]&&m.indexOf(b)===-1?m.push(b):!t[d]&&m.indexOf(b)>-1?m.splice(m.indexOf(b),1):d==="metaKey"&&t[d]&&m.length===3&&(t.ctrlKey||t.shiftKey||t.altKey||(m=m.slice(m.indexOf(b))))}),s in L){L[s]=!0;for(var r in S)S[r]===s&&(T[r]=!0);if(!n)return}for(var i in L)Object.prototype.hasOwnProperty.call(L,i)&&(L[i]=t[Je[i]]);t.getModifierState&&!(t.altKey&&!t.ctrlKey)&&t.getModifierState("AltGraph")&&(m.indexOf(17)===-1&&m.push(17),m.indexOf(18)===-1&&m.push(18),L[17]=!0,L[18]=!0);var o=pe();if(n)for(var a=0;a<n.length;a++)n[a].scope===o&&(t.type==="keydown"&&n[a].keydown||t.type==="keyup"&&n[a].keyup)&&Mt(t,n[a],o,e);if(s in x){for(var c=0;c<x[s].length;c++)if((t.type==="keydown"&&x[s][c].keydown||t.type==="keyup"&&x[s][c].keyup)&&x[s][c].key){for(var f=x[s][c],p=f.splitKey,g=f.key.split(p),w=[],C=0;C<g.length;C++)w.push(Le(g[C]));w.sort().join("")===m.sort().join("")&&Mt(t,f,o,e)}}}}function Ls(t){return Nt.indexOf(t)>-1}function T(t,e,n){m=[];var s=Ft(t),r=[],i="all",o=document,a=0,c=!1,f=!0,p="+",g=!1;for(n===void 0&&typeof e=="function"&&(n=e),Object.prototype.toString.call(e)==="[object Object]"&&(e.scope&&(i=e.scope),e.element&&(o=e.element),e.keyup&&(c=e.keyup),e.keydown!==void 0&&(f=e.keydown),e.capture!==void 0&&(g=e.capture),typeof e.splitKey=="string"&&(p=e.splitKey)),typeof e=="string"&&(i=e);a<s.length;a++)t=s[a].split(p),r=[],t.length>1&&(r=Bt(S,t)),t=t[t.length-1],t=t==="*"?"*":Le(t),t in x||(x[t]=[]),x[t].push({keyup:c,keydown:f,scope:i,mods:r,shortcut:s[a],method:n,key:s[a],splitKey:p,element:o});typeof o<"u"&&!Ls(o)&&window&&(Nt.push(o),Ne(o,"keydown",function(w){xt(w,o)},g),kt||(kt=!0,Ne(window,"focus",function(){m=[]},g)),Ne(o,"keyup",function(w){xt(w,o),xs(w)},g))}function As(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"all";Object.keys(x).forEach(function(n){var s=x[n].filter(function(r){return r.scope===e&&r.shortcut===t});s.forEach(function(r){r&&r.method&&r.method()})})}var $e={getPressedKeyString:ys,setScope:Kt,getScope:pe,deleteScope:Ms,getPressedKeyCodes:bs,isPressed:ks,filter:Cs,trigger:As,unbind:_s,keyMap:de,modifier:S,modifierMap:Je};for(var He in $e)Object.prototype.hasOwnProperty.call($e,He)&&(T[He]=$e[He]);if(typeof window<"u"){var Es=window.hotkeys;T.noConflict=function(t){return t&&window.hotkeys===T&&(window.hotkeys=Es),T},window.hotkeys=T}[{key:"space",description:"Jouer ou stopper l’animation",callback:P.toggle},{key:"left",description:"Reculer d’une image",callback:()=>{P.stop(),l.raf.frameCount.update(t=>Math.max(0,t-1))}},{key:"shift+left",description:"Reculer de 10 images",callback:()=>{P.stop(),l.raf.frameCount.update(t=>Math.max(0,t-10))}},{key:"right",description:"Avancer d’une image",callback:()=>{P.stop(),l.raf.frameCount.update(t=>Math.min(t+1,l.raf.maxDuration.get()))}},{key:"shift+right",description:"Avancer de 10 images",callback:()=>{P.stop(),l.raf.frameCount.update(t=>Math.min(t+10,l.raf.maxDuration.get()))}},{key:"cmd+z",description:"Effacer le dernier dessin",callback:ne.undo},{key:"cmd+x",description:"Tout effacer",callback:ne.clear},{key:"w",description:"Afficher/masquer les dessins à venir",callback:()=>l.app.viewMode.update(t=>t==="wireframe"?"preview":"wireframe")},{key:"tab",description:"Afficher / cacher l’interface",callback:t=>{t.preventDefault(),l.app.viewMode.update(e=>e==="no-ui"?"wireframe":"no-ui")}}].map(Ds);function Ds(t){return t.callback&&!t.disabled&&T(t.key,e=>{t.filter&&t.filter(e)||(e.preventDefault(),e.stopPropagation(),t.callback(e))}),t}console.log("1.2.2-production");const _t=new URLSearchParams(window.location.search).get("uid");(async()=>{if(nt.polling.start(),_t){const{components:t}=F(u(Ct,{text:"Chargement…",clickable:!1}));await ne.load(_t),t[0].destroy()}else F(u(Ct,null));F(u(ps,null))})();
